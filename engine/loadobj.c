// Module: Loadobj.obj
// Source: C:\Copter\source\engine\Loadobj.c
// autogenerated by simcopter_tool from PDB file

// Type: struct _BSPtree (forward reference);
// _BSPtree Class implementation not found

// Type: unsigned short;

// Type: int32_t;

// Type: char *;

// Type: struct ObjInfo (forward reference);
// ObjInfo Class implementation not found

// Type: struct GEOM_Resource (forward reference);
// GEOM_Resource Class implementation not found

// Type: struct VRResource (forward reference);
// VRResource Class implementation not found

// Type: struct VRMemPool (forward reference);
// VRMemPool Class implementation not found

// Type: void;

// Type: struct Point3d (forward reference);
// Point3d Class implementation not found

// Type: struct GameObjectHdrType;
struct GameObjectHdrType{
	char Id[4];
	long Size;
	short NVerts;
	short NFaces;
	unsigned long Attrib;
	long Radius;
	long YRadius;
	char ObjName[24];
	char TextureFile[64];
	long ObjAnimCnt;
	long ObjAnimPtr;
	int32_t ID;
};

// Type: int32_t *;

// Type: short[128];

// Type: struct FileBSPTreeHdrType;
struct FileBSPTreeHdrType{
	char Id[4];
	long Size;
	short NNodes;
};

// Type: struct _FaceHdr (forward reference);
// _FaceHdr Class implementation not found

// Type: struct FileFaceHdrType;
struct FileFaceHdrType{
	char Id[4];
	long Size;
	short NVerts;
	unsigned long Attrib;
	unsigned long AuxAttrib;
	unsigned char Color;
	short TextureId;
};

// Type: struct ObjectHdr (forward reference);
// ObjectHdr Class implementation not found

// Type: int32_t[4][4];

// Type: struct Point3d;
struct Point3d{
	int32_t x;
	int32_t y;
	int32_t z;
};

// Type: struct TEXT_Resource (forward reference);
// TEXT_Resource Class implementation not found

// Type: struct VRObjInfo;
struct VRObjInfo{
	int32_t Faces;
	int32_t Verts;
	int32_t Attribute;
	int32_t Radius;
	struct Point3d* ObjCenter;
	struct Point3d* VertsPtr;
	struct Xform3d* VertsXfm;
	struct Point3d* OrgVerts;
	int32_t[4][4]* Matrix;
};

// Type: struct VRBmpHdr (forward reference);
// VRBmpHdr Class implementation not found

// Type: struct MapVert (forward reference);
// MapVert Class implementation not found

// Type: struct Project3d (forward reference);
// Project3d Class implementation not found

// Type: struct FPoint3d;
struct FPoint3d{
	double x;
	double y;
	double z;
};

// Type: double;



// Contribution: 1:000d1180-000d42ba Module: 147, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x004d2180
struct VRResource* LoadGroup(struct ObjInfo* info, int32_t objs) {
	int32_t i;
	struct GEOM_Resource* res;
	char * group;

// LINE 152:
	__asm        mov    eax, objs;
	__asm        shl    eax, 2;
	__asm        add    eax, 0x18;
	__asm        push   eax;
	__asm        mov    eax, G_currmempool;
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    res, eax;
// LINE 153:
	__asm        cmp    res, 0;
	__asm        jne    _T3f;
// LINE 154:
	__asm        mov    GlobalError, 4;
// LINE 155:
	__asm        xor    eax, eax;
	__asm        jmp    _T1f4;
// LINE 166:
_T3f:
	__asm        mov    eax, info;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx+4];
	__asm        shl    ecx, 2;
	__asm        lea    eax, [ecx+eax*8];
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx];
	__asm        mov    edx, ecx;
	__asm        shl    ecx, 3;
	__asm        sub    ecx, edx;
	__asm        lea    eax, [eax+ecx*4];
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx+0x14];
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        lea    eax, [eax+ecx*4];
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx+8];
	__asm        shl    ecx, 5;
	__asm        add    eax, ecx;
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx+0xC];
	__asm        shl    ecx, 5;
	__asm        add    eax, ecx;
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx+0x10];
	__asm        shl    ecx, 4;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        add    eax, ecx;
	__asm        mov    ecx, info;
	__asm        mov    ecx, [ecx+0x10];
	__asm        shl    ecx, 4;
	__asm        add    eax, ecx;
	__asm        mov    ecx, objs;
	__asm        lea    ecx, [ecx+ecx*8];
	__asm        shl    ecx, 4;
	__asm        add    eax, ecx;
	__asm        mov    ObjDataSize, eax;
// LINE 168:
	__asm        mov    eax, info;
	__asm        mov    eax, [eax+4];
	__asm        shl    eax, 3;
	__asm        push   eax;
	__asm        call   S2AllocPool;
	__asm        add    esp, 4;
	__asm        mov    ecx, res;
	__asm        mov    [ecx+0x14], eax;
// LINE 169:
	__asm        mov    eax, res;
	__asm        cmp    dword ptr [eax+0x14], 0;
	__asm        jge    _Te1;
// LINE 171:
	__asm        mov    GlobalError, 4;
// LINE 172:
	__asm        xor    eax, eax;
	__asm        jmp    _T1f4;
// LINE 175:
_Te1:
	__asm        mov    eax, ObjDataSize;
	__asm        push   eax;
	__asm        mov    eax, G_currmempool;
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    group, eax;
	__asm        cmp    group, 0;
	__asm        jne    _T113;
// LINE 176:
	__asm        mov    GlobalError, 4;
// LINE 177:
	__asm        xor    eax, eax;
	__asm        jmp    _T1f4;
// LINE 180:
_T113:
	__asm        mov    eax, group;
	__asm        mov    ObjData, eax;
// LINE 184:
	__asm        mov    FaceArray, 0;
// LINE 185:
	__asm        mov    i, 0;
	__asm        jmp    _T134;
_T131:
	__asm        inc    i;
_T134:
	__asm        mov    eax, objs;
	__asm        cmp    i, eax;
	__asm        jge    _T19b;
// LINE 186:
	__asm        mov    eax, ObjData;
	__asm        mov    ecx, i;
	__asm        mov    edx, res;
	__asm        mov    [edx+ecx*4+0x18], eax;
// LINE 187:
	__asm        mov    eax, res;
	__asm        mov    eax, [eax+0x14];
	__asm        push   eax;
	__asm        call   LoadObjtType;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T196;
// LINE 189:
	__asm        cmp    FaceArray, 0;
	__asm        je     _T181;
// LINE 190:
	__asm        mov    eax, FaceArray;
	__asm        push   eax;
	__asm        call   free;
	__asm        add    esp, 4;
// LINE 191:
_T181:
	__asm        mov    eax, G_currmempool;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 192:
	__asm        xor    eax, eax;
	__asm        jmp    _T1f4;
// LINE 194:
_T196:
	__asm        jmp    _T131;
// LINE 196:
_T19b:
	__asm        cmp    ObjDataSize, 0;
	__asm        jge    _T1c7;
// LINE 198:
	__asm        mov    eax, G_currmempool;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 199:
	__asm        mov    GlobalError, 0xA;
// LINE 200:
	__asm        xor    eax, eax;
	__asm        jmp    _T1f4;
// LINE 208:
_T1c7:
	__asm        mov    eax, group;
	__asm        mov    ecx, res;
	__asm        mov    [ecx], eax;
// LINE 209:
	__asm        mov    eax, res;
	__asm        mov    dword ptr [eax+8], 1;
// LINE 210:
	__asm        mov    eax, res;
	__asm        mov    dword ptr [eax+0xC], 0;
// LINE 211:
	__asm        mov    eax, objs;
	__asm        mov    ecx, res;
	__asm        mov    [ecx+0x10], eax;
// LINE 212:
	__asm        mov    eax, res;
	__asm        jmp    _T1f4;
// LINE 214:
_T1f4:
}

// FUNCTION: COPTER_D 0x004d2379
void VRAssignMemPoolToRes(struct VRResource* res, struct VRMemPool* mem) {
	struct GEOM_Resource* geo;
	int32_t i;

// LINE 229:
	__asm        mov    eax, res;
	__asm        mov    geo, eax;
// LINE 230:
	__asm        mov    i, 0;
	__asm        jmp    _T1e;
_T1b:
	__asm        inc    i;
_T1e:
	__asm        mov    eax, geo;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T49;
// LINE 231:
	__asm        mov    eax, mem;
	__asm        push   eax;
	__asm        mov    eax, i;
	__asm        mov    ecx, geo;
	__asm        mov    eax, [ecx+eax*4+0x18];
	__asm        push   eax;
	__asm        call   0x004D84DB;
	__asm        add    esp, 8;
// LINE 232:
	__asm        jmp    _T1b;
// LINE 233:
_T49:
}

// FUNCTION: COPTER_D 0x004d23c7
int32_t VRGetResObjectCnt(struct VRResource* res) {
	struct GEOM_Resource* geo;

// LINE 247:
	__asm        mov    eax, res;
	__asm        mov    geo, eax;
// LINE 248:
	__asm        mov    eax, geo;
	__asm        mov    eax, [eax+0x10];
	__asm        jmp    near ptr 0x004D23E1;
// LINE 250:
}

// FUNCTION: COPTER_D 0x004d23e6
int32_t VRGetResObject(struct VRResource* res, int32_t i) {
	struct GEOM_Resource* geo;

// LINE 264:
	__asm        mov    eax, res;
	__asm        mov    geo, eax;
// LINE 265:
	__asm        mov    eax, i;
	__asm        mov    ecx, geo;
	__asm        mov    eax, [ecx+eax*4+0x18];
	__asm        jmp    near ptr 0x004D2404;
// LINE 267:
}

// FUNCTION: COPTER_D 0x004d2409
int32_t LoadObjtType(int32_t barrymempool) {
	struct Point3d* v0;
	char * dataptr;
	struct GameObjectHdrType fileobjhdr;
	struct Point3d* vlst;
	int32_t VertCount;
	int32_t y;
	int32_t hibyte;
	int32_t x;
	int32_t * FaceVertPtr;
	short w[128];
	struct FileBSPTreeHdrType treehdr;
	int32_t lobyte;
	struct _FaceHdr* faceptr;
	struct FileFaceHdrType filefacehdr;
	struct ObjectHdr* ObjectPtr;
	int32_t uses_gouraud;
	struct Point3d* v1;

// LINE 296:
	__asm        mov    uses_gouraud, 0;
// LINE 299:
	__asm        mov    eax, ObjData;
	__asm        mov    ObjectPtr, eax;
// LINE 300:
	__asm        mov    eax, ObjectPtr;
	__asm        add    eax, 0x90;
	__asm        mov    dataptr, eax;
// LINE 301:
	__asm        mov    eax, ObjectPtr;
	__asm        push   eax;
	__asm        call   0x004D8643;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T4e;
// LINE 302:
	__asm        mov    GlobalError, 9;
// LINE 303:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 307:
_T4e:
	__asm        push   0x7C;
	__asm        lea    eax, fileobjhdr.Id[0];
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _T6e;
// LINE 308:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 375:
_T6e:
	__asm        mov    eax, fileobjhdr.Attrib;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx], eax;
// LINE 376:
	__asm        movsx  eax, fileobjhdr.NVerts;
	__asm        dec    eax;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+4], eax;
// LINE 377:
	__asm        movsx  eax, fileobjhdr.NFaces;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+0x10], eax;
// LINE 378:
	__asm        mov    eax, fileobjhdr.ID;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+0x44], eax;
// LINE 379:
	__asm        mov    eax, fileobjhdr.Radius;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+0x30], eax;
// LINE 380:
	__asm        mov    eax, dataptr;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+8], eax;
// LINE 381:
	__asm        mov    eax, ObjectPtr;
	__asm        mov    dword ptr [eax+0x40], 0;
// LINE 389:
	__asm        push   0xC;
	__asm        mov    eax, ObjectPtr;
	__asm        add    eax, 0x18;
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _Te2;
// LINE 390:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 413:
_Te2:
	__asm        mov    eax, ObjectPtr;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        push   eax;
	__asm        mov    eax, dataptr;
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _T10d;
// LINE 414:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 415:
_T10d:
	__asm        mov    eax, ObjectPtr;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    dataptr, eax;
// LINE 448:
	__asm        test   reinterpret_cast<uint8_t>(fileobjhdr.Attrib), 1;
	__asm        je     _T168;
// LINE 450:
	__asm        movsx  eax, fileobjhdr.NFaces;
	__asm        shl    eax, 2;
	__asm        push   eax;
	__asm        mov    eax, ScratchPoolIndex;
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    FaceArray, eax;
	__asm        cmp    FaceArray, 0;
	__asm        jne    _T168;
// LINE 452:
	__asm        mov    GlobalError, 4;
// LINE 453:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 459:
_T168:
	__asm        mov    eax, dataptr;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+0x4C], eax;
// LINE 460:
	__asm        mov    x, 0;
	__asm        mov    VertCount, 0;
	__asm        jmp    _T193;
_T18d:
	__asm        inc    x;
_T193:
	__asm        movsx  eax, fileobjhdr.NFaces;
	__asm        cmp    eax, x;
	__asm        jle    _T5bf;
// LINE 461:
	__asm        mov    eax, dataptr;
	__asm        mov    faceptr, eax;
// LINE 464:
	__asm        push   0x15;
	__asm        lea    eax, filefacehdr.Id[0];
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _T1da;
// LINE 466:
	__asm        mov    eax, ScratchPoolIndex;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 467:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 505:
_T1da:
	__asm        push   4;
	__asm        push   0x59C218;
	__asm        lea    eax, filefacehdr.Id[0];
	__asm        push   eax;
	__asm        call   strncmp;
	__asm        add    esp, 0xC;
	__asm        test   eax, eax;
	__asm        je     _T214;
// LINE 506:
	__asm        mov    GlobalError, 6;
// LINE 507:
	__asm        mov    eax, ScratchPoolIndex;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 508:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 512:
_T214:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        add    VertCount, eax;
// LINE 513:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+4], eax;
// LINE 514:
	__asm        mov    eax, filefacehdr.Attrib;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+8], eax;
// LINE 515:
	__asm        mov    eax, filefacehdr.AuxAttrib;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0xC], eax;
// LINE 516:
	__asm        xor    eax, eax;
	__asm        mov    al, filefacehdr.Color;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0x10], eax;
// LINE 517:
	__asm        movsx  eax, filefacehdr.TextureId;
	__asm        and    eax, 0xFF00;
	__asm        mov    hibyte, eax;
// LINE 518:
	__asm        movsx  eax, filefacehdr.TextureId;
	__asm        and    eax, 0xFF;
	__asm        mov    lobyte, eax;
// LINE 519:
	__asm        mov    eax, hibyte;
	__asm        shl    eax, 8;
	__asm        or     eax, lobyte;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0x24], eax;
// LINE 520:
	__asm        add    dataptr, 0x30;
// LINE 528:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+9], 0x40;
	__asm        je     _T28d;
// LINE 529:
	__asm        mov    uses_gouraud, 1;
// LINE 532:
_T28d:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        je     _T2a4;
// LINE 533:
	__asm        mov    y, 0;
// LINE 539:
_T2a4:
	__asm        mov    eax, dataptr;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0x1C], eax;
// LINE 540:
	__asm        mov    eax, dataptr;
	__asm        mov    FaceVertPtr, eax;
// LINE 544:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        add    eax, eax;
	__asm        push   eax;
	__asm        lea    eax, w[0];
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _T2e1;
// LINE 545:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 566:
_T2e1:
	__asm        mov    y, 0;
	__asm        jmp    _T2f6;
_T2f0:
	__asm        inc    y;
_T2f6:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        cmp    eax, y;
	__asm        jle    _T339;
// LINE 568:
	__asm        mov    eax, y;
	__asm        dec    word ptr [ebp+eax*2-0x138];
// LINE 569:
	__asm        mov    eax, y;
	__asm        movsx  eax, word ptr [ebp+eax*2-0x138];
	__asm        shl    eax, 4;
	__asm        mov    ecx, FaceVertPtr;
	__asm        mov    [ecx], eax;
	__asm        add    FaceVertPtr, 4;
// LINE 570:
	__asm        jmp    _T2f0;
// LINE 571:
_T339:
	__asm        mov    eax, FaceVertPtr;
	__asm        mov    dataptr, eax;
// LINE 577:
	__asm        mov    eax, dataptr;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0x20], eax;
// LINE 581:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        shl    eax, 3;
	__asm        push   eax;
	__asm        mov    eax, dataptr;
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _T385;
// LINE 583:
	__asm        mov    eax, ScratchPoolIndex;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 584:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 586:
_T385:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        shl    eax, 3;
	__asm        add    dataptr, eax;
// LINE 608:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        shl    eax, 3;
	__asm        push   eax;
	__asm        mov    eax, barrymempool;
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0x28], eax;
// LINE 609:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        shl    eax, 3;
	__asm        push   eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x20];
	__asm        push   eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x28];
	__asm        push   eax;
	__asm        call   memcpy;
	__asm        add    esp, 0xC;
// LINE 617:
	__asm        mov    eax, dataptr;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx+0x2C], eax;
// LINE 618:
	__asm        add    dataptr, 0x10;
// LINE 619:
	__asm        movsx  eax, w[0];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, ObjectPtr;
	__asm        add    eax, [ecx+8];
	__asm        mov    v0, eax;
// LINE 620:
	__asm        movsx  eax, w[1];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, ObjectPtr;
	__asm        add    eax, [ecx+8];
	__asm        mov    v1, eax;
// LINE 621:
	__asm        movsx  eax, filefacehdr.NVerts;
	__asm        movsx  eax, word ptr [ebp+eax*2-0x13A];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, ObjectPtr;
	__asm        add    eax, [ecx+8];
	__asm        mov    vlst, eax;
// LINE 622:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        push   eax;
	__asm        mov    eax, vlst;
	__asm        push   eax;
	__asm        mov    eax, v1;
	__asm        push   eax;
	__asm        mov    eax, v0;
	__asm        push   eax;
	__asm        call   FaceCalcNormal;
	__asm        add    esp, 0x10;
// LINE 627:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax], 0;
	__asm        jne    _T4af;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0;
	__asm        jne    _T4af;
// LINE 629:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x10000000;
// LINE 630:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0x1D8], eax;
	__asm        fild   dword ptr [ebp-0x1D8];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fcomp  qword ptr ds:[0x592468];
	__asm        fnstsw ax;
	__asm        test   ah, 0x41;
	__asm        jne    _T4aa;
// LINE 631:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x20000000;
// LINE 633:
_T4aa:
	__asm        jmp    _T581;
_T4af:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax], 0;
	__asm        jne    _T513;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+8], 0;
	__asm        jne    _T513;
// LINE 635:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x8000000;
// LINE 636:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0x1DC], eax;
	__asm        fild   dword ptr [ebp-0x1DC];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fcomp  qword ptr ds:[0x592468];
	__asm        fnstsw ax;
	__asm        test   ah, 0x41;
	__asm        jne    _T50e;
// LINE 637:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x20000000;
// LINE 639:
_T50e:
	__asm        jmp    _T581;
_T513:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0;
	__asm        jne    _T577;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+8], 0;
	__asm        jne    _T577;
// LINE 641:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x4000000;
// LINE 642:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x1E0], eax;
	__asm        fild   dword ptr [ebp-0x1E0];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fcomp  qword ptr ds:[0x592468];
	__asm        fnstsw ax;
	__asm        test   ah, 0x41;
	__asm        jne    _T572;
// LINE 643:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x20000000;
// LINE 645:
_T572:
	__asm        jmp    _T581;
// LINE 646:
_T577:
	__asm        mov    eax, faceptr;
	__asm        or     dword ptr [eax+8], 0x40000000;
// LINE 648:
_T581:
	__asm        mov    eax, v0;
	__asm        mov    ecx, faceptr;
	__asm        mov    ecx, [ecx+0x2C];
	__asm        mov    [ecx+0xC], eax;
// LINE 650:
	__asm        mov    eax, dataptr;
	__asm        mov    ecx, faceptr;
	__asm        mov    [ecx], eax;
// LINE 651:
	__asm        test   reinterpret_cast<uint8_t>(fileobjhdr.Attrib), 1;
	__asm        je     _T5ba;
// LINE 652:
	__asm        mov    eax, faceptr;
	__asm        mov    ecx, x;
	__asm        mov    edx, FaceArray;
	__asm        mov    [edx+ecx*4], eax;
// LINE 653:
_T5ba:
	__asm        jmp    _T18d;
// LINE 658:
_T5bf:
	__asm        test   reinterpret_cast<uint8_t>(fileobjhdr.Attrib), 1;
	__asm        je     _T62f;
// LINE 659:
	__asm        mov    eax, dataptr;
	__asm        mov    Tree, eax;
// LINE 662:
	__asm        push   0xA;
	__asm        lea    eax, treehdr.Id[0];
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        jne    _T602;
// LINE 664:
	__asm        mov    eax, ScratchPoolIndex;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 665:
	__asm        xor    eax, eax;
	__asm        jmp    _T6b8;
// LINE 687:
_T602:
	__asm        mov    BSPIndex, 0;
// LINE 688:
	__asm        call   ReadTree;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+0x34], eax;
// LINE 689:
	__asm        movsx  eax, treehdr.NNodes;
	__asm        mov    ecx, eax;
	__asm        shl    eax, 3;
	__asm        sub    eax, ecx;
	__asm        shl    eax, 2;
	__asm        add    dataptr, eax;
// LINE 691:
	__asm        jmp    _T639;
_T62f:
	__asm        mov    eax, ObjectPtr;
	__asm        mov    dword ptr [eax+0x34], 0;
// LINE 693:
_T639:
	__asm        mov    eax, ScratchPoolIndex;
	__asm        push   eax;
	__asm        call   S2AllocReset;
	__asm        add    esp, 4;
// LINE 694:
	__asm        mov    FaceArray, 0;
// LINE 700:
	__asm        mov    eax, VertCount;
	__asm        mov    ecx, ObjectPtr;
	__asm        mov    [ecx+0x14], eax;
// LINE 701:
	__asm        xor    eax, eax;
	__asm        mov    ecx, dataptr;
	__asm        sub    ecx, ObjData;
	__asm        sub    eax, ecx;
	__asm        neg    eax;
	__asm        sub    ObjDataSize, eax;
// LINE 702:
	__asm        mov    eax, dataptr;
	__asm        mov    ObjData, eax;
// LINE 703:
	__asm        mov    eax, ObjectPtr;
	__asm        test   byte ptr [eax], 2;
	__asm        je     _T698;

	__asm        mov    eax, ObjectPtr;
	__asm        push   eax;
	__asm        call   NormalizeObj;
	__asm        add    esp, 4;
// LINE 706:
_T698:
	__asm        cmp    uses_gouraud, 1;
	__asm        jne    _T6ae;
// LINE 707:
	__asm        mov    eax, ObjectPtr;
	__asm        push   eax;
	__asm        call   ObjCalcVnormsAndShade;
	__asm        add    esp, 4;
// LINE 709:
_T6ae:
	__asm        mov    eax, 1;
	__asm        jmp    _T6b8;
// LINE 711:
_T6b8:
}

// FUNCTION: COPTER_D 0x004d2ac6
int32_t VRGetDyObjAlt(int32_t obj, int32_t[4][4]* dymat, struct Point3d* loc, int32_t dim) {
	struct Point3d tloc;
	int32_t tmat[4][4];
	int32_t flags;

// LINE 733:
	__asm        mov    flags, 0;
// LINE 736:
	__asm        lea    eax, tmat[0][0];
	__asm        push   eax;
	__asm        mov    eax, dymat;
	__asm        push   eax;
	__asm        call   0x004D8C2E;
	__asm        add    esp, 8;
// LINE 739:
	__asm        lea    eax, tmat[0][0];
	__asm        push   eax;
	__asm        lea    eax, tloc.x;
	__asm        push   eax;
	__asm        mov    eax, loc;
	__asm        push   eax;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 743:
	__asm        push   0;
	__asm        push   0;
	__asm        mov    eax, dim;
	__asm        push   eax;
	__asm        lea    eax, flags;
	__asm        push   eax;
	__asm        mov    eax, tloc.z;
	__asm        push   eax;
	__asm        mov    eax, tloc.y;
	__asm        push   eax;
	__asm        mov    eax, tloc.x;
	__asm        push   eax;
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   VRGetObjAlt;
	__asm        add    esp, 0x20;
	__asm        jmp    near ptr 0x004D2B23;
// LINE 744:
}

// FUNCTION: COPTER_D 0x004d2b28
int32_t VRGetObjAlt(int32_t obj, int32_t x, int32_t y, int32_t z, int32_t * flags, int32_t dim, struct Point3d* collisvec, int32_t * landable) {
	char * dataptr;
	int32_t maxz;
	int32_t maxy;
	int32_t facealt;
	int32_t altyupbelow;
	int32_t maxx;
	int32_t overhang;
	int32_t minz;
	struct ObjectHdr* oh;
	int32_t j;
	int32_t miny;
	int32_t i;
	int32_t minx;
	int32_t altyupabove;
	int32_t scalar;
	int32_t planed;
	int32_t altydown;
	struct Point3d* vert;
	int32_t normaldir;
	int32_t * vertno;
	struct Point3d* vert2;
	struct _FaceHdr* faceptr;
	int32_t check_for_overhang;

// LINE 776:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 788:
	__asm        mov    overhang, 0;
// LINE 789:
	__asm        mov    check_for_overhang, 0;
// LINE 793:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x30];
	__asm        add    eax, eax;
	__asm        add    eax, 0x50000;
	__asm        cmp    eax, y;
	__asm        jge    _T41;
// LINE 794:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x30];
	__asm        sar    eax, 3;
	__asm        jmp    _T6ba;
// LINE 796:
_T41:
	__asm        mov    eax, flags;
	__asm        test   byte ptr [eax+1], 2;
	__asm        je     _T55;
// LINE 797:
	__asm        mov    check_for_overhang, 1;
// LINE 799:
_T55:
	__asm        cmp    landable, 0;
	__asm        je     _T68;
// LINE 800:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 803:
_T68:
	__asm        cmp    obj, 0;
	__asm        jne    _T79;
// LINE 804:
	__asm        xor    eax, eax;
	__asm        jmp    _T6ba;
// LINE 807:
_T79:
	__asm        mov    altydown, 0x75300000;
// LINE 808:
	__asm        mov    altyupabove, 0x75300000;
// LINE 809:
	__asm        mov    altyupbelow, 0;
// LINE 812:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 813:
	__asm        mov    i, 0;
	__asm        jmp    _Ta6;
_Ta3:
	__asm        inc    i;
_Ta6:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T656;
// LINE 816:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        je     _Tc7;
// LINE 817:
	__asm        jmp    _T551;
// LINE 819:
_Tc7:
	__asm        mov    eax, faceptr;
	__asm        test   dword ptr [eax+8], 0x18000;
	__asm        je     _Tdc;
// LINE 820:
	__asm        jmp    _T544;
// LINE 823:
_Tdc:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0xFFFFFF9C;
	__asm        jge    _Tf8;
// LINE 824:
	__asm        mov    normaldir, 1;
// LINE 825:
	__asm        jmp    _T12d;
_Tf8:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0x64;
	__asm        jle    _T128;
// LINE 826:
	__asm        cmp    check_for_overhang, 0;
	__asm        jne    _T11c;
// LINE 827:
	__asm        jmp    _T544;
// LINE 828:
	__asm        jmp    _T123;
// LINE 829:
_T11c:
	__asm        mov    normaldir, 0xFFFFFFFF;
// LINE 830:
_T123:
	__asm        jmp    _T12d;
// LINE 831:
_T128:
	__asm        jmp    _T544;
// LINE 834:
_T12d:
	__asm        mov    eax, faceptr;
	__asm        mov    dataptr, eax;
// LINE 835:
	__asm        add    dataptr, 0x30;
// LINE 836:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    vertno, eax;
// LINE 839:
	__asm        mov    minz, 0x75300000;
	__asm        mov    eax, minz;
	__asm        mov    miny, eax;
	__asm        mov    eax, miny;
	__asm        mov    minx, eax;
// LINE 840:
	__asm        mov    maxz, 0x8AD00000;
	__asm        mov    eax, maxz;
	__asm        mov    maxy, eax;
	__asm        mov    eax, maxy;
	__asm        mov    maxx, eax;
// LINE 845:
	__asm        mov    j, 0;
	__asm        jmp    _T175;
_T172:
	__asm        inc    j;
_T175:
	__asm        mov    eax, faceptr;
	__asm        mov    ecx, j;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T230;
// LINE 851:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert, eax;
// LINE 855:
	__asm        add    vertno, 4;
// LINE 858:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minx;
	__asm        cmp    [eax], ecx;
	__asm        jge    _T1b5;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    minx, eax;
// LINE 859:
_T1b5:
	__asm        mov    eax, vert;
	__asm        mov    ecx, miny;
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T1cd;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    miny, eax;
// LINE 860:
_T1cd:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minz;
	__asm        cmp    [eax+8], ecx;
	__asm        jge    _T1e5;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    minz, eax;
// LINE 861:
_T1e5:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxx;
	__asm        cmp    [eax], ecx;
	__asm        jle    _T1fb;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    maxx, eax;
// LINE 862:
_T1fb:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxy;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T213;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    maxy, eax;
// LINE 863:
_T213:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxz;
	__asm        cmp    [eax+8], ecx;
	__asm        jle    _T22b;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    maxz, eax;
// LINE 864:
_T22b:
	__asm        jmp    _T172;
// LINE 868:
_T230:
	__asm        mov    eax, dim;
	__asm        add    eax, x;
	__asm        cmp    eax, minx;
	__asm        jl     _T544;

	__asm        mov    eax, x;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxx;
	__asm        jg     _T544;

	__asm        mov    eax, dim;
	__asm        add    eax, z;
	__asm        cmp    eax, minz;
	__asm        jl     _T544;

	__asm        mov    eax, z;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxz;
	__asm        jg     _T544;
// LINE 877:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    planed, ebx;
// LINE 883:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    scalar, ebx;
// LINE 888:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, planed;
	__asm        sub    eax, scalar;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    facealt, eax;
// LINE 890:
	__asm        mov    eax, maxy;
	__asm        cmp    facealt, eax;
	__asm        jg     _T324;

	__asm        mov    eax, miny;
	__asm        cmp    facealt, eax;
	__asm        jge    _T330;
// LINE 891:
_T324:
	__asm        mov    eax, maxy;
	__asm        add    eax, miny;
	__asm        sar    eax, 1;
	__asm        mov    facealt, eax;
// LINE 893:
_T330:
	__asm        cmp    check_for_overhang, 0;
	__asm        jne    _T40b;
// LINE 895:
	__asm        mov    eax, facealt;
	__asm        cmp    altyupbelow, eax;
	__asm        jge    _T406;
// LINE 897:
	__asm        mov    eax, facealt;
	__asm        mov    altyupbelow, eax;
// LINE 898:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    ecx, flags;
	__asm        mov    [ecx], eax;
// LINE 902:
	__asm        cmp    collisvec, 0;
	__asm        je     _T38e;
// LINE 904:
	__asm        mov    eax, minx;
	__asm        add    eax, maxx;
	__asm        sar    eax, 1;
	__asm        sub    eax, x;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 905:
	__asm        mov    eax, maxz;
	__asm        add    eax, minz;
	__asm        sar    eax, 1;
	__asm        sub    eax, z;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 906:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 912:
_T38e:
	__asm        cmp    landable, 0;
	__asm        je     _T406;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0xFFFF15A0;
	__asm        jge    _T406;
// LINE 915:
	__asm        mov    eax, x;
	__asm        sub    eax, 0x20000;
	__asm        cmp    eax, minx;
	__asm        jl     _T3fd;

	__asm        mov    eax, x;
	__asm        add    eax, 0x20000;
	__asm        cmp    eax, maxx;
	__asm        jg     _T3fd;

	__asm        mov    eax, z;
	__asm        sub    eax, 0x20000;
	__asm        cmp    eax, minz;
	__asm        jl     _T3fd;

	__asm        mov    eax, z;
	__asm        add    eax, 0x20000;
	__asm        cmp    eax, maxz;
	__asm        jg     _T3fd;
// LINE 917:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 1;
// LINE 919:
	__asm        jmp    _T406;
// LINE 921:
_T3fd:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 925:
_T406:
	__asm        jmp    _T544;
// LINE 929:
_T40b:
	__asm        cmp    normaldir, 0;
	__asm        jle    _T515;
// LINE 932:
	__asm        mov    eax, y;
	__asm        cmp    facealt, eax;
	__asm        jge    _T4f2;

	__asm        mov    eax, facealt;
	__asm        cmp    altyupbelow, eax;
	__asm        jge    _T4f2;
// LINE 934:
	__asm        mov    eax, facealt;
	__asm        mov    altyupbelow, eax;
// LINE 937:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    ecx, flags;
	__asm        mov    [ecx], eax;
// LINE 941:
	__asm        cmp    collisvec, 0;
	__asm        je     _T475;
// LINE 943:
	__asm        mov    eax, minx;
	__asm        add    eax, maxx;
	__asm        sar    eax, 1;
	__asm        sub    eax, x;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 944:
	__asm        mov    eax, maxz;
	__asm        add    eax, minz;
	__asm        sar    eax, 1;
	__asm        sub    eax, z;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 945:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 950:
_T475:
	__asm        cmp    landable, 0;
	__asm        je     _T4ed;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0xFFFF15A0;
	__asm        jge    _T4ed;
// LINE 953:
	__asm        mov    eax, x;
	__asm        sub    eax, 0x10000;
	__asm        cmp    eax, minx;
	__asm        jl     _T4e4;

	__asm        mov    eax, x;
	__asm        add    eax, 0x10000;
	__asm        cmp    eax, maxx;
	__asm        jg     _T4e4;

	__asm        mov    eax, z;
	__asm        sub    eax, 0x10000;
	__asm        cmp    eax, minz;
	__asm        jl     _T4e4;

	__asm        mov    eax, z;
	__asm        add    eax, 0x10000;
	__asm        cmp    eax, maxz;
	__asm        jg     _T4e4;
// LINE 955:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 1;
// LINE 957:
	__asm        jmp    _T4ed;
// LINE 959:
_T4e4:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 964:
_T4ed:
	__asm        jmp    _T510;
_T4f2:
	__asm        mov    eax, y;
	__asm        cmp    facealt, eax;
	__asm        jl     _T510;

	__asm        mov    eax, altyupabove;
	__asm        cmp    facealt, eax;
	__asm        jge    _T510;
// LINE 966:
	__asm        mov    eax, facealt;
	__asm        mov    altyupabove, eax;
// LINE 971:
_T510:
	__asm        jmp    _T544;
// LINE 978:
_T515:
	__asm        mov    eax, y;
	__asm        add    eax, 0xA0000;
	__asm        cmp    eax, facealt;
	__asm        jle    _T52b;
// LINE 979:
	__asm        jmp    _T544;
// LINE 981:
_T52b:
	__asm        mov    overhang, 1;
// LINE 984:
	__asm        mov    eax, facealt;
	__asm        cmp    altydown, eax;
	__asm        jle    _T544;
// LINE 986:
	__asm        mov    eax, facealt;
	__asm        mov    altydown, eax;
// LINE 994:
next_face:
_T544:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 995:
	__asm        jmp    _Ta3;
// LINE 1003:
do_2d_face:
_T551:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    vertno, eax;
// LINE 1005:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert, eax;
// LINE 1010:
	__asm        add    vertno, 4;
// LINE 1012:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert2, eax;
// LINE 1021:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        sub    eax, 0x40000;
	__asm        mov    ecx, dim;
	__asm        add    ecx, x;
	__asm        cmp    eax, ecx;
	__asm        jg     _T649;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        add    eax, 0x40000;
	__asm        mov    ecx, x;
	__asm        sub    ecx, dim;
	__asm        cmp    eax, ecx;
	__asm        jl     _T649;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        sub    eax, 0x40000;
	__asm        mov    ecx, dim;
	__asm        add    ecx, z;
	__asm        cmp    eax, ecx;
	__asm        jg     _T649;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        add    eax, 0x40000;
	__asm        mov    ecx, z;
	__asm        sub    ecx, dim;
	__asm        cmp    eax, ecx;
	__asm        jl     _T649;
// LINE 1023:
	__asm        mov    eax, vert2;
	__asm        mov    ecx, altyupbelow;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T649;
// LINE 1025:
	__asm        mov    eax, vert2;
	__asm        mov    eax, [eax+4];
	__asm        mov    altyupbelow, eax;
// LINE 1027:
	__asm        cmp    landable, 0;
	__asm        je     _T619;
// LINE 1029:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 1032:
_T619:
	__asm        cmp    collisvec, 0;
	__asm        je     _T649;
// LINE 1034:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        sub    eax, x;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 1035:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        sub    eax, z;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 1036:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 1042:
_T649:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 1044:
	__asm        jmp    _Ta3;
// LINE 1046:
_T656:
	__asm        cmp    check_for_overhang, 0;
	__asm        jne    _T668;
// LINE 1048:
	__asm        mov    eax, altyupbelow;
	__asm        jmp    _T6ba;
// LINE 1053:
_T668:
	__asm        cmp    overhang, 1;
	__asm        jne    _T698;
// LINE 1055:
	__asm        mov    eax, altyupabove;
	__asm        cmp    altydown, eax;
	__asm        jle    _T68b;
// LINE 1056:
	__asm        mov    eax, altyupabove;
	__asm        jmp    _T6ba;
// LINE 1057:
	__asm        jmp    _T693;
// LINE 1058:
_T68b:
	__asm        mov    eax, altyupbelow;
	__asm        jmp    _T6ba;
// LINE 1060:
_T693:
	__asm        jmp    _T6ba;
// LINE 1062:
_T698:
	__asm        cmp    altyupabove, 0x75300000;
	__asm        je     _T6b2;
// LINE 1063:
	__asm        mov    eax, altyupabove;
	__asm        jmp    _T6ba;
// LINE 1064:
	__asm        jmp    _T6ba;
// LINE 1065:
_T6b2:
	__asm        mov    eax, altyupbelow;
	__asm        jmp    _T6ba;
// LINE 1067:
_T6ba:
}

// FUNCTION: COPTER_D 0x004d31e7
int32_t VRGetObjAlt2(int32_t obj, int32_t x, int32_t y, int32_t z, int32_t * flags, int32_t dim, int32_t ydim, struct Point3d* collisvec, int32_t * landable) {
	char * dataptr;
	int32_t maxz;
	int32_t maxy;
	int32_t facealt;
	int32_t altyupbelow;
	int32_t maxx;
	int32_t overhang;
	int32_t minz;
	struct ObjectHdr* oh;
	int32_t j;
	int32_t miny;
	int32_t i;
	int32_t minx;
	int32_t altyupabove;
	int32_t scalar;
	int32_t planed;
	int32_t altydown;
	struct Point3d* vert;
	int32_t normaldir;
	int32_t * vertno;
	struct Point3d* vert2;
	struct _FaceHdr* faceptr;
	int32_t check_for_overhang;

// LINE 1088:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1100:
	__asm        mov    overhang, 0;
// LINE 1101:
	__asm        mov    check_for_overhang, 0;
// LINE 1105:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x30];
	__asm        add    eax, eax;
	__asm        add    eax, 0x50000;
	__asm        cmp    eax, y;
	__asm        jge    _T41;
// LINE 1106:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x30];
	__asm        sar    eax, 3;
	__asm        jmp    _T743;
// LINE 1108:
_T41:
	__asm        mov    eax, flags;
	__asm        test   byte ptr [eax+1], 2;
	__asm        je     _T55;
// LINE 1109:
	__asm        mov    check_for_overhang, 1;
// LINE 1111:
_T55:
	__asm        cmp    landable, 0;
	__asm        je     _T68;
// LINE 1112:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 1115:
_T68:
	__asm        cmp    obj, 0;
	__asm        jne    _T79;
// LINE 1116:
	__asm        xor    eax, eax;
	__asm        jmp    _T743;
// LINE 1119:
_T79:
	__asm        mov    altydown, 0x75300000;
// LINE 1120:
	__asm        mov    altyupabove, 0x75300000;
// LINE 1121:
	__asm        mov    altyupbelow, 0;
// LINE 1124:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 1125:
	__asm        mov    i, 0;
	__asm        jmp    _Ta6;
_Ta3:
	__asm        inc    i;
_Ta6:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T6df;
// LINE 1128:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        je     _Tc7;
// LINE 1129:
	__asm        jmp    _T5da;
// LINE 1131:
_Tc7:
	__asm        mov    eax, faceptr;
	__asm        test   dword ptr [eax+8], 0x18004;
	__asm        je     _Tdc;
// LINE 1132:
	__asm        jmp    _T5cd;
// LINE 1135:
_Tdc:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0xFFFFFF9C;
	__asm        jge    _Tf8;
// LINE 1137:
	__asm        mov    normaldir, 1;
// LINE 1139:
	__asm        jmp    _T143;
_Tf8:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0x64;
	__asm        jle    _T128;
// LINE 1141:
	__asm        cmp    check_for_overhang, 0;
	__asm        jne    _T11c;
// LINE 1142:
	__asm        jmp    _T5cd;
// LINE 1143:
	__asm        jmp    _T123;
// LINE 1144:
_T11c:
	__asm        mov    normaldir, 0xFFFFFFFF;
// LINE 1146:
_T123:
	__asm        jmp    _T143;
// LINE 1149:
_T128:
	__asm        cmp    check_for_overhang, 1;
	__asm        jne    _T13e;
// LINE 1150:
	__asm        mov    normaldir, 0;
// LINE 1151:
	__asm        jmp    _T143;
// LINE 1152:
_T13e:
	__asm        jmp    _T5cd;
// LINE 1156:
_T143:
	__asm        mov    eax, faceptr;
	__asm        mov    dataptr, eax;
// LINE 1157:
	__asm        add    dataptr, 0x30;
// LINE 1158:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    vertno, eax;
// LINE 1161:
	__asm        mov    minz, 0x75300000;
	__asm        mov    eax, minz;
	__asm        mov    miny, eax;
	__asm        mov    eax, miny;
	__asm        mov    minx, eax;
// LINE 1162:
	__asm        mov    maxz, 0x8AD00000;
	__asm        mov    eax, maxz;
	__asm        mov    maxy, eax;
	__asm        mov    eax, maxy;
	__asm        mov    maxx, eax;
// LINE 1167:
	__asm        mov    j, 0;
	__asm        jmp    _T18b;
_T188:
	__asm        inc    j;
_T18b:
	__asm        mov    eax, faceptr;
	__asm        mov    ecx, j;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T246;
// LINE 1173:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert, eax;
// LINE 1177:
	__asm        add    vertno, 4;
// LINE 1180:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minx;
	__asm        cmp    [eax], ecx;
	__asm        jge    _T1cb;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    minx, eax;
// LINE 1181:
_T1cb:
	__asm        mov    eax, vert;
	__asm        mov    ecx, miny;
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T1e3;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    miny, eax;
// LINE 1182:
_T1e3:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minz;
	__asm        cmp    [eax+8], ecx;
	__asm        jge    _T1fb;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    minz, eax;
// LINE 1183:
_T1fb:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxx;
	__asm        cmp    [eax], ecx;
	__asm        jle    _T211;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    maxx, eax;
// LINE 1184:
_T211:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxy;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T229;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    maxy, eax;
// LINE 1185:
_T229:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxz;
	__asm        cmp    [eax+8], ecx;
	__asm        jle    _T241;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    maxz, eax;
// LINE 1186:
_T241:
	__asm        jmp    _T188;
// LINE 1190:
_T246:
	__asm        mov    eax, dim;
	__asm        add    eax, x;
	__asm        cmp    eax, minx;
	__asm        jl     _T5cd;

	__asm        mov    eax, x;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxx;
	__asm        jg     _T5cd;

	__asm        mov    eax, dim;
	__asm        add    eax, z;
	__asm        cmp    eax, minz;
	__asm        jl     _T5cd;

	__asm        mov    eax, z;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxz;
	__asm        jg     _T5cd;
// LINE 1195:
	__asm        cmp    normaldir, 0;
	__asm        je     _T355;
// LINE 1201:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    planed, ebx;
// LINE 1207:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    scalar, ebx;
// LINE 1212:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, planed;
	__asm        sub    eax, scalar;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    facealt, eax;
// LINE 1214:
	__asm        mov    eax, maxy;
	__asm        cmp    facealt, eax;
	__asm        jg     _T344;

	__asm        mov    eax, miny;
	__asm        cmp    facealt, eax;
	__asm        jge    _T350;
// LINE 1215:
_T344:
	__asm        mov    eax, maxy;
	__asm        add    eax, miny;
	__asm        sar    eax, 1;
	__asm        mov    facealt, eax;
// LINE 1217:
_T350:
	__asm        jmp    _T386;
// LINE 1220:
_T355:
	__asm        mov    eax, ydim;
	__asm        add    eax, y;
	__asm        cmp    eax, miny;
	__asm        jle    _T381;

	__asm        mov    eax, y;
	__asm        cmp    maxy, eax;
	__asm        jle    _T381;
// LINE 1221:
	__asm        mov    eax, maxy;
	__asm        add    eax, y;
	__asm        sar    eax, 1;
	__asm        mov    facealt, eax;
// LINE 1222:
	__asm        jmp    _T386;
// LINE 1223:
_T381:
	__asm        jmp    _T5cd;
// LINE 1226:
_T386:
	__asm        cmp    check_for_overhang, 0;
	__asm        jne    _T461;
// LINE 1228:
	__asm        mov    eax, facealt;
	__asm        cmp    altyupbelow, eax;
	__asm        jge    _T45c;
// LINE 1230:
	__asm        mov    eax, facealt;
	__asm        mov    altyupbelow, eax;
// LINE 1231:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    ecx, flags;
	__asm        mov    [ecx], eax;
// LINE 1235:
	__asm        cmp    collisvec, 0;
	__asm        je     _T3e4;
// LINE 1237:
	__asm        mov    eax, maxx;
	__asm        add    eax, minx;
	__asm        sar    eax, 1;
	__asm        sub    eax, x;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 1238:
	__asm        mov    eax, maxz;
	__asm        add    eax, minz;
	__asm        sar    eax, 1;
	__asm        sub    eax, z;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 1239:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 1245:
_T3e4:
	__asm        cmp    landable, 0;
	__asm        je     _T45c;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0xFFFF15A0;
	__asm        jge    _T45c;
// LINE 1248:
	__asm        mov    eax, x;
	__asm        sub    eax, 0x20000;
	__asm        cmp    eax, minx;
	__asm        jl     _T453;

	__asm        mov    eax, x;
	__asm        add    eax, 0x20000;
	__asm        cmp    eax, maxx;
	__asm        jg     _T453;

	__asm        mov    eax, z;
	__asm        sub    eax, 0x20000;
	__asm        cmp    eax, minz;
	__asm        jl     _T453;

	__asm        mov    eax, z;
	__asm        add    eax, 0x20000;
	__asm        cmp    eax, maxz;
	__asm        jg     _T453;
// LINE 1250:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 1;
// LINE 1252:
	__asm        jmp    _T45c;
// LINE 1254:
_T453:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 1258:
_T45c:
	__asm        jmp    _T5cd;
// LINE 1262:
_T461:
	__asm        cmp    normaldir, 0;
	__asm        jl     _T5a0;
// LINE 1265:
	__asm        mov    eax, y;
	__asm        cmp    facealt, eax;
	__asm        jge    _T57d;

	__asm        mov    eax, facealt;
	__asm        cmp    altyupbelow, eax;
	__asm        jge    _T57d;
// LINE 1267:
	__asm        mov    eax, facealt;
	__asm        mov    altyupbelow, eax;
// LINE 1270:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    ecx, flags;
	__asm        mov    [ecx], eax;
// LINE 1274:
	__asm        cmp    collisvec, 0;
	__asm        je     _T500;
// LINE 1276:
	__asm        cmp    normaldir, 0;
	__asm        jle    _T4da;
// LINE 1278:
	__asm        mov    eax, maxx;
	__asm        add    eax, minx;
	__asm        sar    eax, 1;
	__asm        sub    eax, x;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 1279:
	__asm        mov    eax, maxz;
	__asm        add    eax, minz;
	__asm        sar    eax, 1;
	__asm        sub    eax, z;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 1280:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 1282:
	__asm        jmp    _T500;
// LINE 1284:
_T4da:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 1285:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 1286:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 1292:
_T500:
	__asm        cmp    landable, 0;
	__asm        je     _T578;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+4], 0xFFFF15A0;
	__asm        jge    _T578;
// LINE 1295:
	__asm        mov    eax, x;
	__asm        sub    eax, 0x10000;
	__asm        cmp    eax, minx;
	__asm        jl     _T56f;

	__asm        mov    eax, x;
	__asm        add    eax, 0x10000;
	__asm        cmp    eax, maxx;
	__asm        jg     _T56f;

	__asm        mov    eax, z;
	__asm        sub    eax, 0x10000;
	__asm        cmp    eax, minz;
	__asm        jl     _T56f;

	__asm        mov    eax, z;
	__asm        add    eax, 0x10000;
	__asm        cmp    eax, maxz;
	__asm        jg     _T56f;
// LINE 1297:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 1;
// LINE 1299:
	__asm        jmp    _T578;
// LINE 1301:
_T56f:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 1306:
_T578:
	__asm        jmp    _T59b;
_T57d:
	__asm        mov    eax, y;
	__asm        cmp    facealt, eax;
	__asm        jl     _T59b;

	__asm        mov    eax, altyupabove;
	__asm        cmp    facealt, eax;
	__asm        jge    _T59b;
// LINE 1308:
	__asm        mov    eax, facealt;
	__asm        mov    altyupabove, eax;
// LINE 1313:
_T59b:
	__asm        jmp    _T5cd;
// LINE 1320:
_T5a0:
	__asm        mov    eax, ydim;
	__asm        add    eax, y;
	__asm        cmp    eax, facealt;
	__asm        jle    _T5b4;
// LINE 1321:
	__asm        jmp    _T5cd;
// LINE 1323:
_T5b4:
	__asm        mov    overhang, 1;
// LINE 1326:
	__asm        mov    eax, facealt;
	__asm        cmp    altydown, eax;
	__asm        jle    _T5cd;
// LINE 1328:
	__asm        mov    eax, facealt;
	__asm        mov    altydown, eax;
// LINE 1336:
next_face:
_T5cd:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 1337:
	__asm        jmp    _Ta3;
// LINE 1345:
do_2d_face:
_T5da:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    vertno, eax;
// LINE 1347:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert, eax;
// LINE 1352:
	__asm        add    vertno, 4;
// LINE 1354:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert2, eax;
// LINE 1363:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        sub    eax, 0x40000;
	__asm        mov    ecx, dim;
	__asm        add    ecx, x;
	__asm        cmp    eax, ecx;
	__asm        jg     _T6d2;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        add    eax, 0x40000;
	__asm        mov    ecx, x;
	__asm        sub    ecx, dim;
	__asm        cmp    eax, ecx;
	__asm        jl     _T6d2;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        sub    eax, 0x40000;
	__asm        mov    ecx, dim;
	__asm        add    ecx, z;
	__asm        cmp    eax, ecx;
	__asm        jg     _T6d2;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        add    eax, 0x40000;
	__asm        mov    ecx, z;
	__asm        sub    ecx, dim;
	__asm        cmp    eax, ecx;
	__asm        jl     _T6d2;
// LINE 1365:
	__asm        mov    eax, vert2;
	__asm        mov    ecx, altyupbelow;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T6d2;
// LINE 1367:
	__asm        mov    eax, vert2;
	__asm        mov    eax, [eax+4];
	__asm        mov    altyupbelow, eax;
// LINE 1369:
	__asm        cmp    landable, 0;
	__asm        je     _T6a2;
// LINE 1371:
	__asm        mov    eax, landable;
	__asm        mov    dword ptr [eax], 0;
// LINE 1374:
_T6a2:
	__asm        cmp    collisvec, 0;
	__asm        je     _T6d2;
// LINE 1376:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        sub    eax, x;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx], eax;
// LINE 1377:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        sub    eax, z;
	__asm        mov    ecx, collisvec;
	__asm        mov    [ecx+8], eax;
// LINE 1378:
	__asm        mov    eax, collisvec;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 1384:
_T6d2:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 1386:
	__asm        jmp    _Ta3;
// LINE 1388:
_T6df:
	__asm        cmp    check_for_overhang, 0;
	__asm        jne    _T6f1;
// LINE 1390:
	__asm        mov    eax, altyupbelow;
	__asm        jmp    _T743;
// LINE 1395:
_T6f1:
	__asm        cmp    overhang, 1;
	__asm        jne    _T721;
// LINE 1397:
	__asm        mov    eax, altyupabove;
	__asm        cmp    altydown, eax;
	__asm        jle    _T714;
// LINE 1398:
	__asm        mov    eax, altyupabove;
	__asm        jmp    _T743;
// LINE 1399:
	__asm        jmp    _T71c;
// LINE 1400:
_T714:
	__asm        mov    eax, altyupbelow;
	__asm        jmp    _T743;
// LINE 1402:
_T71c:
	__asm        jmp    _T743;
// LINE 1404:
_T721:
	__asm        cmp    altyupabove, 0x75300000;
	__asm        je     _T73b;
// LINE 1405:
	__asm        mov    eax, altyupabove;
	__asm        jmp    _T743;
// LINE 1406:
	__asm        jmp    _T743;
// LINE 1407:
_T73b:
	__asm        mov    eax, altyupbelow;
	__asm        jmp    _T743;
// LINE 1409:
_T743:
}

// FUNCTION: COPTER_D 0x004d392f
int32_t VRGetObjZdist(int32_t obj, int32_t x, int32_t y, int32_t dir, int32_t dim) {
	char * dataptr;
	int32_t maxz;
	int32_t maxy;
	int32_t distz;
	int32_t maxx;
	int32_t minz;
	struct ObjectHdr* oh;
	int32_t j;
	int32_t miny;
	int32_t i;
	int32_t minx;
	int32_t facez;
	struct Point3d* vert;
	int32_t * vertno;
	struct _FaceHdr* faceptr;

// LINE 1424:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1435:
	__asm        cmp    obj, 0;
	__asm        jne    _T20;
// LINE 1436:
	__asm        xor    eax, eax;
	__asm        jmp    _T20f;
// LINE 1439:
_T20:
	__asm        mov    distz, 0;
// LINE 1442:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 1443:
	__asm        mov    i, 0;
	__asm        jmp    _T3f;
_T3c:
	__asm        inc    i;
_T3f:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T207;
// LINE 1446:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        je     _T60;

	__asm        jmp    _T1fa;
// LINE 1449:
_T60:
	__asm        cmp    dir, 0;
	__asm        jge    _T82;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+8], 0xFFFFD8F0;
	__asm        jle    _T82;
// LINE 1450:
	__asm        jmp    _T1fa;
// LINE 1451:
_T82:
	__asm        cmp    dir, 0;
	__asm        jle    _Ta4;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax+8], 0x2710;
	__asm        jge    _Ta4;
// LINE 1452:
	__asm        jmp    _T1fa;
// LINE 1455:
_Ta4:
	__asm        mov    eax, faceptr;
	__asm        mov    dataptr, eax;
// LINE 1456:
	__asm        add    dataptr, 0x30;
// LINE 1457:
	__asm        mov    eax, dataptr;
	__asm        mov    vertno, eax;
// LINE 1460:
	__asm        mov    minz, 0x75300000;
	__asm        mov    eax, minz;
	__asm        mov    miny, eax;
	__asm        mov    eax, miny;
	__asm        mov    minx, eax;
// LINE 1461:
	__asm        mov    maxz, 0x8AD00000;
	__asm        mov    eax, maxz;
	__asm        mov    maxy, eax;
	__asm        mov    eax, maxy;
	__asm        mov    maxx, eax;
// LINE 1466:
	__asm        mov    j, 0;
	__asm        jmp    _Te9;
_Te6:
	__asm        inc    j;
_Te9:
	__asm        mov    eax, faceptr;
	__asm        mov    ecx, j;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T1a4;
// LINE 1472:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert, eax;
// LINE 1476:
	__asm        add    vertno, 4;
// LINE 1479:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minx;
	__asm        cmp    [eax], ecx;
	__asm        jge    _T129;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    minx, eax;
// LINE 1480:
_T129:
	__asm        mov    eax, vert;
	__asm        mov    ecx, miny;
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T141;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    miny, eax;
// LINE 1481:
_T141:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minz;
	__asm        cmp    [eax+8], ecx;
	__asm        jge    _T159;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    minz, eax;
// LINE 1482:
_T159:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxx;
	__asm        cmp    [eax], ecx;
	__asm        jle    _T16f;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    maxx, eax;
// LINE 1483:
_T16f:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxy;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T187;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    maxy, eax;
// LINE 1484:
_T187:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxz;
	__asm        cmp    [eax+8], ecx;
	__asm        jle    _T19f;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    maxz, eax;
// LINE 1485:
_T19f:
	__asm        jmp    _Te6;
// LINE 1489:
_T1a4:
	__asm        mov    eax, dim;
	__asm        add    eax, y;
	__asm        cmp    eax, miny;
	__asm        jl     _T1fa;

	__asm        mov    eax, y;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxy;
	__asm        jg     _T1fa;

	__asm        mov    eax, x;
	__asm        add    eax, dim;
	__asm        cmp    eax, minx;
	__asm        jl     _T1fa;

	__asm        mov    eax, x;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxx;
	__asm        jg     _T1fa;
// LINE 1492:
	__asm        mov    eax, maxz;
	__asm        add    eax, minz;
	__asm        sar    eax, 1;
	__asm        mov    facez, eax;
// LINE 1493:
	__asm        mov    eax, facez;
	__asm        mov    distz, eax;
// LINE 1494:
	__asm        mov    eax, distz;
	__asm        jmp    _T20f;
// LINE 1506:
next_face:
_T1fa:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 1507:
	__asm        jmp    _T3c;
// LINE 1509:
_T207:
	__asm        mov    eax, distz;
	__asm        jmp    _T20f;
// LINE 1511:
_T20f:
}

// FUNCTION: COPTER_D 0x004d3b43
int32_t VRGetObjXdist(int32_t obj, int32_t y, int32_t z, int32_t dir, int32_t dim) {
	char * dataptr;
	int32_t maxz;
	int32_t maxy;
	int32_t maxx;
	int32_t minz;
	int32_t distx;
	struct ObjectHdr* oh;
	int32_t j;
	int32_t miny;
	int32_t i;
	int32_t minx;
	struct Point3d* vert;
	int32_t facex;
	int32_t * vertno;
	struct _FaceHdr* faceptr;

// LINE 1526:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1537:
	__asm        cmp    obj, 0;
	__asm        jne    _T20;
// LINE 1538:
	__asm        xor    eax, eax;
	__asm        jmp    _T20d;
// LINE 1541:
_T20:
	__asm        mov    distx, 0;
// LINE 1544:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 1545:
	__asm        mov    i, 0;
	__asm        jmp    _T3f;
_T3c:
	__asm        inc    i;
_T3f:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T205;
// LINE 1548:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        je     _T60;

	__asm        jmp    _T1f8;
// LINE 1551:
_T60:
	__asm        cmp    dir, 0;
	__asm        jge    _T81;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax], 0xFFFFD8F0;
	__asm        jle    _T81;
// LINE 1552:
	__asm        jmp    _T1f8;
// LINE 1553:
_T81:
	__asm        cmp    dir, 0;
	__asm        jle    _Ta2;

	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax+0x2C];
	__asm        cmp    dword ptr [eax], 0x2710;
	__asm        jge    _Ta2;
// LINE 1554:
	__asm        jmp    _T1f8;
// LINE 1557:
_Ta2:
	__asm        mov    eax, faceptr;
	__asm        mov    dataptr, eax;
// LINE 1558:
	__asm        add    dataptr, 0x30;
// LINE 1559:
	__asm        mov    eax, dataptr;
	__asm        mov    vertno, eax;
// LINE 1562:
	__asm        mov    minz, 0x75300000;
	__asm        mov    eax, minz;
	__asm        mov    miny, eax;
	__asm        mov    eax, miny;
	__asm        mov    minx, eax;
// LINE 1563:
	__asm        mov    maxz, 0x8AD00000;
	__asm        mov    eax, maxz;
	__asm        mov    maxy, eax;
	__asm        mov    eax, maxy;
	__asm        mov    maxx, eax;
// LINE 1568:
	__asm        mov    j, 0;
	__asm        jmp    _Te7;
_Te4:
	__asm        inc    j;
_Te7:
	__asm        mov    eax, faceptr;
	__asm        mov    ecx, j;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T1a2;
// LINE 1574:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert, eax;
// LINE 1578:
	__asm        add    vertno, 4;
// LINE 1581:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minx;
	__asm        cmp    [eax], ecx;
	__asm        jge    _T127;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    minx, eax;
// LINE 1582:
_T127:
	__asm        mov    eax, vert;
	__asm        mov    ecx, miny;
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T13f;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    miny, eax;
// LINE 1583:
_T13f:
	__asm        mov    eax, vert;
	__asm        mov    ecx, minz;
	__asm        cmp    [eax+8], ecx;
	__asm        jge    _T157;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    minz, eax;
// LINE 1584:
_T157:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxx;
	__asm        cmp    [eax], ecx;
	__asm        jle    _T16d;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    maxx, eax;
// LINE 1585:
_T16d:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxy;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T185;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    maxy, eax;
// LINE 1586:
_T185:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxz;
	__asm        cmp    [eax+8], ecx;
	__asm        jle    _T19d;

	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    maxz, eax;
// LINE 1587:
_T19d:
	__asm        jmp    _Te4;
// LINE 1591:
_T1a2:
	__asm        mov    eax, dim;
	__asm        add    eax, y;
	__asm        cmp    eax, miny;
	__asm        jl     _T1f8;

	__asm        mov    eax, y;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxy;
	__asm        jg     _T1f8;

	__asm        mov    eax, dim;
	__asm        add    eax, z;
	__asm        cmp    eax, minz;
	__asm        jl     _T1f8;

	__asm        mov    eax, z;
	__asm        sub    eax, dim;
	__asm        cmp    eax, maxz;
	__asm        jg     _T1f8;
// LINE 1594:
	__asm        mov    eax, minx;
	__asm        add    eax, maxx;
	__asm        sar    eax, 1;
	__asm        mov    facex, eax;
// LINE 1595:
	__asm        mov    eax, facex;
	__asm        mov    distx, eax;
// LINE 1596:
	__asm        mov    eax, distx;
	__asm        jmp    _T20d;
// LINE 1608:
next_face:
_T1f8:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 1609:
	__asm        jmp    _T3c;
// LINE 1611:
_T205:
	__asm        mov    eax, distx;
	__asm        jmp    _T20d;
// LINE 1613:
_T20d:
}

// FUNCTION: COPTER_D 0x004d3d55
void VRObjResize2dFace(int32_t obj, int32_t width, int32_t height) {
	char * dataptr;
	struct ObjectHdr* oh;
	int32_t i;
	int32_t * vertno;
	struct Point3d* vert2;
	struct _FaceHdr* faceptr;
	struct Point3d* vert1;

// LINE 1630:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1637:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 1639:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 1640:
	__asm        mov    i, 0;
	__asm        jmp    _T30;
_T2d:
	__asm        inc    i;
_T30:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _Tca;
// LINE 1642:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        jne    _T51;
// LINE 1643:
	__asm        jmp    _Tbd;
// LINE 1646:
_T51:
	__asm        mov    eax, faceptr;
	__asm        mov    dataptr, eax;
// LINE 1647:
	__asm        add    dataptr, 0x30;
// LINE 1650:
	__asm        mov    eax, dataptr;
	__asm        mov    vertno, eax;
// LINE 1652:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert1, eax;
// LINE 1657:
	__asm        add    vertno, 4;
// LINE 1659:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert2, eax;
// LINE 1665:
	__asm        mov    eax, width;
	__asm        shl    eax, 0x10;
	__asm        sar    eax, 1;
	__asm        mov    ecx, vert1;
	__asm        add    eax, [ecx];
	__asm        mov    ecx, vert2;
	__asm        mov    [ecx], eax;
// LINE 1666:
	__asm        mov    eax, vert1;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, height;
	__asm        shl    ecx, 0x10;
	__asm        sar    ecx, 1;
	__asm        add    eax, ecx;
	__asm        mov    ecx, vert2;
	__asm        mov    [ecx+4], eax;
// LINE 1670:
next_face:
_Tbd:
	__asm        mov    eax, faceptr;
	__asm        mov    eax, [eax];
	__asm        mov    faceptr, eax;
// LINE 1671:
	__asm        jmp    _T2d;
// LINE 1673:
_Tca:
}

// FUNCTION: COPTER_D 0x004d3e24
void VR3dObjLocate(int32_t obj, int32_t x, int32_t y, int32_t z) {
	struct ObjectHdr* oh;
	int32_t i;
	struct Point3d* vert;

// LINE 1685:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1689:
	__asm        mov    i, 0;
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+8];
	__asm        mov    vert, eax;
	__asm        jmp    _T2b;
_T24:
	__asm        inc    i;
	__asm        add    vert, 0xC;
_T2b:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T59;
// LINE 1691:
	__asm        mov    eax, x;
	__asm        mov    ecx, vert;
	__asm        add    [ecx], eax;
// LINE 1692:
	__asm        mov    eax, y;
	__asm        mov    ecx, vert;
	__asm        add    [ecx+4], eax;
// LINE 1693:
	__asm        mov    eax, z;
	__asm        mov    ecx, vert;
	__asm        add    [ecx+8], eax;
// LINE 1694:
	__asm        jmp    _T24;
// LINE 1697:
_T59:
	__asm        mov    eax, x;
	__asm        mov    ecx, oh;
	__asm        add    [ecx+0x18], eax;
// LINE 1698:
	__asm        mov    eax, y;
	__asm        mov    ecx, oh;
	__asm        add    [ecx+0x1C], eax;
// LINE 1699:
	__asm        mov    eax, z;
	__asm        mov    ecx, oh;
	__asm        add    [ecx+0x20], eax;
// LINE 1701:
}

// FUNCTION: COPTER_D 0x004d3e9d
int32_t VRObjGetHeight(int32_t obj) {
	int32_t maxy;
	struct ObjectHdr* oh;
	int32_t i;
	struct Point3d* vert;

// LINE 1713:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1716:
	__asm        mov    maxy, 0x80000000;
// LINE 1718:
	__asm        mov    i, 0;
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+8];
	__asm        mov    vert, eax;
	__asm        jmp    _T32;
_T2b:
	__asm        inc    i;
	__asm        add    vert, 0xC;
_T32:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T5e;
// LINE 1720:
	__asm        mov    eax, vert;
	__asm        mov    ecx, maxy;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T59;
// LINE 1721:
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+4];
	__asm        mov    maxy, eax;
// LINE 1722:
_T59:
	__asm        jmp    _T2b;
// LINE 1724:
_T5e:
	__asm        mov    eax, maxy;
	__asm        jmp    near ptr 0x004D3F03;
// LINE 1725:
}

// FUNCTION: COPTER_D 0x004d3f08
void VR2dObjLocate(int32_t obj, int32_t x, int32_t y, int32_t z) {
	char * dataptr;
	struct ObjectHdr* oh;
	int32_t xdiff;
	int32_t * vertno;
	struct Point3d* vert2;
	struct _FaceHdr* faceptr;
	struct Point3d* vert1;
	int32_t ydiff;

// LINE 1740:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 1747:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    faceptr, eax;
// LINE 1749:
	__asm        mov    eax, faceptr;
	__asm        test   byte ptr [eax+8], 4;
	__asm        jne    _T2a;
// LINE 1750:
	__asm        jmp    _Tdd;
// LINE 1752:
_T2a:
	__asm        mov    eax, faceptr;
	__asm        mov    dataptr, eax;
// LINE 1753:
	__asm        add    dataptr, 0x30;
// LINE 1754:
	__asm        mov    eax, dataptr;
	__asm        mov    vertno, eax;
// LINE 1758:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert1, eax;
// LINE 1762:
	__asm        add    vertno, 4;
// LINE 1764:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    vert2, eax;
// LINE 1770:
	__asm        mov    eax, vert2;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, vert1;
	__asm        sub    eax, [ecx];
	__asm        mov    xdiff, eax;
// LINE 1771:
	__asm        mov    eax, vert2;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, vert1;
	__asm        sub    eax, [ecx+4];
	__asm        mov    ydiff, eax;
// LINE 1775:
	__asm        mov    eax, x;
	__asm        mov    ecx, vert1;
	__asm        mov    [ecx], eax;
// LINE 1776:
	__asm        mov    eax, y;
	__asm        mov    ecx, vert1;
	__asm        mov    [ecx+4], eax;
// LINE 1777:
	__asm        mov    eax, z;
	__asm        mov    ecx, vert1;
	__asm        mov    [ecx+8], eax;
// LINE 1779:
	__asm        mov    eax, x;
	__asm        add    eax, xdiff;
	__asm        mov    ecx, vert2;
	__asm        mov    [ecx], eax;
// LINE 1780:
	__asm        mov    eax, y;
	__asm        add    eax, ydiff;
	__asm        mov    ecx, vert2;
	__asm        mov    [ecx+4], eax;
// LINE 1781:
	__asm        mov    eax, z;
	__asm        mov    ecx, vert2;
	__asm        mov    [ecx+8], eax;
// LINE 1783:
	__asm        mov    eax, x;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x18], eax;
// LINE 1784:
	__asm        mov    eax, y;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x1C], eax;
// LINE 1785:
	__asm        mov    eax, z;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x20], eax;
// LINE 1787:
_Tdd:
}

// FUNCTION: COPTER_D 0x004d3fea
struct _BSPtree* ReadTree() {
	unsigned short FaceIndex;
	unsigned short ThisIndex;

// LINE 1803:
	__asm        push   2;
	__asm        lea    eax, FaceIndex;
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
// LINE 1810:
	__asm        mov    eax, reinterpret_cast<uint32_t>(FaceIndex);
	__asm        and    eax, 0xFFFF;
	__asm        cmp    eax, 0xFFFF;
	__asm        je     _Teb;
// LINE 1811:
	__asm        mov    ax, BSPIndex;
	__asm        mov    ThisIndex, ax;
// LINE 1812:
	__asm        inc    BSPIndex;
// LINE 1813:
	__asm        mov    eax, reinterpret_cast<uint32_t>(FaceIndex);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, FaceArray;
	__asm        mov    eax, [ecx+eax*4];
	__asm        mov    ecx, reinterpret_cast<uint32_t>(ThisIndex);
	__asm        and    ecx, 0xFFFF;
	__asm        mov    edx, ecx;
	__asm        shl    ecx, 3;
	__asm        sub    ecx, edx;
	__asm        mov    edx, Tree;
	__asm        mov    [edx+ecx*4], eax;
// LINE 1815:
	__asm        push   0x10;
	__asm        mov    eax, reinterpret_cast<uint32_t>(ThisIndex);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, eax;
	__asm        shl    eax, 3;
	__asm        sub    eax, ecx;
	__asm        shl    eax, 2;
	__asm        add    eax, Tree;
	__asm        add    eax, 4;
	__asm        push   eax;
	__asm        call   ReadResource;
	__asm        add    esp, 8;
// LINE 1827:
	__asm        call   ReadTree;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(ThisIndex);
	__asm        and    ecx, 0xFFFF;
	__asm        mov    edx, ecx;
	__asm        shl    ecx, 3;
	__asm        sub    ecx, edx;
	__asm        mov    edx, Tree;
	__asm        mov    [edx+ecx*4+0x14], eax;
// LINE 1828:
	__asm        call   ReadTree;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(ThisIndex);
	__asm        and    ecx, 0xFFFF;
	__asm        mov    edx, ecx;
	__asm        shl    ecx, 3;
	__asm        sub    ecx, edx;
	__asm        mov    edx, Tree;
	__asm        mov    [edx+ecx*4+0x18], eax;
// LINE 1829:
	__asm        mov    eax, reinterpret_cast<uint32_t>(ThisIndex);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, eax;
	__asm        shl    eax, 3;
	__asm        sub    eax, ecx;
	__asm        shl    eax, 2;
	__asm        add    eax, Tree;
	__asm        jmp    _Tf2;
// LINE 1831:
	__asm        jmp    _Tf2;
_Teb:
	__asm        xor    eax, eax;
	__asm        jmp    _Tf2;
// LINE 1833:
_Tf2:
}

// FUNCTION: COPTER_D 0x004d40e1
void NormalizeObj(struct ObjectHdr* obj) {
	int32_t i;
	struct Point3d* d;
	struct Point3d c;
	struct Point3d* s;

// LINE 1848:
	__asm        mov    eax, obj;
	__asm        add    eax, 0x18;
	__asm        lea    ecx, c.x;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 1849:
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+8];
	__asm        mov    s, eax;
// LINE 1850:
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+8];
	__asm        mov    d, eax;
// LINE 1851:
	__asm        mov    i, 0;
	__asm        jmp    _T43;
_T40:
	__asm        inc    i;
_T43:
	__asm        mov    eax, obj;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T8a;
// LINE 1852:
	__asm        mov    eax, s;
	__asm        mov    eax, [eax];
	__asm        sub    eax, c.x;
	__asm        mov    ecx, d;
	__asm        mov    [ecx], eax;
// LINE 1853:
	__asm        mov    eax, s;
	__asm        mov    eax, [eax+4];
	__asm        sub    eax, c.y;
	__asm        mov    ecx, d;
	__asm        mov    [ecx+4], eax;
// LINE 1854:
	__asm        mov    eax, s;
	__asm        mov    eax, [eax+8];
	__asm        sub    eax, c.z;
	__asm        mov    ecx, d;
	__asm        mov    [ecx+8], eax;
// LINE 1855:
	__asm        add    d, 0xC;
// LINE 1856:
	__asm        add    s, 0xC;
// LINE 1857:
	__asm        jmp    _T40;
// LINE 1858:
_T8a:
	__asm        mov    eax, obj;
	__asm        mov    dword ptr [eax+0x20], 0;
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    ecx, obj;
	__asm        mov    [ecx+0x1C], eax;
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    ecx, obj;
	__asm        mov    [ecx+0x18], eax;
// LINE 1859:
}

// FUNCTION: COPTER_D 0x004d4192
int32_t VRAssignTextureResToGroup(struct VRResource* g, struct VRResource* b) {
	int32_t obj;
	int32_t k;
	struct GEOM_Resource* geo;
	struct TEXT_Resource* bmp;
	int32_t hiword;
	int32_t j;
	int32_t i;
	struct _FaceHdr* fh;
	int32_t face;
	struct VRObjInfo oinfo;
	int32_t loword;

// LINE 1880:
	__asm        mov    eax, g;
	__asm        mov    geo, eax;
// LINE 1881:
	__asm        mov    eax, b;
	__asm        mov    bmp, eax;
// LINE 1882:
	__asm        mov    i, 0;
	__asm        jmp    _T24;
_T21:
	__asm        inc    i;
_T24:
	__asm        mov    eax, geo;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T196;
// LINE 1883:
	__asm        mov    eax, i;
	__asm        mov    ecx, geo;
	__asm        mov    eax, [ecx+eax*4+0x18];
	__asm        mov    obj, eax;
// LINE 1884:
	__asm        lea    eax, oinfo.Faces;
	__asm        push   eax;
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D8859;
	__asm        add    esp, 8;
// LINE 1885:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D85CD;
	__asm        add    esp, 4;
	__asm        mov    face, eax;
// LINE 1886:
	__asm        mov    j, 0;
	__asm        jmp    _T6e;
_T6b:
	__asm        inc    j;
_T6e:
	__asm        mov    eax, j;
	__asm        cmp    oinfo.Faces, eax;
	__asm        jle    _T191;
// LINE 1887:
	__asm        mov    eax, face;
	__asm        mov    fh, eax;
// LINE 1893:
	__asm        mov    eax, fh;
	__asm        test   byte ptr [eax+8], 1;
	__asm        je     _T9a;

	__asm        mov    eax, fh;
	__asm        test   byte ptr [eax+8], 4;
	__asm        je     _Tce;
_T9a:
	__asm        mov    eax, fh;
	__asm        test   byte ptr [eax+9], 8;
	__asm        jne    _Tce;

	__asm        mov    eax, fh;
	__asm        test   byte ptr [eax+9], 0x80;
	__asm        jne    _Tce;

	__asm        mov    eax, fh;
	__asm        test   byte ptr [eax+0xA], 1;
	__asm        jne    _Tce;

	__asm        mov    eax, fh;
	__asm        test   byte ptr [eax+9], 0x40;
	__asm        je     _Td3;
// LINE 1894:
_Tce:
	__asm        jmp    _T17d;
// LINE 1895:
_Td3:
	__asm        mov    eax, face;
	__asm        push   eax;
	__asm        call   0x004D8610;
	__asm        add    esp, 4;
	__asm        mov    k, eax;
// LINE 1896:
	__asm        mov    eax, k;
	__asm        sar    eax, 0x10;
	__asm        mov    hiword, eax;
// LINE 1897:
	__asm        mov    eax, k;
	__asm        and    eax, 0xFFFF;
	__asm        mov    loword, eax;
// LINE 1901:
	__asm        cmp    hiword, 0;
	__asm        je     _T143;
// LINE 1903:
	__asm        mov    eax, bmp;
	__asm        mov    ecx, hiword;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jge    _T120;
// LINE 1905:
	__asm        mov    GlobalError, 0xD;
// LINE 1906:
	__asm        xor    eax, eax;
	__asm        jmp    _T1a0;
// LINE 1909:
_T120:
	__asm        mov    eax, loword;
	__asm        push   eax;
	__asm        mov    eax, hiword;
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    ecx, bmp;
	__asm        mov    eax, [ecx+eax*4+0x20];
	__asm        push   eax;
	__asm        mov    eax, fh;
	__asm        push   eax;
	__asm        call   VRBCApplyTiledMap;
	__asm        add    esp, 0xC;
// LINE 1911:
	__asm        jmp    _T17d;
// LINE 1913:
_T143:
	__asm        mov    eax, bmp;
	__asm        mov    ecx, k;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jge    _T163;
// LINE 1914:
	__asm        mov    GlobalError, 0xD;
// LINE 1915:
	__asm        xor    eax, eax;
	__asm        jmp    _T1a0;
// LINE 1917:
_T163:
	__asm        mov    eax, k;
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    ecx, bmp;
	__asm        mov    eax, [ecx+eax*4+0x20];
	__asm        push   eax;
	__asm        mov    eax, face;
	__asm        push   eax;
	__asm        call   0x004D698D;
	__asm        add    esp, 8;
// LINE 1919:
next_face:
_T17d:
	__asm        mov    eax, face;
	__asm        push   eax;
	__asm        call   0x004D85F8;
	__asm        add    esp, 4;
	__asm        mov    face, eax;
// LINE 1920:
	__asm        jmp    _T6b;
// LINE 1921:
_T191:
	__asm        jmp    _T21;
// LINE 1922:
_T196:
	__asm        mov    eax, 1;
	__asm        jmp    _T1a0;
// LINE 1923:
_T1a0:
}

// FUNCTION: COPTER_D 0x004d4337
void VRBCApplyTiledMap(struct _FaceHdr* fh, struct VRBmpHdr* bmp, int32_t tileid) {
	int32_t i;
	int32_t h;
	int32_t w;
	struct MapVert* barry;
	struct MapVert* mv;

// LINE 1937:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    mv, eax;
// LINE 1938:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x28];
	__asm        mov    barry, eax;
// LINE 1940:
	__asm        mov    eax, bmp;
	__asm        mov    eax, [eax];
	__asm        mov    w, eax;
// LINE 1941:
	__asm        mov    eax, bmp;
	__asm        mov    eax, [eax+4];
	__asm        mov    h, eax;
// LINE 1946:
	__asm        mov    i, 0;
	__asm        jmp    _T3b;
_T38:
	__asm        inc    i;
_T3b:
	__asm        mov    eax, fh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T75;
// LINE 1948:
	__asm        mov    eax, barry;
	__asm        mov    eax, [eax];
	__asm        imul   eax, w;
	__asm        mov    ecx, mv;
	__asm        mov    [ecx], eax;
// LINE 1949:
	__asm        mov    eax, barry;
	__asm        mov    eax, [eax+4];
	__asm        imul   eax, h;
	__asm        mov    ecx, mv;
	__asm        mov    [ecx+4], eax;
// LINE 1950:
	__asm        add    mv, 8;
// LINE 1951:
	__asm        add    barry, 8;
// LINE 1952:
	__asm        jmp    _T38;
// LINE 1958:
_T75:
	__asm        mov    eax, tileid;
	__asm        shl    eax, 3;
	__asm        add    eax, bmp;
	__asm        add    eax, 0xC;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x24], eax;
// LINE 1959:
}

// FUNCTION: COPTER_D 0x004d43c3
struct VRMemPool* VRCreateMemPool(int32_t xf, int32_t d2) {
	struct VRMemPool* mp;

// LINE 1975:
	__asm        mov    eax, d2;
	__asm        add    eax, xf;
	__asm        add    eax, 0xA0;
	__asm        push   eax;
	__asm        call   malloc;
	__asm        add    esp, 4;
	__asm        mov    mp, eax;
	__asm        cmp    mp, 0;
	__asm        jne    _T3b;
// LINE 1976:
	__asm        mov    GlobalError, 4;
// LINE 1977:
	__asm        xor    eax, eax;
	__asm        jmp    _Tf3;
// LINE 1982:
_T3b:
	__asm        mov    eax, mp;
	__asm        mov    dword ptr [eax], 0;
// LINE 1983:
	__asm        mov    eax, mp;
	__asm        add    eax, 0x30;
	__asm        and    eax, 0xFFFFFFF0;
	__asm        mov    ecx, mp;
	__asm        mov    [ecx+8], eax;
// LINE 1984:
	__asm        mov    eax, mp;
	__asm        mov    eax, [eax+8];
	__asm        add    eax, xf;
	__asm        add    eax, 0x10;
	__asm        and    eax, 0xFFFFFFF0;
	__asm        mov    ecx, mp;
	__asm        mov    [ecx+0xC], eax;
// LINE 1985:
	__asm        mov    eax, mp;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    ecx, mp;
	__asm        mov    [ecx+0x18], eax;
// LINE 1986:
	__asm        mov    eax, mp;
	__asm        mov    eax, [eax+0xC];
	__asm        add    eax, d2;
	__asm        add    eax, 0x10;
	__asm        and    eax, 0xFFFFFFF0;
	__asm        mov    ecx, mp;
	__asm        mov    [ecx+0x1C], eax;
// LINE 1988:
	__asm        mov    eax, d2;
	__asm        add    eax, xf;
	__asm        add    eax, 0xA0;
	__asm        add    G_alloc_curr, eax;
	__asm        mov    eax, G_alloc_curr;
	__asm        cmp    G_alloc_max, eax;
	__asm        jae    _Tb5;

	__asm        mov    eax, G_alloc_curr;
	__asm        mov    G_alloc_max, eax;
// LINE 1989:
_Tb5:
	__asm        mov    eax, d2;
	__asm        add    eax, xf;
	__asm        add    eax, 0xA0;
	__asm        add    G_alloc_used, eax;
// LINE 1992:
	__asm        mov    eax, mp;
	__asm        push   eax;
	__asm        call   0x004D8491;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _Teb;
// LINE 1993:
	__asm        mov    GlobalError, 0xE;
// LINE 1994:
	__asm        xor    eax, eax;
	__asm        jmp    _Tf3;
// LINE 1996:
_Teb:
	__asm        mov    eax, mp;
	__asm        jmp    _Tf3;
// LINE 1997:
_Tf3:
}

// FUNCTION: COPTER_D 0x004d44bb
void VRFreeMemPool(struct VRMemPool* mp) {
// LINE 2010:
	__asm        mov    eax, mp;
	__asm        push   eax;
	__asm        call   0x004D84B9;
	__asm        add    esp, 4;
// LINE 2011:
	__asm        mov    eax, mp;
	__asm        push   eax;
	__asm        call   free;
	__asm        add    esp, 4;
// LINE 2012:
}

// FUNCTION: COPTER_D 0x004d44de
void FaceCalcNormal(struct Point3d* v0, struct Point3d* v1, struct Point3d* vlst, struct Project3d* norm) {
	struct FPoint3d fvlst;
	double length;
	double tmpZ;
	double tmpY;
	struct FPoint3d fv1;
	double tmpX;
	struct FPoint3d fv0;
	struct FPoint3d fV2;
	struct FPoint3d fV1;

// LINE 2034:
	__asm        mov    eax, v0;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x9C], eax;
	__asm        fild   dword ptr [ebp-0x9C];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fv0.x;
// LINE 2035:
	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0xA0], eax;
	__asm        fild   dword ptr [ebp-0xA0];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fv0.y;
// LINE 2036:
	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0xA4], eax;
	__asm        fild   dword ptr [ebp-0xA4];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fv0.z;
// LINE 2037:
	__asm        mov    eax, v1;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0xA8], eax;
	__asm        fild   dword ptr [ebp-0xA8];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fv1.x;
// LINE 2038:
	__asm        mov    eax, v1;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0xAC], eax;
	__asm        fild   dword ptr [ebp-0xAC];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fv1.y;
// LINE 2039:
	__asm        mov    eax, v1;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0xB0], eax;
	__asm        fild   dword ptr [ebp-0xB0];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fv1.z;
// LINE 2040:
	__asm        mov    eax, vlst;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0xB4], eax;
	__asm        fild   dword ptr [ebp-0xB4];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fvlst.x;
// LINE 2041:
	__asm        mov    eax, vlst;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0xB8], eax;
	__asm        fild   dword ptr [ebp-0xB8];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fvlst.y;
// LINE 2042:
	__asm        mov    eax, vlst;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0xBC], eax;
	__asm        fild   dword ptr [ebp-0xBC];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        fstp   fvlst.z;
// LINE 2047:
	__asm        fld    fvlst.x;
	__asm        fsub   fv0.x;
	__asm        fstp   fV2.x;
// LINE 2048:
	__asm        fld    fvlst.y;
	__asm        fsub   fv0.y;
	__asm        fstp   fV2.y;
// LINE 2049:
	__asm        fld    fvlst.z;
	__asm        fsub   fv0.z;
	__asm        fstp   fV2.z;
// LINE 2050:
	__asm        fld    fv1.x;
	__asm        fsub   fv0.x;
	__asm        fstp   fV1.x;
// LINE 2051:
	__asm        fld    fv1.y;
	__asm        fsub   fv0.y;
	__asm        fstp   fV1.y;
// LINE 2052:
	__asm        fld    fv1.z;
	__asm        fsub   fv0.z;
	__asm        fst    fV1.z;
// LINE 2057:
	__asm        fmul   fV2.y;
	__asm        fld    fV1.y;
	__asm        fmul   fV2.z;
	__asm        fsubp;
	__asm        fstp   tmpX;
// LINE 2058:
	__asm        fld    fV2.z;
	__asm        fmul   fV1.x;
	__asm        fld    fV1.z;
	__asm        fmul   fV2.x;
	__asm        fsubp;
	__asm        fstp   tmpY;
// LINE 2059:
	__asm        fld    fV1.y;
	__asm        fmul   fV2.x;
	__asm        fld    fV1.x;
	__asm        fmul   fV2.y;
	__asm        fsubp;
	__asm        fst    tmpZ;
// LINE 2062:
	__asm        fmul   tmpZ;
	__asm        fld    tmpY;
	__asm        fmul   tmpY;
	__asm        faddp;
	__asm        fld    tmpX;
	__asm        fmul   tmpX;
	__asm        faddp;
	__asm        sub    esp, 8;
	__asm        fstp   qword ptr [esp];
	__asm        call   0x0056EC10;
	__asm        add    esp, 8;
	__asm        fst    length;
// LINE 2064:
	__asm        fdivr  tmpX;
	__asm        fmul   qword ptr ds:[0x592460];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, norm;
	__asm        mov    [ecx], eax;
// LINE 2065:
	__asm        fld    tmpY;
	__asm        fdiv   length;
	__asm        fmul   qword ptr ds:[0x592460];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, norm;
	__asm        mov    [ecx+4], eax;
// LINE 2066:
	__asm        fld    tmpZ;
	__asm        fdiv   length;
	__asm        fmul   qword ptr ds:[0x592460];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, norm;
	__asm        mov    [ecx+8], eax;
// LINE 2067:
}

// FUNCTION: COPTER_D 0x004d46bc
void ObjCalcVnormsAndShade(struct ObjectHdr* obj) {
	struct _FaceHdr* fp;
	int32_t k;
	int32_t j;
	struct Point3d* vnorms;
	int32_t i;
	int32_t * faceverts;
	double length;
	int32_t vertid;
	double tmpZ;
	double tmpY;
	double tmpX;

// LINE 2105:
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        push   eax;
	__asm        call   malloc;
	__asm        add    esp, 4;
	__asm        mov    vnorms, eax;
// LINE 2106:
	__asm        cmp    vnorms, 0;
	__asm        jne    _T30;
// LINE 2107:
	__asm        jmp    _T28b;
// LINE 2109:
_T30:
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    G_alloc_curr, eax;
	__asm        mov    eax, G_alloc_curr;
	__asm        cmp    G_alloc_max, eax;
	__asm        jae    _T5d;

	__asm        mov    eax, G_alloc_curr;
	__asm        mov    G_alloc_max, eax;
// LINE 2110:
_T5d:
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    G_alloc_used, eax;
// LINE 2116:
	__asm        mov    i, 0;
	__asm        jmp    _T7e;
_T7b:
	__asm        inc    i;
_T7e:
	__asm        mov    eax, obj;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T23f;
// LINE 2118:
// Block start:
	struct Point3d* vn;
	int32_t no_vert_faces;
	__asm        mov    no_vert_faces, 0;
// LINE 2119:
	__asm        mov    eax, i;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    eax, vnorms;
	__asm        mov    vn, eax;
// LINE 2121:
	__asm        mov    eax, vn;
	__asm        mov    dword ptr [eax+8], 0;
	__asm        mov    eax, vn;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, vn;
	__asm        mov    [ecx+4], eax;
	__asm        mov    eax, vn;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, vn;
	__asm        mov    [ecx], eax;
// LINE 2129:
	__asm        mov    eax, i;
	__asm        shl    eax, 4;
	__asm        mov    vertid, eax;
// LINE 2136:
	__asm        mov    eax, obj;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    fp, eax;
// LINE 2137:
	__asm        mov    j, 0;
	__asm        jmp    _Te5;
_Te2:
	__asm        inc    j;
_Te5:
	__asm        mov    eax, obj;
	__asm        mov    ecx, j;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T172;
// LINE 2139:
// Block start:
	struct Project3d* fn;
	__asm        mov    eax, fp;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    fn, eax;
// LINE 2141:
	__asm        mov    eax, fp;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    faceverts, eax;
// LINE 2147:
	__asm        mov    k, 0;
	__asm        jmp    _T115;
_T112:
	__asm        inc    k;
_T115:
	__asm        mov    eax, fp;
	__asm        mov    ecx, k;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T165;
// LINE 2149:
	__asm        mov    eax, k;
	__asm        mov    ecx, faceverts;
	__asm        mov    edx, vertid;
	__asm        cmp    [ecx+eax*4], edx;
	__asm        jne    _T160;
// LINE 2151:
	__asm        inc    no_vert_faces;
// LINE 2152:
	__asm        mov    eax, fn;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, vn;
	__asm        add    [ecx], eax;
// LINE 2153:
	__asm        mov    eax, fn;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, vn;
	__asm        add    [ecx+4], eax;
// LINE 2154:
	__asm        mov    eax, fn;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, vn;
	__asm        add    [ecx+8], eax;
// LINE 2155:
	__asm        jmp    _T165;
// LINE 2157:
_T160:
	__asm        jmp    _T112;
// LINE 2160:
_T165:
	__asm        mov    eax, fp;
	__asm        mov    eax, [eax];
	__asm        mov    fp, eax;
// LINE 2162:
// Block end:
	__asm        jmp    _Te2;
// LINE 2168:
_T172:
	__asm        cmp    no_vert_faces, 0;
	__asm        jle    _T23a;
// LINE 2171:
	__asm        mov    eax, vn;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x4C], eax;
	__asm        fild   dword ptr [ebp-0x4C];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        mov    eax, no_vert_faces;
	__asm        mov    [ebp-0x50], eax;
	__asm        fidiv  dword ptr [ebp-0x50];
	__asm        fstp   tmpX;
// LINE 2172:
	__asm        mov    eax, vn;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0x54], eax;
	__asm        fild   dword ptr [ebp-0x54];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        mov    eax, no_vert_faces;
	__asm        mov    [ebp-0x58], eax;
	__asm        fidiv  dword ptr [ebp-0x58];
	__asm        fstp   tmpY;
// LINE 2173:
	__asm        mov    eax, vn;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0x5C], eax;
	__asm        fild   dword ptr [ebp-0x5C];
	__asm        fdiv   qword ptr ds:[0x592460];
	__asm        mov    eax, no_vert_faces;
	__asm        mov    [ebp-0x60], eax;
	__asm        fidiv  dword ptr [ebp-0x60];
	__asm        fst    tmpZ;
// LINE 2175:
	__asm        fmul   tmpZ;
	__asm        fld    tmpY;
	__asm        fmul   tmpY;
	__asm        faddp;
	__asm        fld    tmpX;
	__asm        fmul   tmpX;
	__asm        faddp;
	__asm        sub    esp, 8;
	__asm        fstp   qword ptr [esp];
	__asm        call   0x0056EC10;
	__asm        add    esp, 8;
	__asm        fst    length;
// LINE 2176:
	__asm        fdivr  tmpX;
	__asm        fmul   qword ptr ds:[0x592460];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, vn;
	__asm        mov    [ecx], eax;
// LINE 2177:
	__asm        fld    tmpY;
	__asm        fdiv   length;
	__asm        fmul   qword ptr ds:[0x592460];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, vn;
	__asm        mov    [ecx+4], eax;
// LINE 2178:
	__asm        fld    tmpZ;
	__asm        fdiv   length;
	__asm        fmul   qword ptr ds:[0x592460];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, vn;
	__asm        mov    [ecx+8], eax;
// LINE 2182:
// Block end:
_T23a:
	__asm        jmp    _T7b;
// LINE 2185:
_T23f:
	__asm        mov    eax, vnorms;
	__asm        push   eax;
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   VRObjSetGouraudShade;
	__asm        add    esp, 8;
// LINE 2189:
	__asm        mov    eax, vnorms;
	__asm        push   eax;
	__asm        call   free;
	__asm        add    esp, 4;
// LINE 2190:
	__asm        xor    eax, eax;
	__asm        mov    ecx, obj;
	__asm        mov    ecx, [ecx+4];
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        shl    ecx, 2;
	__asm        sub    eax, ecx;
	__asm        neg    eax;
	__asm        sub    G_alloc_curr, eax;
// LINE 2191:
	__asm        xor    eax, eax;
	__asm        mov    ecx, obj;
	__asm        mov    ecx, [ecx+4];
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        shl    ecx, 2;
	__asm        sub    eax, ecx;
	__asm        neg    eax;
	__asm        sub    G_alloc_used, eax;
// LINE 2192:
_T28b:
}

// FUNCTION: COPTER_D 0x004d494c
void VRObjAssignLowRes(int32_t dest, int32_t src) {
	struct ObjectHdr* destptr;

// LINE 2204:
	__asm        mov    eax, dest;
	__asm        mov    destptr, eax;
// LINE 2206:
	__asm        mov    eax, src;
	__asm        mov    ecx, destptr;
	__asm        mov    [ecx+0x40], eax;
// LINE 2207:
	__asm        jmp    near ptr 0x004D4969;
// LINE 2208:
}

// FUNCTION: COPTER_D 0x004d496e
int32_t VRObjCreateRope(int32_t nverts, int32_t color, int32_t seglen) {
	char * dataptr;
	struct MapVert* mvert;
	struct ObjectHdr* oh;
	int32_t i;
	struct _FaceHdr* fh;
	struct Point3d* vert;
	int32_t * iptr;
	char * ptr;

// LINE 2238:
	__asm        mov    eax, nverts;
	__asm        mov    ecx, nverts;
	__asm        dec    ecx;
	__asm        shl    ecx, 4;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        lea    eax, [ecx+eax*8-8];
	__asm        mov    ecx, nverts;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        lea    eax, [eax+ecx*4];
	__asm        add    eax, 0xA0;
	__asm        mov    ObjDataSize, eax;
// LINE 2241:
	__asm        mov    eax, ObjDataSize;
	__asm        push   eax;
	__asm        mov    eax, MainPoolIndex;
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    dataptr, eax;
	__asm        cmp    dataptr, 0;
	__asm        jne    _T5f;
// LINE 2244:
	__asm        mov    GlobalError, 4;
// LINE 2245:
	__asm        xor    eax, eax;
	__asm        jmp    _T20d;
// LINE 2248:
_T5f:
	__asm        mov    eax, dataptr;
	__asm        push   eax;
	__asm        call   0x004D8643;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T84;
// LINE 2250:
	__asm        mov    GlobalError, 9;
// LINE 2251:
	__asm        xor    eax, eax;
	__asm        jmp    _T20d;
// LINE 2254:
_T84:
	__asm        mov    eax, ObjDataSize;
	__asm        push   eax;
	__asm        push   0;
	__asm        mov    eax, dataptr;
	__asm        push   eax;
	__asm        call   memset;
	__asm        add    esp, 0xC;
// LINE 2256:
	__asm        mov    eax, dataptr;
	__asm        mov    ptr, eax;
// LINE 2259:
	__asm        mov    eax, ptr;
	__asm        mov    oh, eax;
// LINE 2260:
	__asm        add    ptr, 0x90;
// LINE 2261:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax], 0;
// LINE 2262:
	__asm        mov    eax, nverts;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+4], eax;
// LINE 2263:
	__asm        mov    eax, nverts;
	__asm        dec    eax;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x10], eax;
// LINE 2264:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax+0x44], 0;
// LINE 2265:
	__asm        mov    eax, seglen;
	__asm        imul   eax, nverts;
	__asm        sar    eax, 1;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x30], eax;
// LINE 2266:
	__asm        mov    eax, ptr;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+8], eax;
// LINE 2267:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax+0x40], 0;
// LINE 2270:
	__asm        mov    eax, ptr;
	__asm        mov    vert, eax;
// LINE 2271:
	__asm        mov    eax, nverts;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    ptr, eax;
// LINE 2272:
	__asm        mov    i, 0;
	__asm        jmp    _T115;
_T112:
	__asm        inc    i;
_T115:
	__asm        mov    eax, i;
	__asm        cmp    nverts, eax;
	__asm        jle    _T14e;
// LINE 2274:
	__asm        mov    eax, vert;
	__asm        mov    dword ptr [eax+8], 0;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, vert;
	__asm        mov    [ecx], eax;
// LINE 2275:
	__asm        mov    eax, seglen;
	__asm        imul   eax, i;
	__asm        neg    eax;
	__asm        mov    ecx, vert;
	__asm        mov    [ecx+4], eax;
// LINE 2276:
	__asm        add    vert, 0xC;
// LINE 2277:
	__asm        jmp    _T112;
// LINE 2281:
_T14e:
	__asm        mov    eax, ptr;
	__asm        mov    mvert, eax;
// LINE 2282:
	__asm        add    ptr, 0x10;
// LINE 2285:
	__asm        mov    eax, ptr;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x4C], eax;
// LINE 2286:
	__asm        mov    eax, ptr;
	__asm        mov    fh, eax;
// LINE 2287:
	__asm        add    ptr, 0x30;
// LINE 2288:
	__asm        mov    i, 0;
	__asm        jmp    _T17a;
_T177:
	__asm        inc    i;
_T17a:
	__asm        mov    eax, nverts;
	__asm        dec    eax;
	__asm        cmp    eax, i;
	__asm        jle    _T205;
// LINE 2291:
	__asm        mov    eax, ptr;
	__asm        mov    iptr, eax;
// LINE 2292:
	__asm        add    ptr, 8;
// LINE 2295:
	__asm        mov    eax, fh;
	__asm        mov    dword ptr [eax+4], 2;
// LINE 2296:
	__asm        mov    eax, fh;
	__asm        mov    dword ptr [eax+8], 0x8002;
// LINE 2297:
	__asm        mov    eax, color;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0xC], eax;
// LINE 2298:
	__asm        mov    eax, fh;
	__asm        mov    dword ptr [eax+0x10], 0x14;
// LINE 2299:
	__asm        mov    eax, color;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x24], eax;
// LINE 2300:
	__asm        mov    eax, mvert;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x20], eax;
// LINE 2301:
	__asm        mov    eax, ptr;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx], eax;
// LINE 2302:
	__asm        mov    eax, iptr;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x1C], eax;
// LINE 2305:
	__asm        mov    eax, i;
	__asm        shl    eax, 4;
	__asm        mov    ecx, iptr;
	__asm        mov    [ecx], eax;
	__asm        add    iptr, 4;
// LINE 2306:
	__asm        mov    eax, i;
	__asm        inc    eax;
	__asm        shl    eax, 4;
	__asm        mov    ecx, iptr;
	__asm        mov    [ecx], eax;
// LINE 2309:
	__asm        mov    eax, ptr;
	__asm        mov    fh, eax;
// LINE 2310:
	__asm        add    ptr, 0x30;
// LINE 2311:
	__asm        jmp    _T177;
// LINE 2313:
_T205:
	__asm        mov    eax, dataptr;
	__asm        jmp    _T20d;
// LINE 2314:
_T20d:
}

// FUNCTION: COPTER_D 0x004d4b80
int32_t VRObjCreatePoint(int32_t nverts, int32_t plotter) {
	char * dataptr;
	struct MapVert* mvert;
	struct ObjectHdr* oh;
	int32_t i;
	struct _FaceHdr* fh;
	struct Point3d* vert;
	int32_t * iptr;
	char * ptr;

// LINE 2343:
	__asm        mov    eax, nverts;
	__asm        mov    ecx, nverts;
	__asm        shl    ecx, 4;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        lea    eax, [ecx+eax*4];
	__asm        mov    ecx, nverts;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        lea    eax, [eax+ecx*4];
	__asm        add    eax, 0x98;
	__asm        mov    ObjDataSize, eax;
// LINE 2346:
	__asm        mov    eax, ObjDataSize;
	__asm        push   eax;
	__asm        mov    eax, MainPoolIndex;
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    dataptr, eax;
	__asm        cmp    dataptr, 0;
	__asm        jne    _T5d;
// LINE 2349:
	__asm        mov    GlobalError, 4;
// LINE 2350:
	__asm        xor    eax, eax;
	__asm        jmp    _T1ee;
// LINE 2353:
_T5d:
	__asm        mov    eax, dataptr;
	__asm        push   eax;
	__asm        call   0x004D8643;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T82;
// LINE 2355:
	__asm        mov    GlobalError, 9;
// LINE 2356:
	__asm        xor    eax, eax;
	__asm        jmp    _T1ee;
// LINE 2359:
_T82:
	__asm        mov    eax, ObjDataSize;
	__asm        push   eax;
	__asm        push   0;
	__asm        mov    eax, dataptr;
	__asm        push   eax;
	__asm        call   memset;
	__asm        add    esp, 0xC;
// LINE 2361:
	__asm        mov    eax, dataptr;
	__asm        mov    ptr, eax;
// LINE 2364:
	__asm        mov    eax, ptr;
	__asm        mov    oh, eax;
// LINE 2365:
	__asm        add    ptr, 0x90;
// LINE 2366:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax], 0;
// LINE 2367:
	__asm        mov    eax, nverts;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+4], eax;
// LINE 2368:
	__asm        mov    eax, nverts;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x10], eax;
// LINE 2369:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax+0x44], 0;
// LINE 2370:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax+0x30], 0;
// LINE 2371:
	__asm        mov    eax, ptr;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+8], eax;
// LINE 2372:
	__asm        mov    eax, oh;
	__asm        mov    dword ptr [eax+0x40], 0;
// LINE 2375:
	__asm        mov    eax, ptr;
	__asm        mov    vert, eax;
// LINE 2376:
	__asm        mov    eax, nverts;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    ptr, eax;
// LINE 2377:
	__asm        mov    i, 0;
	__asm        jmp    _T10c;
_T109:
	__asm        inc    i;
_T10c:
	__asm        mov    eax, i;
	__asm        cmp    nverts, eax;
	__asm        jle    _T141;
// LINE 2379:
	__asm        mov    eax, vert;
	__asm        mov    dword ptr [eax+8], 0;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, vert;
	__asm        mov    [ecx], eax;
	__asm        mov    eax, vert;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, vert;
	__asm        mov    [ecx+4], eax;
// LINE 2380:
	__asm        add    vert, 0xC;
// LINE 2381:
	__asm        jmp    _T109;
// LINE 2385:
_T141:
	__asm        mov    eax, ptr;
	__asm        mov    mvert, eax;
// LINE 2386:
	__asm        add    ptr, 8;
// LINE 2389:
	__asm        mov    eax, ptr;
	__asm        mov    ecx, oh;
	__asm        mov    [ecx+0x4C], eax;
// LINE 2390:
	__asm        mov    eax, ptr;
	__asm        mov    fh, eax;
// LINE 2391:
	__asm        add    ptr, 0x30;
// LINE 2392:
	__asm        mov    i, 0;
	__asm        jmp    _T16d;
_T16a:
	__asm        inc    i;
_T16d:
	__asm        mov    eax, i;
	__asm        cmp    nverts, eax;
	__asm        jle    _T1e6;
// LINE 2395:
	__asm        mov    eax, ptr;
	__asm        mov    iptr, eax;
// LINE 2396:
	__asm        add    ptr, 4;
// LINE 2399:
	__asm        mov    eax, fh;
	__asm        mov    dword ptr [eax+4], 1;
// LINE 2400:
	__asm        mov    eax, fh;
	__asm        mov    dword ptr [eax+8], 0x10002;
// LINE 2401:
	__asm        mov    eax, i;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0xC], eax;
// LINE 2402:
	__asm        mov    eax, plotter;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x10], eax;
// LINE 2403:
	__asm        mov    eax, i;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x24], eax;
// LINE 2404:
	__asm        mov    eax, mvert;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x20], eax;
// LINE 2405:
	__asm        mov    eax, ptr;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx], eax;
// LINE 2406:
	__asm        mov    eax, iptr;
	__asm        mov    ecx, fh;
	__asm        mov    [ecx+0x1C], eax;
// LINE 2409:
	__asm        mov    eax, i;
	__asm        shl    eax, 4;
	__asm        mov    ecx, iptr;
	__asm        mov    [ecx], eax;
// LINE 2412:
	__asm        mov    eax, ptr;
	__asm        mov    fh, eax;
// LINE 2413:
	__asm        add    ptr, 0x30;
// LINE 2414:
	__asm        jmp    _T16a;
// LINE 2416:
_T1e6:
	__asm        mov    eax, dataptr;
	__asm        jmp    _T1ee;
// LINE 2417:
_T1ee:
}

// FUNCTION: COPTER_D 0x004d4d73
int32_t VRGetObjDupMemReq(int32_t obj) {
	int32_t size3;
	struct ObjectHdr* oh;
	int32_t size2;
	int32_t size1;

// LINE 2434:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 2436:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D8520;
	__asm        add    esp, 4;
	__asm        mov    size1, eax;
// LINE 2437:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    size2, eax;
// LINE 2438:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x14];
	__asm        shl    eax, 2;
	__asm        mov    size3, eax;
// LINE 2440:
	__asm        mov    eax, size3;
	__asm        add    eax, size2;
	__asm        add    eax, size1;
	__asm        jmp    near ptr 0x004D4DBA;
// LINE 2441:
}

// FUNCTION: COPTER_D 0x004d4dbf
int32_t VRCreateObjDuplicate(int32_t obj, char * mem) {
	struct ObjectHdr* oh2;
	struct ObjectHdr* oh;
	struct _FaceHdr* fh2;
	int32_t i;
	struct _FaceHdr* fh;
	char * to;

// LINE 2452:
	__asm        mov    eax, obj;
	__asm        mov    oh, eax;
// LINE 2458:
	__asm        mov    eax, mem;
	__asm        mov    to, eax;
// LINE 2459:
	__asm        mov    eax, to;
	__asm        mov    oh2, eax;
// LINE 2461:
	__asm        mov    eax, to;
	__asm        push   eax;
	__asm        call   0x004D8643;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T40;
// LINE 2463:
	__asm        mov    GlobalError, 9;
// LINE 2464:
	__asm        xor    eax, eax;
	__asm        jmp    _T161;
// LINE 2468:
_T40:
	__asm        push   0x90;
	__asm        mov    eax, oh;
	__asm        push   eax;
	__asm        mov    eax, to;
	__asm        push   eax;
	__asm        call   memcpy;
	__asm        add    esp, 0xC;
// LINE 2469:
	__asm        add    to, 0x90;
// LINE 2471:
	__asm        mov    eax, to;
	__asm        mov    ecx, oh2;
	__asm        mov    [ecx+8], eax;
// LINE 2474:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        push   eax;
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, to;
	__asm        push   eax;
	__asm        call   memcpy;
	__asm        add    esp, 0xC;
// LINE 2475:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+4];
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        add    to, eax;
// LINE 2478:
	__asm        mov    eax, to;
	__asm        mov    ecx, oh2;
	__asm        mov    [ecx+0x4C], eax;
// LINE 2481:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    fh, eax;
// LINE 2482:
	__asm        mov    i, 0;
	__asm        jmp    _Tb5;
_Tb2:
	__asm        inc    i;
_Tb5:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T159;
// LINE 2485:
	__asm        push   0x30;
	__asm        mov    eax, fh;
	__asm        push   eax;
	__asm        mov    eax, to;
	__asm        push   eax;
	__asm        call   memcpy;
	__asm        add    esp, 0xC;
// LINE 2486:
	__asm        mov    eax, to;
	__asm        mov    fh2, eax;
// LINE 2487:
	__asm        add    to, 0x30;
// LINE 2490:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+4];
	__asm        shl    eax, 2;
	__asm        push   eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        mov    eax, to;
	__asm        push   eax;
	__asm        call   memcpy;
	__asm        add    esp, 0xC;
// LINE 2491:
	__asm        mov    eax, to;
	__asm        mov    ecx, fh2;
	__asm        mov    [ecx+0x1C], eax;
// LINE 2492:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+4];
	__asm        shl    eax, 2;
	__asm        add    to, eax;
// LINE 2495:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+4];
	__asm        shl    eax, 3;
	__asm        push   eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x20];
	__asm        push   eax;
	__asm        mov    eax, to;
	__asm        push   eax;
	__asm        call   memcpy;
	__asm        add    esp, 0xC;
// LINE 2496:
	__asm        mov    eax, to;
	__asm        mov    ecx, fh2;
	__asm        mov    [ecx+0x20], eax;
// LINE 2497:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+4];
	__asm        shl    eax, 3;
	__asm        add    to, eax;
// LINE 2500:
	__asm        mov    eax, to;
	__asm        mov    ecx, fh2;
	__asm        mov    [ecx], eax;
// LINE 2503:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax];
	__asm        mov    fh, eax;
// LINE 2504:
	__asm        jmp    _Tb2;
// LINE 2506:
_T159:
	__asm        mov    eax, mem;
	__asm        jmp    _T161;
// LINE 2508:
_T161:
}

// FUNCTION: COPTER_D 0x004d4f25
int32_t VRStObjPolyHit(struct Point3d* sloc, struct Point3d* svec, int32_t dist, struct Point3d* tloc, int32_t tobj, struct Point3d** nptrptr) {
	struct Point3d* v0;
	int32_t maxz;
	int32_t maxy;
	int32_t maxx;
	int32_t tval;
	int32_t minz;
	struct ObjectHdr* oh;
	int32_t j;
	int32_t miny;
	struct Point3d loc;
	int32_t i;
	int32_t minx;
	struct _FaceHdr* fh;
	int32_t * vertno;
	int32_t dotp3;
	int32_t dotp2;
	int32_t dotp1;
	struct Point3d iloc;

// LINE 2529:
	__asm        mov    eax, tobj;
	__asm        mov    oh, eax;
// LINE 2540:
	__asm        mov    eax, sloc;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, tloc;
	__asm        sub    eax, [ecx];
	__asm        mov    loc.x, eax;
// LINE 2541:
	__asm        mov    eax, sloc;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, tloc;
	__asm        sub    eax, [ecx+4];
	__asm        mov    loc.y, eax;
// LINE 2542:
	__asm        mov    eax, sloc;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, tloc;
	__asm        sub    eax, [ecx+8];
	__asm        mov    loc.z, eax;
// LINE 2546:
	__asm        mov    eax, oh;
	__asm        mov    eax, [eax+0x4C];
	__asm        mov    fh, eax;
// LINE 2547:
	__asm        mov    i, 0;
	__asm        jmp    _T5a;
_T4f:
	__asm        inc    i;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax];
	__asm        mov    fh, eax;
_T5a:
	__asm        mov    eax, oh;
	__asm        mov    ecx, i;
	__asm        cmp    [eax+0x10], ecx;
	__asm        jle    _T387;
// LINE 2552:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, svec;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, svec;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, svec;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        neg    ebx;
	__asm        mov    dotp1, ebx;
// LINE 2557:
	__asm        cmp    dotp1, 0xFFFFFAE2;
	__asm        jl     _Tcf;
// LINE 2558:
	__asm        jmp    _T4f;
// LINE 2562:
_Tcf:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+0xC];
	__asm        mov    v0, eax;
// LINE 2565:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, v0;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    dotp2, ebx;
// LINE 2570:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, loc.y;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, loc.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, loc.x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        neg    ebx;
	__asm        mov    dotp3, ebx;
// LINE 2574:
	__asm        mov    eax, dotp1;
	__asm        push   eax;
	__asm        mov    eax, dotp3;
	__asm        add    eax, dotp2;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        neg    eax;
	__asm        mov    tval, eax;
// LINE 2577:
	__asm        mov    eax, dist;
	__asm        add    eax, 0x50000;
	__asm        cmp    eax, tval;
	__asm        jge    _T1a7;
// LINE 2578:
	__asm        jmp    _T4f;
// LINE 2581:
_T1a7:
	__asm        mov    eax, svec;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, tval;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, loc.x;
	__asm        add    ecx, eax;
	__asm        mov    iloc.x, ecx;
// LINE 2582:
	__asm        mov    eax, svec;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, tval;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, loc.y;
	__asm        add    ecx, eax;
	__asm        mov    iloc.y, ecx;
// LINE 2583:
	__asm        mov    eax, svec;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, tval;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, loc.z;
	__asm        add    ecx, eax;
	__asm        mov    iloc.z, ecx;
// LINE 2587:
	__asm        mov    minz, 0x7FF80000;
	__asm        mov    eax, minz;
	__asm        mov    miny, eax;
	__asm        mov    eax, miny;
	__asm        mov    minx, eax;
// LINE 2588:
	__asm        mov    maxz, 0x80080000;
	__asm        mov    eax, maxz;
	__asm        mov    maxy, eax;
	__asm        mov    eax, maxy;
	__asm        mov    maxx, eax;
// LINE 2593:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    vertno, eax;
// LINE 2594:
	__asm        mov    j, 0;
	__asm        jmp    _T235;
_T232:
	__asm        inc    j;
_T235:
	__asm        mov    eax, fh;
	__asm        mov    ecx, j;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T2f0;
// LINE 2600:
	__asm        mov    eax, vertno;
	__asm        mov    eax, [eax];
	__asm        shr    eax, 4;
	__asm        lea    eax, [eax+eax*2];
	__asm        shl    eax, 2;
	__asm        mov    ecx, oh;
	__asm        add    eax, [ecx+8];
	__asm        mov    v0, eax;
// LINE 2604:
	__asm        add    vertno, 4;
// LINE 2607:
	__asm        mov    eax, v0;
	__asm        mov    ecx, minx;
	__asm        cmp    [eax], ecx;
	__asm        jge    _T275;

	__asm        mov    eax, v0;
	__asm        mov    eax, [eax];
	__asm        mov    minx, eax;
// LINE 2608:
_T275:
	__asm        mov    eax, v0;
	__asm        mov    ecx, miny;
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T28d;

	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+4];
	__asm        mov    miny, eax;
// LINE 2609:
_T28d:
	__asm        mov    eax, v0;
	__asm        mov    ecx, minz;
	__asm        cmp    [eax+8], ecx;
	__asm        jge    _T2a5;

	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+8];
	__asm        mov    minz, eax;
// LINE 2610:
_T2a5:
	__asm        mov    eax, v0;
	__asm        mov    ecx, maxx;
	__asm        cmp    [eax], ecx;
	__asm        jle    _T2bb;

	__asm        mov    eax, v0;
	__asm        mov    eax, [eax];
	__asm        mov    maxx, eax;
// LINE 2611:
_T2bb:
	__asm        mov    eax, v0;
	__asm        mov    ecx, maxy;
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T2d3;

	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+4];
	__asm        mov    maxy, eax;
// LINE 2612:
_T2d3:
	__asm        mov    eax, v0;
	__asm        mov    ecx, maxz;
	__asm        cmp    [eax+8], ecx;
	__asm        jle    _T2eb;

	__asm        mov    eax, v0;
	__asm        mov    eax, [eax+8];
	__asm        mov    maxz, eax;
// LINE 2613:
_T2eb:
	__asm        jmp    _T232;
// LINE 2617:
_T2f0:
	__asm        mov    eax, maxz;
	__asm        add    eax, 0x20000;
	__asm        cmp    iloc.z, eax;
	__asm        jg     _T312;

	__asm        mov    eax, minz;
	__asm        sub    eax, 0x20000;
	__asm        cmp    iloc.z, eax;
	__asm        jge    _T317;
// LINE 2618:
_T312:
	__asm        jmp    _T4f;
// LINE 2619:
_T317:
	__asm        mov    eax, maxy;
	__asm        add    eax, 0x20000;
	__asm        cmp    iloc.y, eax;
	__asm        jg     _T339;

	__asm        mov    eax, miny;
	__asm        sub    eax, 0x20000;
	__asm        cmp    iloc.y, eax;
	__asm        jge    _T33e;
// LINE 2620:
_T339:
	__asm        jmp    _T4f;
// LINE 2621:
_T33e:
	__asm        mov    eax, maxx;
	__asm        add    eax, 0x20000;
	__asm        cmp    iloc.x, eax;
	__asm        jg     _T360;

	__asm        mov    eax, minx;
	__asm        sub    eax, 0x20000;
	__asm        cmp    eax, iloc.x;
	__asm        jle    _T365;
// LINE 2622:
_T360:
	__asm        jmp    _T4f;
// LINE 2626:
_T365:
	__asm        cmp    nptrptr, 0;
	__asm        je     _T37a;
// LINE 2627:
	__asm        mov    eax, fh;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    ecx, nptrptr;
	__asm        mov    [ecx], eax;
// LINE 2629:
_T37a:
	__asm        mov    eax, tval;
	__asm        jmp    _T391;
// LINE 2631:
	__asm        jmp    _T4f;
// LINE 2635:
_T387:
	__asm        mov    eax, 0xFFFFFFFF;
	__asm        jmp    _T391;
// LINE 2637:
_T391:
}



// Contribution: 2:00003460-0000346f Module: 147, 8 byte alignment, initialized_data, read, 


// Contribution: 3:00005218-0000521c Module: 147, 4 byte alignment, initialized_data, read, write, 


// Contribution: 3:0006fa5c-0006fa69 Module: 147, 4 byte alignment, uninitialized_data, read, write, 
// GLOBAL: COPTER_D 0x00606a5c
int32_t ObjDataSize;

// GLOBAL: COPTER_D 0x00606a60
char * ObjData;

// GLOBAL: COPTER_D 0x00606a64
struct _BSPtree* Tree;

// GLOBAL: COPTER_D 0x00606a68
unsigned short BSPIndex;



// Unknown globals:
// The PDB was slightly corrupted and we aren't sure which file these globals belong to.

// WARNING: this global might actually belong to: C:\Copter\source\common\S2alloc.c
// GLOBAL: COPTER_D 0x0063a858
int32_t MainPoolIndex; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\common\S2alloc.c
// GLOBAL: COPTER_D 0x0063a854
int32_t ScratchPoolIndex; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\engine\Resource.c
// GLOBAL: COPTER_D 0x006666b0
struct GEOM_Header GEOM_hdr; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\engine\Resource.c
// GLOBAL: COPTER_D 0x00666698
struct GEOM_DirGroup* GEOM_GPdir; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\engine\Resource.c
// GLOBAL: COPTER_D 0x0066669c
struct GEOM_DirId* GEOM_IDdir; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\engine\Resource.c
// GLOBAL: COPTER_D 0x006666a4
struct CMAP_Header CMAP_hdr; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\engine\Resource.c
// GLOBAL: COPTER_D 0x00666690
struct CMAP_Dir* CMAP_directory; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\engine\Resource.c
// GLOBAL: COPTER_D 0x006666c0
struct _FaceHdr** FaceArray; // Contrib missing

