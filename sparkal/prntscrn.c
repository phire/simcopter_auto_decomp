// Module: prntscrn.obj
// Source: C:\Copter\source\sparkal\prntscrn.c
// autogenerated by simcopter_tool from PDB file

// Type: char *;

// Type: char[260];

// Type: void;

// Type: struct _iobuf (forward reference);

// Type: int32_t;

// Type: unsigned short;



// Contribution: 1:0006a870-0006ac9e Module: 41, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x0046b870
void S3PrintScreen() {
	char * chPalette;
	char fname[260];

// LINE 56:
	__asm        mov    eax, ds:[0x5B4770];
	__asm        push   eax;
	__asm        call   0x004D2157;
	__asm        add    esp, 4;
	__asm        mov    chPalette, eax;
// LINE 57:
	__asm        mov    ax, ds:[0x599430];
	__asm        mov    [ebp-0x10C], ax;
	__asm        inc    word ptr ds:[0x599430];
	__asm        movsx  eax, word ptr [ebp-0x10C];
	__asm        push   eax;
	__asm        push   0x599434;
	__asm        lea    eax, fname[0];
	__asm        push   eax;
	__asm        call   0x0056CD30;
	__asm        add    esp, 0xC;
// LINE 58:
	__asm        mov    eax, chPalette;
	__asm        push   eax;
	__asm        lea    eax, fname[0];
	__asm        push   eax;
	__asm        call   0x0046B8DB;
	__asm        add    esp, 8;
// LINE 59:
}

// FUNCTION: COPTER_D 0x0046b8db
void S3BufferPrint(char * fname, char * chPalette) {
	struct _iobuf* hFileOut;
	int32_t ydim;
	int32_t pitch;
	int32_t xdim;
	int32_t y;
	char * ptr;

// LINE 74:
	__asm        cmp    dword ptr ds:[0x598EBC], 0x10;
	__asm        jne    near ptr 0x0046B90E;
// LINE 76:
	__asm        mov    eax, ds:[0x598EE8];
	__asm        mov    xdim, eax;
// LINE 77:
	__asm        mov    eax, ds:[0x598EEC];
	__asm        mov    ydim, eax;
// LINE 78:
	__asm        mov    eax, ds:[0x598EF4];
	__asm        mov    pitch, eax;
// LINE 80:
	__asm        jmp    near ptr 0x0046B926;
// LINE 82:
	__asm        mov    eax, ds:[0x598EC8];
	__asm        mov    xdim, eax;
// LINE 83:
	__asm        mov    eax, ds:[0x598ECC];
	__asm        mov    ydim, eax;
// LINE 84:
	__asm        mov    eax, ds:[0x598ED4];
	__asm        mov    pitch, eax;
// LINE 87:
	__asm        mov    byte ptr ds:[0x603DC8], 0xA;
// LINE 88:
	__asm        mov    byte ptr ds:[0x603DCA], 1;
// LINE 89:
	__asm        mov    word ptr ds:[0x603DCE], 0;
	__asm        mov    ax, ds:[0x603DCE];
	__asm        mov    ds:[0x603DCC], ax;
// LINE 90:
	__asm        mov    eax, xdim;
	__asm        dec    eax;
	__asm        mov    ds:[0x603DD0], ax;
// LINE 91:
	__asm        mov    eax, ydim;
	__asm        dec    eax;
	__asm        mov    ds:[0x603DD2], ax;
// LINE 92:
	__asm        mov    word ptr ds:[0x603E0C], 0;
// LINE 93:
	__asm        mov    byte ptr ds:[0x603DCB], 8;
// LINE 94:
	__asm        mov    byte ptr ds:[0x603DC9], 5;
// LINE 95:
	__asm        mov    byte ptr ds:[0x603E09], 1;
// LINE 96:
	__asm        mov    eax, xdim;
	__asm        mov    ds:[0x603E0A], ax;
// LINE 99:
	__asm        push   0x599444;
	__asm        mov    eax, fname;
	__asm        push   eax;
	__asm        call   0x0056D910;
	__asm        add    esp, 8;
	__asm        mov    hFileOut, eax;
// LINE 100:
	__asm        cmp    hFileOut, 0;
	__asm        je     near ptr 0x0046BABE;
// LINE 101:
	__asm        mov    eax, hFileOut;
	__asm        push   eax;
	__asm        push   1;
	__asm        push   0x80;
	__asm        push   0x603DC8;
	__asm        call   0x0056D590;
	__asm        add    esp, 0x10;
// LINE 103:
	__asm        mov    eax, ds:[0x598EAC];
	__asm        mov    ptr, eax;
// LINE 104:
	__asm        mov    y, 0;
	__asm        jmp    near ptr 0x0046B9D1;
	__asm        inc    y;
	__asm        mov    eax, y;
	__asm        cmp    ydim, eax;
	__asm        jle    near ptr 0x0046B9FC;
// LINE 106:
	__asm        mov    eax, xdim;
	__asm        push   eax;
	__asm        mov    eax, ptr;
	__asm        push   eax;
	__asm        mov    eax, hFileOut;
	__asm        push   eax;
	__asm        call   0x0046BAC3;
	__asm        add    esp, 0xC;
// LINE 107:
	__asm        mov    eax, pitch;
	__asm        add    ptr, eax;
// LINE 108:
	__asm        jmp    near ptr 0x0046B9CE;
// LINE 109:
	__asm        mov    eax, hFileOut;
	__asm        push   eax;
	__asm        push   0xC;
	__asm        call   0x0056F8B0;
	__asm        add    esp, 8;
// LINE 111:
	__asm        push   0;
	__asm        call   dword ptr ds:[0x6C3850];
	__asm        mov    ds:[0x603DC0], eax;
// LINE 112:
	__asm        push   0x603E48;
	__asm        push   0x100;
	__asm        push   0;
	__asm        mov    eax, ds:[0x603DC0];
	__asm        push   eax;
	__asm        call   dword ptr ds:[0x6C3580];
// LINE 113:
	__asm        mov    eax, ds:[0x603DC0];
	__asm        push   eax;
	__asm        push   0;
	__asm        call   dword ptr ds:[0x6C384C];
// LINE 114:
	__asm        mov    y, 0;
	__asm        jmp    near ptr 0x0046BA4C;
	__asm        inc    y;
	__asm        cmp    y, 0x100;
	__asm        jge    near ptr 0x0046BA9A;
// LINE 116:
	__asm        mov    eax, y;
	__asm        mov    al, [eax*4+0x603E48];
	__asm        mov    ecx, y;
	__asm        mov    [ecx+ecx*2+0x603AC0], al;
// LINE 117:
	__asm        mov    eax, y;
	__asm        mov    al, [eax*4+0x603E49];
	__asm        mov    ecx, y;
	__asm        mov    [ecx+ecx*2+0x603AC1], al;
// LINE 118:
	__asm        mov    eax, y;
	__asm        mov    al, [eax*4+0x603E4A];
	__asm        mov    ecx, y;
	__asm        mov    [ecx+ecx*2+0x603AC2], al;
// LINE 119:
	__asm        jmp    near ptr 0x0046BA49;
// LINE 120:
	__asm        mov    eax, hFileOut;
	__asm        push   eax;
	__asm        push   1;
	__asm        push   0x300;
	__asm        push   0x603AC0;
	__asm        call   0x0056D590;
	__asm        add    esp, 0x10;
// LINE 124:
	__asm        mov    eax, hFileOut;
	__asm        push   eax;
	__asm        call   0x0056D120;
	__asm        add    esp, 4;
// LINE 127:
}

// FUNCTION: COPTER_D 0x0046bac3
int32_t S3WritePCXLine(struct _iobuf* fp, char * p, unsigned short n) {
	unsigned short j;
	unsigned short i;
	unsigned short t;

// LINE 137:
	__asm        mov    i, 0;
	__asm        mov    j, 0;
	__asm        mov    t, 0;
// LINE 140:
	__asm        mov    i, 0;
// LINE 141:
	__asm        mov    eax, reinterpret_cast<uint32_t>(t);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(i);
	__asm        and    ecx, 0xFFFF;
	__asm        add    eax, ecx;
	__asm        mov    ecx, p;
	__asm        movsx  eax, byte ptr [eax+ecx+1];
	__asm        mov    ecx, reinterpret_cast<uint32_t>(t);
	__asm        and    ecx, 0xFFFF;
	__asm        mov    edx, reinterpret_cast<uint32_t>(i);
	__asm        and    edx, 0xFFFF;
	__asm        add    ecx, edx;
	__asm        mov    edx, p;
	__asm        movsx  ecx, byte ptr [ecx+edx];
	__asm        cmp    eax, ecx;
	__asm        jne    near ptr 0x0046BB60;
	__asm        mov    eax, reinterpret_cast<uint32_t>(t);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(i);
	__asm        and    ecx, 0xFFFF;
	__asm        add    eax, ecx;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(n);
	__asm        and    ecx, 0xFFFF;
	__asm        cmp    eax, ecx;
	__asm        jge    near ptr 0x0046BB60;
	__asm        mov    eax, reinterpret_cast<uint32_t>(i);
	__asm        and    eax, 0xFFFF;
	__asm        cmp    eax, 0x3F;
	__asm        jge    near ptr 0x0046BB60;
	__asm        inc    i;
	__asm        jmp    near ptr 0x0046BAE4;
// LINE 142:
	__asm        test   reinterpret_cast<uint32_t>(i), 0xFFFF;
	__asm        jle    near ptr 0x0046BBF4;
// LINE 143:
	__asm        mov    eax, fp;
	__asm        push   eax;
	__asm        mov    eax, reinterpret_cast<uint32_t>(i);
	__asm        and    eax, 0xFFFF;
	__asm        or     eax, 0xC0;
	__asm        push   eax;
	__asm        call   0x0056F8B0;
	__asm        add    esp, 8;
	__asm        cmp    eax, 0xFFFFFFFF;
	__asm        jne    near ptr 0x0046BB9A;
	__asm        mov    eax, 0xFFFFFFFF;
	__asm        jmp    near ptr 0x0046BC9A;
// LINE 144:
	__asm        mov    eax, fp;
	__asm        push   eax;
	__asm        mov    eax, reinterpret_cast<uint32_t>(t);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, p;
	__asm        movsx  eax, byte ptr [eax+ecx];
	__asm        push   eax;
	__asm        call   0x0056F8B0;
	__asm        add    esp, 8;
	__asm        cmp    eax, 0xFFFFFFFF;
	__asm        jne    near ptr 0x0046BBC9;
	__asm        mov    eax, 0xFFFFFFFF;
	__asm        jmp    near ptr 0x0046BC9A;
// LINE 145:
	__asm        mov    eax, reinterpret_cast<uint32_t>(t);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(i);
	__asm        and    ecx, 0xFFFF;
	__asm        add    eax, ecx;
	__asm        mov    t, ax;
// LINE 146:
	__asm        mov    eax, reinterpret_cast<uint32_t>(j);
	__asm        and    eax, 0xFFFF;
	__asm        add    eax, 2;
	__asm        mov    j, ax;
// LINE 148:
	__asm        jmp    near ptr 0x0046BC74;
// LINE 149:
	__asm        mov    eax, reinterpret_cast<uint32_t>(t);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, p;
	__asm        movsx  eax, byte ptr [eax+ecx];
	__asm        and    al, 0xC0;
	__asm        cmp    al, 0xC0;
	__asm        jne    near ptr 0x0046BC35;
// LINE 150:
	__asm        mov    eax, fp;
	__asm        push   eax;
	__asm        push   0xC1;
	__asm        call   0x0056F8B0;
	__asm        add    esp, 8;
	__asm        cmp    eax, 0xFFFFFFFF;
	__asm        jne    near ptr 0x0046BC31;
	__asm        mov    eax, 0xFFFFFFFF;
	__asm        jmp    near ptr 0x0046BC9A;
// LINE 151:
	__asm        inc    j;
// LINE 153:
	__asm        mov    ax, t;
	__asm        mov    [ebp-0x10], ax;
	__asm        inc    t;
	__asm        mov    eax, fp;
	__asm        push   eax;
	__asm        mov    eax, [ebp-0x10];
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, p;
	__asm        movsx  eax, byte ptr [eax+ecx];
	__asm        push   eax;
	__asm        call   0x0056F8B0;
	__asm        add    esp, 8;
	__asm        cmp    eax, 0xFFFFFFFF;
	__asm        jne    near ptr 0x0046BC70;
	__asm        mov    eax, 0xFFFFFFFF;
	__asm        jmp    near ptr 0x0046BC9A;
// LINE 154:
	__asm        inc    j;
// LINE 156:
	__asm        mov    eax, reinterpret_cast<uint32_t>(t);
	__asm        and    eax, 0xFFFF;
	__asm        mov    ecx, reinterpret_cast<uint32_t>(n);
	__asm        and    ecx, 0xFFFF;
	__asm        cmp    eax, ecx;
	__asm        jl     near ptr 0x0046BADE;
// LINE 157:
	__asm        mov    eax, reinterpret_cast<uint32_t>(n);
	__asm        and    eax, 0xFFFF;
	__asm        jmp    near ptr 0x0046BC9A;
// LINE 158:
}



// Contribution: 2:000014f8-00001707 Module: 41, 8 byte alignment, initialized_data, read, 
// LOCAL: COPTER_D 0x005904f8
// TurnTable3
// LOCAL: COPTER_D 0x00590578
// TurnTable2
// LOCAL: COPTER_D 0x005905b8
// IndexToType
// LOCAL: COPTER_D 0x005905c8
// TypeToIndex2
// LOCAL: COPTER_D 0x00590608
// TILUT
// LOCAL: COPTER_D 0x00590648
// OT
// LOCAL: COPTER_D 0x00590688
// RRT
// LOCAL: COPTER_D 0x005906c8
// LRT


// Contribution: 3:00002430-00002446 Module: 41, 4 byte alignment, initialized_data, read, write, 
// LOCAL: COPTER_D 0x00599430
// S_ctr


// Contribution: 3:0006cac0-0006d247 Module: 41, 8 byte alignment, uninitialized_data, read, write, 
// LOCAL: COPTER_D 0x00603ac0
// wpal
// LOCAL: COPTER_D 0x00603dc0
// hdc
// LOCAL: COPTER_D 0x00603dc8
// pcx
// LOCAL: COPTER_D 0x00603e48
// ppe
