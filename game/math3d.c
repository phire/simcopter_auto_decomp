// Module: Math3d.obj
// Source: C:\Copter\source\game\Math3d.c
// autogenerated by simcopter_tool from PDB file

// Type: struct Point3d (forward reference);
// Point3d Class implementation not found

// Type: double;

// Type: int32_t;

// Type: struct Plane (forward reference);
// Plane Class implementation not found

// Type: void;

// Type: struct Plane;
struct Plane{
	int32_t A;
	int32_t B;
	int32_t C;
	int32_t D;
};

// Type: struct Point3d;
struct Point3d{
	int32_t x;
	int32_t y;
	int32_t z;
};

// Type: struct mv (forward reference);
// mv Class implementation not found



// Contribution: 1:00141f80-00142684 Module: 152, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x00542f80
int32_t Magnitude(struct Point3d* V) {
	double k;
	double j;
	double i;

// LINE 33:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x1C], eax;
	__asm        fild   dword ptr [ebp-0x1C];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   i;
// LINE 34:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0x20], eax;
	__asm        fild   dword ptr [ebp-0x20];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   j;
// LINE 35:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0x24], eax;
	__asm        fild   dword ptr [ebp-0x24];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fst    k;
// LINE 36:
	__asm        fmul   k;
	__asm        fld    j;
	__asm        fmul   j;
	__asm        faddp;
	__asm        fld    i;
	__asm        fmul   i;
	__asm        faddp;
	__asm        call   0x0056EC1A;
	__asm        fmul   qword ptr ds:[0x5934E8];
	__asm        call   0x0056EBE8;
	__asm        jmp    near ptr 0x00542FEF;
// LINE 38:
}

// FUNCTION: COPTER_D 0x00542ff4
int32_t Distance(struct Point3d* p1, struct Point3d* p2) {
	double k;
	double j;
	double i;

// LINE 54:
	__asm        mov    eax, p2;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x1C], eax;
	__asm        fild   dword ptr [ebp-0x1C];
	__asm        mov    eax, p1;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x20], eax;
	__asm        fisub  dword ptr [ebp-0x20];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   i;
// LINE 55:
	__asm        mov    eax, p2;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0x24], eax;
	__asm        fild   dword ptr [ebp-0x24];
	__asm        mov    eax, p1;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0x28], eax;
	__asm        fisub  dword ptr [ebp-0x28];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   j;
// LINE 56:
	__asm        mov    eax, p2;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0x2C], eax;
	__asm        fild   dword ptr [ebp-0x2C];
	__asm        mov    eax, p1;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0x30], eax;
	__asm        fisub  dword ptr [ebp-0x30];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   k;
// LINE 57:
	__asm        fld    i;
	__asm        fmul   i;
	__asm        fld    k;
	__asm        fmul   k;
	__asm        faddp;
	__asm        fld    j;
	__asm        fmul   j;
	__asm        faddp;
	__asm        call   0x0056EC1A;
	__asm        fmul   qword ptr ds:[0x5934E8];
	__asm        call   0x0056EBE8;
	__asm        jmp    near ptr 0x00543089;
// LINE 59:
}

// FUNCTION: COPTER_D 0x0054308e
int32_t Normalize(struct Point3d* V) {
	double k;
	double j;
	double i;
	double r;

// LINE 74:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax];
	__asm        mov    [ebp-0x24], eax;
	__asm        fild   dword ptr [ebp-0x24];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   i;
// LINE 75:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+4];
	__asm        mov    [ebp-0x28], eax;
	__asm        fild   dword ptr [ebp-0x28];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fstp   j;
// LINE 76:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ebp-0x2C], eax;
	__asm        fild   dword ptr [ebp-0x2C];
	__asm        fdiv   qword ptr ds:[0x5934E8];
	__asm        fst    k;
// LINE 77:
	__asm        fmul   k;
	__asm        fld    j;
	__asm        fmul   j;
	__asm        faddp;
	__asm        fld    i;
	__asm        fmul   i;
	__asm        faddp;
	__asm        call   0x0056EC1A;
// LINE 79:
	__asm        fcom   qword ptr ds:[0x5934F0];
	__asm        fstp   r;
	__asm        fnstsw ax;
	__asm        test   ah, 0x40;
	__asm        jne    _Tbc;
// LINE 80:
	__asm        fld    i;
	__asm        fdiv   r;
	__asm        fmul   qword ptr ds:[0x5934E8];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx], eax;
// LINE 81:
	__asm        fld    j;
	__asm        fdiv   r;
	__asm        fmul   qword ptr ds:[0x5934E8];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx+4], eax;
// LINE 82:
	__asm        fld    k;
	__asm        fdiv   r;
	__asm        fmul   qword ptr ds:[0x5934E8];
	__asm        call   0x0056EBE8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx+8], eax;
// LINE 84:
	__asm        jmp    _Tdd;
// LINE 85:
_Tbc:
	__asm        mov    eax, V;
	__asm        mov    dword ptr [eax+8], 0;
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, V;
	__asm        mov    [ecx+4], eax;
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, V;
	__asm        mov    [ecx], eax;
// LINE 87:
_Tdd:
	__asm        fld    r;
	__asm        fmul   qword ptr ds:[0x5934E8];
	__asm        call   0x0056EBE8;
	__asm        jmp    near ptr 0x0054317E;
// LINE 88:
}

// FUNCTION: COPTER_D 0x00543183
void CreatePlane(struct Plane* plane, struct Point3d* V, struct Point3d* p) {
// LINE 106:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, plane;
	__asm        mov    [ecx], eax;
// LINE 107:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, plane;
	__asm        mov    [ecx+4], eax;
// LINE 108:
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, plane;
	__asm        mov    [ecx+8], eax;
// LINE 111:
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, plane;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, plane;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, plane;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        neg    ebx;
	__asm        mov    eax, plane;
	__asm        mov    [eax+0xC], ebx;
// LINE 113:
}

// FUNCTION: COPTER_D 0x005431fe
int32_t SideOfPlane(struct Point3d* V, struct Point3d* p, struct Point3d* q) {
	struct Plane plane;
	struct Point3d d;
	int32_t s;

// LINE 134:
	__asm        mov    eax, p;
	__asm        mov    eax, [eax];
	__asm        mov    d.x, eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+4];
	__asm        mov    d.y, eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+8];
	__asm        mov    d.z, eax;
// LINE 135:
	__asm        lea    eax, d.x;
	__asm        push   eax;
	__asm        call   Normalize;
	__asm        add    esp, 4;
// LINE 136:
	__asm        mov    eax, p;
	__asm        push   eax;
	__asm        mov    eax, V;
	__asm        push   eax;
	__asm        lea    eax, plane.A;
	__asm        push   eax;
	__asm        call   CreatePlane;
	__asm        add    esp, 0xC;
// LINE 141:
	__asm        mov    eax, q;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, plane.C;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, q;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, plane.B;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, q;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, plane.A;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        add    ebx, plane.D;
	__asm        mov    s, ebx;
// LINE 143:
	__asm        mov    eax, s;
	__asm        jmp    near ptr 0x0054328D;
// LINE 145:
}

// FUNCTION: COPTER_D 0x00543292
void CreateVelocity(struct Point3d* p1, struct Point3d* p2, struct Point3d* V, int32_t t) {
	int32_t i;

// LINE 163:
	__asm        mov    eax, p2;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, p1;
	__asm        sub    eax, [ecx];
	__asm        mov    i, eax;
// LINE 164:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx], eax;
// LINE 165:
	__asm        mov    eax, p2;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, p1;
	__asm        sub    eax, [ecx+4];
	__asm        mov    i, eax;
// LINE 166:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx+4], eax;
// LINE 167:
	__asm        mov    eax, p2;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, p1;
	__asm        sub    eax, [ecx+8];
	__asm        mov    i, eax;
// LINE 168:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx+8], eax;
// LINE 170:
}

// FUNCTION: COPTER_D 0x0054330c
int32_t SameSigns(int32_t s1, int32_t s2) {
// LINE 185:
	__asm        xor    eax, eax;
	__asm        cmp    s2, 0;
	__asm        setge  al;
	__asm        xor    eax, s1;
	__asm        jmp    near ptr 0x00543323;
// LINE 187:
}

// FUNCTION: COPTER_D 0x00543328
int32_t VectorBounds(struct Point3d* V, int32_t m) {
	int32_t r;

// LINE 205:
	__asm        mov    eax, V;
	__asm        push   eax;
	__asm        call   Magnitude;
	__asm        add    esp, 4;
	__asm        mov    r, eax;
	__asm        mov    eax, r;
	__asm        cmp    m, eax;
	__asm        jge    _T8a;
// LINE 206:
	__asm        mov    eax, r;
	__asm        push   eax;
	__asm        mov    eax, m;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    r, eax;
// LINE 207:
	__asm        mov    eax, r;
	__asm        push   eax;
	__asm        mov    eax, V;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx], eax;
// LINE 208:
	__asm        mov    eax, r;
	__asm        push   eax;
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx+4], eax;
// LINE 209:
	__asm        mov    eax, r;
	__asm        push   eax;
	__asm        mov    eax, V;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        mov    [ecx+8], eax;
// LINE 210:
	__asm        mov    eax, 1;
	__asm        jmp    _T91;
// LINE 213:
_T8a:
	__asm        xor    eax, eax;
	__asm        jmp    _T91;
// LINE 214:
_T91:
}

// FUNCTION: COPTER_D 0x005433be
void Apply_Force(struct Point3d* F, struct mv* p, int32_t t) {
	struct Point3d A;

// LINE 234:
	__asm        mov    eax, p;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, F;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    A.x, eax;
// LINE 235:
	__asm        mov    eax, p;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, F;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    A.y, eax;
// LINE 236:
	__asm        mov    eax, p;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, F;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    A.z, eax;
// LINE 241:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, A.x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, p;
	__asm        add    [ecx+8], eax;
// LINE 242:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, A.y;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, p;
	__asm        add    [ecx+0xC], eax;
// LINE 243:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, A.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, p;
	__asm        add    [ecx+0x10], eax;
// LINE 245:
}

// FUNCTION: COPTER_D 0x00543455
void Apply_Friction(int32_t F, struct mv* p, int32_t t) {
	int32_t j;
	int32_t v;
	int32_t f;
	int32_t a;

// LINE 265:
	__asm        mov    eax, p;
	__asm        add    eax, 8;
	__asm        push   eax;
	__asm        call   Magnitude;
	__asm        add    esp, 4;
	__asm        mov    v, eax;
// LINE 267:
	__asm        cmp    v, 0;
	__asm        jle    _Tdb;
// LINE 268:
	__asm        mov    eax, p;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, F;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    a, eax;
// LINE 269:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, a;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    f, eax;
// LINE 270:
	__asm        mov    eax, v;
	__asm        push   eax;
	__asm        mov    eax, v;
	__asm        sub    eax, f;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    j, eax;
// LINE 271:
	__asm        cmp    j, 0;
	__asm        jle    _Tbd;
// LINE 272:
	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, p;
	__asm        mov    [ecx+8], eax;
// LINE 273:
	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+0xC];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, p;
	__asm        mov    [ecx+0xC], eax;
// LINE 274:
	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, p;
	__asm        mov    eax, [eax+0x10];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, p;
	__asm        mov    [ecx+0x10], eax;
// LINE 276:
	__asm        jmp    _Tdb;
// LINE 277:
_Tbd:
	__asm        mov    eax, p;
	__asm        mov    dword ptr [eax+8], 0;
// LINE 278:
	__asm        mov    eax, p;
	__asm        mov    dword ptr [eax+0xC], 0;
// LINE 279:
	__asm        mov    eax, p;
	__asm        mov    dword ptr [eax+0x10], 0;
// LINE 282:
_Tdb:
}

// FUNCTION: COPTER_D 0x00543535
int32_t Apply_Force1D(int32_t F, int32_t M, int32_t V, int32_t t, int32_t Vmax) {
	int32_t nv;
	int32_t A;

// LINE 306:
	__asm        mov    eax, M;
	__asm        push   eax;
	__asm        mov    eax, F;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    A, eax;
// LINE 311:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, A;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, V;
	__asm        add    ecx, eax;
	__asm        mov    nv, ecx;
// LINE 312:
	__asm        mov    eax, nv;
	__asm        cdq;
	__asm        xor    eax, edx;
	__asm        sub    eax, edx;
	__asm        cmp    eax, Vmax;
	__asm        jle    _T62;

	__asm        cmp    nv, 0;
	__asm        jle    _T5a;

	__asm        mov    eax, Vmax;
	__asm        mov    nv, eax;
	__asm        jmp    _T62;
_T5a:
	__asm        mov    eax, Vmax;
	__asm        neg    eax;
	__asm        mov    nv, eax;
// LINE 313:
_T62:
	__asm        mov    eax, nv;
	__asm        jmp    near ptr 0x0054359F;
// LINE 314:
}

// FUNCTION: COPTER_D 0x005435a4
int32_t Apply_Friction1D(int32_t F, int32_t M, int32_t V, int32_t t) {
	int32_t absV;
	int32_t j;
	int32_t vf;
	int32_t A;

// LINE 336:
	__asm        cmp    V, 0;
	__asm        je     _T79;
// LINE 337:
	__asm        mov    eax, V;
	__asm        cdq;
	__asm        xor    eax, edx;
	__asm        sub    eax, edx;
	__asm        mov    absV, eax;
// LINE 338:
	__asm        mov    eax, M;
	__asm        push   eax;
	__asm        mov    eax, F;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    A, eax;
// LINE 339:
	__asm        mov    eax, t;
	__asm        push   eax;
	__asm        mov    eax, A;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    vf, eax;
// LINE 340:
	__asm        mov    eax, absV;
	__asm        push   eax;
	__asm        mov    eax, absV;
	__asm        sub    eax, vf;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    j, eax;
// LINE 341:
	__asm        cmp    j, 0;
	__asm        jle    _T79;

	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, V;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        jmp    _T80;
// LINE 343:
_T79:
	__asm        xor    eax, eax;
	__asm        jmp    _T80;
// LINE 344:
_T80:
}

// FUNCTION: COPTER_D 0x00543629
int32_t AngleBounds(int32_t a) {
// LINE 359:
_T06:
	__asm        cmp    a, 0;
	__asm        jge    _T1c;

	__asm        add    a, 0xE100000;
	__asm        jmp    _T06;
// LINE 360:
_T1c:
	__asm        cmp    a, 0xE100000;
	__asm        jle    _T35;

	__asm        sub    a, 0xE100000;
	__asm        jmp    _T1c;
// LINE 361:
_T35:
	__asm        cmp    a, 0x7080000;
	__asm        jl     _T4f;

	__asm        mov    eax, a;
	__asm        sub    eax, 0xE100000;
	__asm        jmp    _T52;
_T4f:
	__asm        mov    eax, a;
_T52:
	__asm        jmp    near ptr 0x00543680;
// LINE 362:
}



// Contribution: 2:000044e8-000044f7 Module: 152, 8 byte alignment, initialized_data, read, 
