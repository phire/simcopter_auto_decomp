// Module: S3city.obj
// Source: C:\Copter\source\game\S3city.c
// autogenerated by simcopter_tool from PDB file

// Type: long;

// Type: int32_t;

// Type: /*packed*/ struct _dPoint2d (forward reference);
struct _dPoint2d{ // packed(0x10 bytes) TI: 0x2766
	/*+0x0*/   double x; // 0x8 bytes
	/*+0x8*/   double z; // 0x8 bytes
};

// Type: /*packed*/ struct Point2d (forward reference);
struct Point2d{ // packed(0x8 bytes) TI: 0x18b2
	/*+0x0*/   int32_t x;
	/*+0x4*/   int32_t y;
};

// Type: /*packed*/ struct Point3d;
struct Point3d{ // packed(0xc bytes) TI: 0x18b0
	/*+0x0*/   int32_t x;
	/*+0x4*/   int32_t y;
	/*+0x8*/   int32_t z;
};

// Type: /*packed*/ struct Point2d;
struct Point2d{ // packed(0x8 bytes) TI: 0x18b2
	/*+0x0*/   int32_t x;
	/*+0x4*/   int32_t y;
};

// Type: short;

// Type: /*packed*/ struct VRview;
struct VRview{ // packed(0x58 bytes) TI: 0x2ecc
	/*+0x0*/   /*packed*/ struct Point3d loc; // 0xc bytes
	/*+0xc*/   /*packed*/ struct Point3d scale; // 0xc bytes
	/*+0x18*/  int32_t matrix[4][4]; // 0x40 bytes
};

// Type: long *;

// Type: /*packed*/ struct _CELL_INFO (forward reference);
struct _CELL_INFO{ // packed(0x18 bytes) TI: 0x1b03
	/*+0x0*/   short flags; // 0x2 bytes
	/*+0x2*/   short x; // 0x2 bytes
	/*+0x4*/   short y; // 0x2 bytes
	/*+0x6*/   short z; // 0x2 bytes
	/*+0x8*/   short size; // 0x2 bytes
	/*+0xa*/   short ctr; // 0x2 bytes
	/*+0xc*/   /*packed*/ struct _STOBJ_INST *stptr;
	/*+0x10*/  /*packed*/ struct _DYOBJ_INST *dyptr;
	/*+0x14*/  /*packed*/ struct _DYOBJ_INST *vwptr;
};

// Type: /*packed*/ struct tagLogCityEnterExit;
struct tagLogCityEnterExit{ // packed(0x30 bytes) TI: 0x3191
	/*+0x0*/   unsigned long nType;
	/*+0x4*/   unsigned long nTime;
	/*+0x8*/   unsigned long nMissionID;
	/*+0xc*/   unsigned long nEnterOrExit;
	/*+0x10*/  char szCity[32]; // 0x20 bytes
};

// Type: char;

// Type: void;

// Type: /*packed*/ struct VRBmpHdr (forward reference);
struct VRBmpHdr{ // packed(0x10 bytes) TI: 0x2312
	/*+0x0*/   /*packed*/ struct VRBmpInfo info; // 0xc bytes
	/*+0xc*/   int32_t ScanOffset[1];
};

// Type: /*packed*/ struct _STOBJ_INST (forward reference);
struct _STOBJ_INST{ // packed(0x10 bytes) TI: 0x193f
	/*+0x0*/   /*packed*/ struct _STOBJ_INST *next;
	/*+0x4*/   void * __ptr32 mesh;
	/*+0x8*/   long user1;
	/*+0xc*/   long user2;
};

// Type: /*packed*/ struct Point3d (forward reference);
struct Point3d{ // packed(0xc bytes) TI: 0x18b0
	/*+0x0*/   int32_t x;
	/*+0x4*/   int32_t y;
	/*+0x8*/   int32_t z;
};

// Type: double;

// Type: unsigned short;

// Type: /*packed*/ struct _DYOBJ_INST (forward reference);
struct _DYOBJ_INST{ // packed(0x64 bytes) TI: 0x1deb
	/*+0x0*/   /*packed*/ struct _DYOBJ_INST *next;
	/*+0x4*/   /*packed*/ struct _DYOBJ_INST *vnext;
	/*+0x8*/   void * __ptr32 mesh;
	/*+0xc*/   short flags; // 0x2 bytes
	/*+0xe*/   short user1; // 0x2 bytes
	/*+0x10*/  long radius;
	/*+0x14*/  long height;
	/*+0x18*/  /*packed*/ struct Point3d loc; // 0xc bytes
	/*+0x24*/  int32_t matrix[4][4]; // 0x40 bytes
};



// Contribution: 1:00109000-00112d42 Module: 170, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x0050a000
short S3CityInit() {
	/*bp-0x104*/ char szFilePath[260]; // 0x104 bytes
	/*bp-0x108*/ int32_t i;
	/*bp-0x138*/ /*packed*/ struct tagLogCityEnterExit tempLogCityEnterExit; // 0x30 bytes

// LINE 211:
	__asm        cmp    S_S2CityAlloc_Count, 0;
	__asm        jne    _T38;
// LINE 212:
	__asm        call   S2CityAlloc;
	__asm        movsx  eax, ax;
	__asm        test   eax, eax;
	__asm        je     _T32;
// LINE 213:
	return 0x1;
// LINE 214:
_T32:
	S_S2CityAlloc_Count++;
// LINE 219:
_T38:
	__asm        call   GetCurrentCityPath;
	__asm        push   eax;
	__asm        call   S2CityLoad;
	__asm        add    esp, 4;
	__asm        movsx  eax, ax;
	__asm        test   eax, eax;
	__asm        jne    _Tad;
// LINE 220:
	_assert(0xdc, 0x5b59f8, 0x5b5a18);
	__asm        jmp    _T72;

	__asm        jmp    _T72;
// LINE 221:
_T72:
	GetPathForFile(szFilePath[0], 0x5b5a1c, 0x0, 0x4);
// LINE 222:
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        call   S2CityLoad;
	__asm        add    esp, 4;
	__asm        movsx  eax, ax;
	__asm        test   eax, eax;
	__asm        jne    _Tad;
// LINE 223:
	return 0x1;
// LINE 227:
_Tad:
	S3TerrainInitMap();
// LINE 229:
	G_helibase_found = 0x0;
// LINE 230:
	G_apachebase_found = 0x0;
// LINE 231:
	G_apache_placed = 0x0;
// LINE 234:
	__asm        call   S3CityInitOmap;
	__asm        movsx  eax, ax;
	__asm        test   eax, eax;
	__asm        je     _FOR_f8;
// LINE 235:
	return 0x1;
// LINE 238:
_FOR_f8:
	for (i = 0x0; (i < 0x1e); i++) {
		// LINE 240:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].flags[eax*8], 4;
		// LINE 241:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].x[eax*8], 0;
		// LINE 242:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].y[eax*8], 0;
		// LINE 243:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].z[eax*8], 0;
		// LINE 244:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].size[eax*8], 1;
		// LINE 245:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].ctr[eax*8], 1;
		// LINE 246:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].stptr[eax*8], 0;
		// LINE 247:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].dyptr[eax*8], 0;
		// LINE 248:
			__asm        mov    eax, i;
			__asm        lea    eax, [eax+eax*2];
			__asm        mov    S_tmp_cells[0].vwptr[eax*8], 0;
	}
// LINE 253:
_T1be:
	S_XposZpos[0] = (GridFaceSize + GridFaceSize);
// LINE 254:
	S_XposZpos[1] = 0x0;
// LINE 255:
	S_XposZpos[2] = (GridFaceSize << 0x2);
// LINE 256:
	__asm        mov    eax, GridFaceSize;
	__asm        lea    eax, [eax+eax*2];
	__asm        add    eax, eax;
	__asm        mov    S_XposZpos[3], eax;
// LINE 258:
	S_XnegZpos[0] = 0x0;
// LINE 259:
	S_XnegZpos[1] = (GridFaceSize + GridFaceSize);
// LINE 260:
	__asm        mov    eax, GridFaceSize;
	__asm        lea    eax, [eax+eax*2];
	__asm        add    eax, eax;
	__asm        mov    S_XnegZpos[2], eax;
// LINE 261:
	S_XnegZpos[3] = (GridFaceSize << 0x2);
// LINE 263:
	S_XposZneg[0] = (GridFaceSize << 0x2);
// LINE 264:
	__asm        mov    eax, GridFaceSize;
	__asm        lea    eax, [eax+eax*2];
	__asm        add    eax, eax;
	__asm        mov    S_XposZneg[1], eax;
// LINE 265:
	S_XposZneg[2] = (GridFaceSize + GridFaceSize);
// LINE 266:
	S_XposZneg[3] = 0x0;
// LINE 268:
	__asm        mov    eax, GridFaceSize;
	__asm        lea    eax, [eax+eax*2];
	__asm        add    eax, eax;
	__asm        mov    S_XnegZneg[0], eax;
// LINE 269:
	S_XnegZneg[1] = (GridFaceSize << 0x2);
// LINE 270:
	S_XnegZneg[2] = 0x0;
// LINE 271:
	S_XnegZneg[3] = (GridFaceSize + GridFaceSize);
// LINE 274:
	S_local_lstart.x = 0xffc00000;
// LINE 275:
	S_local_lstart.y = 0x0;
// LINE 276:
	S_local_lstart.z = 0x0;
// LINE 277:
	S_local_rstart.x = 0x400000;
// LINE 278:
	S_local_rstart.y = 0x0;
// LINE 279:
	S_local_rstart.z = 0x0;
// LINE 281:
	__asm        mov    eax, 0x6090A8;
	__asm        add    eax, 0x18;
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 282:
	S_terr_pos.loc.z = 0x0;
	S_terr_pos.loc.y = S_terr_pos.loc.z;
	S_terr_pos.loc.x = S_terr_pos.loc.y;
// LINE 288:
	S_last_pos.x = 0x80;
// LINE 289:
	S_last_pos.y = 0x80;
// LINE 292:
	__asm        mov    eax, S_last_pos.x;
	__asm        mov    ecx, G_ViewSize;
	__asm        sar    ecx, 1;
	__asm        sub    eax, ecx;
	__asm        movsx  eax, ax;
	__asm        mov    G_grid_ulc.x, eax;
// LINE 293:
	__asm        mov    eax, S_last_pos.y;
	__asm        mov    ecx, G_ViewSize;
	__asm        sar    ecx, 1;
	__asm        sub    eax, ecx;
	__asm        movsx  eax, ax;
	__asm        mov    G_grid_ulc.y, eax;
// LINE 295:
	GridPos.loc.x = 0x0;
// LINE 296:
	GridPos.loc.z = 0x0;
// LINE 297:
	S3TerrSetGridObj();
// LINE 300:
	__asm        mov    eax, G_ViewSize;
	__asm        cdq;
	__asm        sub    eax, edx;
	__asm        sar    eax, 1;
	__asm        sub    eax, 3;
	__asm        shl    eax, 0x16;
	__asm        push   eax;
	__asm        call   VRSetBackPlane;
	__asm        add    esp, 4;
// LINE 307:
	MTArbRotMat(0x59b508, 0xc4e0000, 0x62a458);
// LINE 308:
	MTArbRotMat(0x59b508, 0x1c20000, 0x609c00);
// LINE 312:
	tempLogCityEnterExit.nType = 0x2;
// LINE 313:
	tempLogCityEnterExit.nMissionID = 0x0;
// LINE 314:
	tempLogCityEnterExit.nEnterOrExit = 0x0;
// LINE 315:
	__asm        cmp    CityNameString, 0;
	__asm        je     _T3dd;
// LINE 316:
	strncpy(0x20, CityNameString, tempLogCityEnterExit.szCity[0]);
// LINE 317:
	__asm        jmp    _T3e8;
// LINE 318:
_T3dd:
	__asm        mov    al, ds:[0x5B5A2C];
	__asm        mov    tempLogCityEnterExit.szCity[0], al;
// LINE 319:
_T3e8:
	S3AddLogEntry(0x0, tempLogCityEnterExit.nType);
// LINE 321:
	return 0x0;
// LINE 322:
}

// FUNCTION: COPTER_D 0x0050a406
void S3CityDeInit() {
	/*bp-0x30*/  /*packed*/ struct tagLogCityEnterExit tempLogCityEnterExit; // 0x30 bytes

// LINE 338:
	tempLogCityEnterExit.nType = 0x2;
// LINE 339:
	tempLogCityEnterExit.nMissionID = 0x0;
// LINE 340:
	tempLogCityEnterExit.nEnterOrExit = 0x1;
// LINE 341:
	__asm        cmp    CityNameString, 0;
	__asm        je     _T44;
// LINE 342:
	strncpy(0x20, CityNameString, tempLogCityEnterExit.szCity[0]);
// LINE 343:
	__asm        jmp    _T4c;
// LINE 344:
_T44:
	__asm        mov    al, ds:[0x5B5A30];
	__asm        mov    tempLogCityEnterExit.szCity[0], al;
// LINE 345:
_T4c:
	S3AddLogEntry(0x0, tempLogCityEnterExit.nType);
// LINE 348:
	__asm        cmp    S_S2CityAlloc_Count, 0;
	__asm        jle    __RETURN;
// LINE 350:
	S_S2CityAlloc_Count--;
// LINE 352:
__RETURN:
}

// FUNCTION: COPTER_D 0x0050a478
void VRSetBackPlane(int32_t farZ) {
	/*bp-0x4*/   /*packed*/ struct VRBmpHdr *bhdr;
	/*bp-0x8*/   long i;
	/*bp-0xc*/   int32_t fogpct;

// LINE 369:
	bhdr = VRInt2BmpHdr(0x1, G_restex);
// LINE 370:
	G_smokey = bhdr;
// LINE 371:
	G_smokey += ((bhdr->info.height << 0x2) + 0xc);
// LINE 373:
	__asm        mov    eax, farZ;
	__asm        push   eax;
	__asm        call   0x004D7B70;
	__asm        add    esp, 4;
// LINE 374:
	__asm        cmp    G_daynight, 0;
	__asm        jne    _T90;
// LINE 376:
	__asm        push   0xF0000;
	__asm        push   0x640000;
	__asm        mov    eax, farZ;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    fogpct, eax;
// LINE 377:
	bhdr = VRInt2BmpHdr(0x1, G_restex);
// LINE 378:
	i = 0x3a3a3a3a;
// LINE 380:
	__asm        jmp    _Tcc;
// LINE 383:
_T90:
	__asm        push   0xF0000;
	__asm        push   0x640000;
	__asm        mov    eax, farZ;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    fogpct, eax;
// LINE 384:
	bhdr = VRInt2BmpHdr(0x29, G_restex);
// LINE 385:
	i = 0x31313131;
// LINE 387:
_Tcc:
	__asm        cmp    G_artmode, 1;
	__asm        jne    _Te0;
// LINE 388:
	i = 0x0;
// LINE 390:
_Te0:
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   0x004D682B;
	__asm        add    esp, 4;
// LINE 393:
	G_ClearColor = (i & 0xff);
// LINE 410:
	G_fogbase = bhdr;
// LINE 411:
	G_fogbase += ((bhdr->info.height << 0x2) + 0xc);
// LINE 412:
	G_fog = G_fogbase;
// LINE 414:
	G_fogZ1 = (farZ - fogpct);
// LINE 415:
	G_deltafogZ = ((farZ + 0x10000) - G_fogZ1);
// LINE 416:
	G_plotglob = (G_fogZ1 - fogpct);
// LINE 417:
	__asm        cmp    G_plotglob, 0x2580000;
	__asm        jge    __RETURN;
// LINE 418:
	G_plotglob = 0x2580000;
// LINE 419:
__RETURN:
}

// FUNCTION: COPTER_D 0x0050a5df
short S3CityInitOmap() {
	/*bp-0x4*/   long obj1user;
	/*bp-0x8*/   short flags;
	/*bp-0xc*/   short size;
	/*bp-0x10*/  int32_t obj2;
	/*bp-0x14*/  long objcount;
	/*bp-0x18*/  long obj2user;
	/*bp-0x1c*/  long x;
	/*bp-0x20*/  short i;
	/*bp-0x24*/  long y;
	/*bp-0x28*/  long j;
	/*bp-0x2c*/  long k;
	/*bp-0x30*/  short alt;
	/*bp-0x34*/  /*packed*/ struct _CELL_INFO *cptr;
	/*bp-0x38*/  int32_t obj;
	/*bp-0x3c*/  /*packed*/ struct _STOBJ_INST *sptr;
	/*bp-0x40*/  long tile;

// LINE 462:
	__asm        mov    edi, 0x67ED30;
	__asm        xor    eax, eax;
	__asm        mov    ecx, 0x10000;
	__asm        rep stosd;
// LINE 467:
_FOR_23:
	for (x = 0x0; (x < 0x80); x++) {
		// LINE 469:
		_FOR_3f:
			for (y = 0x0; (y < 0x80); y++) {
				// LINE 473:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        cmp    G_omap[0][0][ecx+eax*4], 0;
					__asm        je     _T76;
				// LINE 474:
					__asm        jmp    _FOR_NEXT_3f;
				// LINE 477:
				_T76:
					__asm        cmp    G_helibase_found, 0;
					__asm        jne    _Tc3;

					__asm        mov    eax, x;
					__asm        mov    eax, ZoneMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    dl, 0xF;
					__asm        cmp    dl, 8;
					__asm        jne    _Tc3;
				// LINE 479:
					S3CityCreateHeliBase(y, x);
				// LINE 480:
					__asm        cmp    G_helibase_found, 1;
					__asm        jne    _Tc3;
				// LINE 481:
					__asm        jmp    _FOR_NEXT_3f;
				// LINE 485:
				_Tc3:
					objcount = 0x1;
				// LINE 488:
					flags = 0x0;
				// LINE 491:
					obj1user = 0x4;
				// LINE 492:
					obj2user = 0x10;
				// LINE 495:
					__asm        mov    eax, x;
					__asm        mov    eax, BuildMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        mov    tile, edx;
				// LINE 498:
					__asm        mov    eax, tile;
					__asm        push   eax;
					__asm        call   S2TileSize;
					__asm        add    esp, 4;
					__asm        mov    size, ax;
				// LINE 501:
					alt = GetAltitude(y, x);
				// LINE 503:
					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        cmp    edx, 0xD;
					__asm        je     _T14d;

					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        cmp    edx, 0xE;
					__asm        jne    _T151;
				// LINE 504:
				_T14d:
					alt++;
				// LINE 505:
				_T151:
					__asm        movsx  eax, alt;
					__asm        shl    eax, 5;
					__asm        add    eax, 0x20;
					__asm        mov    alt, ax;
				// LINE 508:
					__asm        cmp    tile, 0;
					__asm        jne    _T173;
				// LINE 510:
					__asm        jmp    _FOR_NEXT_3f;
				// LINE 512:
					__asm        jmp    _T3814;
				_T173:
					__asm        cmp    tile, 4;
					__asm        jg     _T199;
				// LINE 514:
					__asm        push   0x14F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 515:
					obj1user = 0x400;
				// LINE 518:
					__asm        jmp    _T3814;
				_T199:
					__asm        cmp    tile, 0x1D;
					__asm        jge    _T5be;
				// LINE 520:
					__asm        mov    eax, tile;
					__asm        mov    [ebp-0x44], eax;
					__asm        jmp    _T545;
				// LINE 526:
				_T1ae:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 527:
					__asm        push   0x10D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 528:
					obj1user = 0x8;
				// LINE 529:
					__asm        jmp    _T5b9;
				// LINE 531:
				_T1e3:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 532:
					__asm        push   0x10E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 533:
					obj1user = 0x8;
				// LINE 534:
					__asm        jmp    _T5b9;
				// LINE 536:
				_T218:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 537:
					__asm        push   0x10F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 538:
					obj1user = 0x8;
				// LINE 539:
					__asm        jmp    _T5b9;
				// LINE 541:
				_T24d:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 542:
					__asm        push   0x110;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 543:
					obj1user = 0x8;
				// LINE 544:
					__asm        jmp    _T5b9;
				// LINE 546:
				_T282:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 547:
					__asm        push   0x111;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 548:
					obj1user = 0x8;
				// LINE 549:
					__asm        jmp    _T5b9;
				// LINE 551:
				_T2b7:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 552:
					__asm        push   0x112;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 553:
					obj1user = 0x8;
				// LINE 554:
					__asm        jmp    _T5b9;
				// LINE 556:
				_T2ec:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 557:
					__asm        push   0x113;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 558:
					obj1user = 0x8;
				// LINE 559:
					__asm        jmp    _T5b9;
				// LINE 561:
				_T321:
					alt = S3CityLowestTerrAlt(reinterpret_cast<int16_t>(size), y, x);
				// LINE 562:
					__asm        push   0x143;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 563:
					obj1user = 0x8;
				// LINE 564:
					__asm        jmp    _T5b9;
				// LINE 566:
				_T356:
					__asm        push   0x55;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 567:
					obj1user = 0x80;
				// LINE 568:
					__asm        or     obj1user, 0x200;
				// LINE 569:
					__asm        jmp    _T5b9;
				// LINE 571:
				_T376:
					__asm        push   0x56;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 572:
					obj1user = 0x80;
				// LINE 573:
					__asm        or     obj1user, 0x200;
				// LINE 574:
					__asm        jmp    _T5b9;
				// LINE 576:
				_T396:
					__asm        push   0x57;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 577:
					obj1user = 0x80;
				// LINE 578:
					__asm        or     obj1user, 0x200;
				// LINE 579:
					__asm        jmp    _T5b9;
				// LINE 581:
				_T3b6:
					__asm        push   0x58;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 582:
					obj1user = 0x80;
				// LINE 583:
					__asm        or     obj1user, 0x200;
				// LINE 584:
					__asm        jmp    _T5b9;
				// LINE 586:
				_T3d6:
					__asm        push   0x59;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 587:
					obj1user = 0x80;
				// LINE 588:
					__asm        or     obj1user, 0x200;
				// LINE 589:
					__asm        jmp    _T5b9;
				// LINE 591:
				_T3f6:
					__asm        push   0x5A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 592:
					obj1user = 0x80;
				// LINE 593:
					__asm        or     obj1user, 0x200;
				// LINE 594:
					__asm        jmp    _T5b9;
				// LINE 596:
				_T416:
					__asm        push   0x5B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 597:
					obj1user = 0x80;
				// LINE 598:
					__asm        or     obj1user, 0x200;
				// LINE 599:
					__asm        jmp    _T5b9;
				// LINE 601:
				_T436:
					__asm        push   0x5C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 602:
					obj1user = 0x80;
				// LINE 603:
					__asm        or     obj1user, 0x200;
				// LINE 604:
					__asm        jmp    _T5b9;
				// LINE 606:
				_T456:
					__asm        push   0x5D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 607:
					obj1user = 0x80;
				// LINE 608:
					__asm        or     obj1user, 0x200;
				// LINE 609:
					__asm        jmp    _T5b9;
				// LINE 611:
				_T476:
					__asm        push   0x5E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 612:
					obj1user = 0x80;
				// LINE 613:
					__asm        or     obj1user, 0x200;
				// LINE 614:
					__asm        jmp    _T5b9;
				// LINE 616:
				_T496:
					__asm        push   0x5F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 617:
					obj1user = 0x80;
				// LINE 618:
					__asm        or     obj1user, 0x200;
				// LINE 619:
					__asm        jmp    _T5b9;
				// LINE 621:
				_T4b6:
					__asm        push   0x60;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 622:
					obj1user = 0x80;
				// LINE 623:
					__asm        or     obj1user, 0x200;
				// LINE 624:
					__asm        jmp    _T5b9;
				// LINE 626:
				_T4d6:
					__asm        push   0x61;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 627:
					obj1user = 0x80;
				// LINE 628:
					__asm        or     obj1user, 0x200;
				// LINE 629:
					__asm        jmp    _T5b9;
				// LINE 631:
				_T4f6:
					__asm        push   0x62;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 632:
					obj1user = 0x80;
				// LINE 633:
					__asm        or     obj1user, 0x200;
				// LINE 634:
					__asm        jmp    _T5b9;
				// LINE 636:
				_T516:
					__asm        push   0x63;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 637:
					obj1user = 0x80;
				// LINE 638:
					__asm        or     obj1user, 0x200;
				// LINE 639:
					__asm        jmp    _T5b9;
				// LINE 644:
					__asm        jmp    _FOR_NEXT_3f;
				// LINE 645:
					__asm        jmp    _T5b9;
				// LINE 646:
					__asm        jmp    _T5b9;
				_T545:
					__asm        sub    dword ptr [ebp-0x44], 6;
					__asm        cmp    dword ptr [ebp-0x44], 0x16;
					__asm        ja     _FOR_NEXT_3f;

					__asm        mov    eax, [ebp-0x44];
					__asm        jmp    _Switch_55d[0][eax*4];
				// Switch pointers:
				//   _T1ae
				//   _T1e3
				//   _T218
				//   _T24d
				//   _T282
				//   _T2b7
				//   _T2ec
				//   _T321
				//   _T356
				//   _T376
				//   _T396
				//   _T3b6
				//   _T3d6
				//   _T3f6
				//   _T416
				//   _T436
				//   _T456
				//   _T476
				//   _T496
				//   _T4b6
				//   _T4d6
				//   _T4f6
				//   _T516
				// LINE 649:
				_T5b9:
					__asm        jmp    _T3814;
				_T5be:
					__asm        cmp    tile, 0x70;
					__asm        jge    _T1816;
				// LINE 653:
					__asm        mov    eax, tile;
					__asm        mov    [ebp-0x48], eax;
					__asm        jmp    _T16bd;
				// LINE 659:
				_T5d3:
					obj1user = 0x20;
				// LINE 660:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T60a;
				// LINE 662:
					__asm        push   0x3B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 663:
					flags = 0x1;
				// LINE 665:
					__asm        jmp    _T617;
				// LINE 667:
				_T60a:
					__asm        push   0x1D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 669:
				_T617:
					__asm        jmp    _T1811;
				// LINE 671:
				_T61c:
					obj1user = 0x20;
				// LINE 672:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T653;
				// LINE 674:
					__asm        push   0x3C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 675:
					flags = 0x1;
				// LINE 677:
					__asm        jmp    _T660;
				// LINE 679:
				_T653:
					__asm        push   0x1E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 681:
				_T660:
					__asm        jmp    _T1811;
				// LINE 683:
				_T665:
					__asm        push   0x1F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 684:
					obj1user = 0x20;
				// LINE 685:
					__asm        jmp    _T1811;
				// LINE 687:
				_T67e:
					__asm        push   0x20;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 688:
					obj1user = 0x20;
				// LINE 689:
					__asm        jmp    _T1811;
				// LINE 691:
				_T697:
					__asm        push   0x21;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 692:
					obj1user = 0x20;
				// LINE 693:
					__asm        jmp    _T1811;
				// LINE 695:
				_T6b0:
					__asm        push   0x22;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 696:
					obj1user = 0x20;
				// LINE 697:
					__asm        jmp    _T1811;
				// LINE 699:
				_T6c9:
					obj1user = 0x20;
				// LINE 700:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T700;
				// LINE 702:
					__asm        push   0x3D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 703:
					flags = 0x1;
				// LINE 705:
					__asm        jmp    _T70d;
				// LINE 707:
				_T700:
					__asm        push   0x23;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 709:
				_T70d:
					__asm        jmp    _T1811;
				// LINE 711:
				_T712:
					obj1user = 0x20;
				// LINE 712:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T749;
				// LINE 714:
					__asm        push   0x3E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 715:
					flags = 0x1;
				// LINE 717:
					__asm        jmp    _T756;
				// LINE 719:
				_T749:
					__asm        push   0x24;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 721:
				_T756:
					__asm        jmp    _T1811;
				// LINE 723:
				_T75b:
					obj1user = 0x20;
				// LINE 724:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T792;
				// LINE 726:
					__asm        push   0x3F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 727:
					flags = 0x1;
				// LINE 729:
					__asm        jmp    _T79f;
				// LINE 731:
				_T792:
					__asm        push   0x25;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 733:
				_T79f:
					__asm        jmp    _T1811;
				// LINE 735:
				_T7a4:
					obj1user = 0x20;
				// LINE 736:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T7db;
				// LINE 738:
					__asm        push   0x40;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 739:
					flags = 0x1;
				// LINE 741:
					__asm        jmp    _T7e8;
				// LINE 743:
				_T7db:
					__asm        push   0x26;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 745:
				_T7e8:
					__asm        jmp    _T1811;
				// LINE 747:
				_T7ed:
					obj1user = 0x20;
				// LINE 748:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T824;
				// LINE 750:
					__asm        push   0x41;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 751:
					flags = 0x1;
				// LINE 753:
					__asm        jmp    _T831;
				// LINE 755:
				_T824:
					__asm        push   0x27;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 757:
				_T831:
					__asm        jmp    _T1811;
				// LINE 759:
				_T836:
					obj1user = 0x20;
				// LINE 760:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T86d;
				// LINE 762:
					__asm        push   0x42;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 763:
					flags = 0x1;
				// LINE 765:
					__asm        jmp    _T87a;
				// LINE 767:
				_T86d:
					__asm        push   0x28;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 769:
				_T87a:
					__asm        jmp    _T1811;
				// LINE 771:
				_T87f:
					obj1user = 0x20;
				// LINE 772:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T8b6;
				// LINE 774:
					__asm        push   0x43;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 775:
					flags = 0x1;
				// LINE 777:
					__asm        jmp    _T8c3;
				// LINE 779:
				_T8b6:
					__asm        push   0x29;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 781:
				_T8c3:
					__asm        jmp    _T1811;
				// LINE 783:
				_T8c8:
					obj1user = 0x20;
				// LINE 784:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T8ff;
				// LINE 786:
					__asm        push   0x44;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 787:
					flags = 0x1;
				// LINE 789:
					__asm        jmp    _T90c;
				// LINE 791:
				_T8ff:
					__asm        push   0x2A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 793:
				_T90c:
					__asm        jmp    _T1811;
				// LINE 795:
				_T911:
					obj1user = 0x20;
				// LINE 796:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _T948;
				// LINE 798:
					__asm        push   0x45;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 799:
					flags = 0x1;
				// LINE 801:
					__asm        jmp    _T955;
				// LINE 803:
				_T948:
					__asm        push   0x2B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 805:
				_T955:
					__asm        jmp    _T1811;
				// LINE 810:
				_T95a:
					__asm        push   0x2C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 811:
					obj1user = 0x40;
				// LINE 812:
					__asm        jmp    _T1811;
				// LINE 816:
				_T973:
					__asm        push   0x2D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 817:
					obj1user = 0x40;
				// LINE 818:
					__asm        jmp    _T1811;
				// LINE 820:
				_T98c:
					__asm        push   0x2E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 821:
					obj1user = 0x40;
				// LINE 822:
					__asm        jmp    _T1811;
				// LINE 824:
				_T9a5:
					__asm        push   0x2F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 825:
					obj1user = 0x40;
				// LINE 826:
					__asm        jmp    _T1811;
				// LINE 828:
				_T9be:
					__asm        push   0x30;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 829:
					obj1user = 0x40;
				// LINE 830:
					__asm        jmp    _T1811;
				// LINE 832:
				_T9d7:
					__asm        push   0x31;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 833:
					obj1user = 0x40;
				// LINE 834:
					__asm        jmp    _T1811;
				// LINE 836:
				_T9f0:
					__asm        push   0x32;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 837:
					obj1user = 0x40;
				// LINE 838:
					__asm        jmp    _T1811;
				// LINE 840:
				_Ta09:
					__asm        push   0x33;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 841:
					obj1user = 0x40;
				// LINE 842:
					__asm        jmp    _T1811;
				// LINE 844:
				_Ta22:
					__asm        push   0x34;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 845:
					obj1user = 0x40;
				// LINE 846:
					__asm        jmp    _T1811;
				// LINE 848:
				_Ta3b:
					__asm        push   0x35;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 849:
					obj1user = 0x40;
				// LINE 850:
					__asm        jmp    _T1811;
				// LINE 852:
				_Ta54:
					__asm        push   0x36;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 853:
					obj1user = 0x40;
				// LINE 854:
					__asm        jmp    _T1811;
				// LINE 856:
				_Ta6d:
					__asm        push   0x37;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 857:
					obj1user = 0x40;
				// LINE 858:
					__asm        jmp    _T1811;
				// LINE 860:
				_Ta86:
					__asm        push   0x38;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 861:
					obj1user = 0x40;
				// LINE 862:
					__asm        jmp    _T1811;
				// LINE 864:
				_Ta9f:
					__asm        push   0x39;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 865:
					obj1user = 0x40;
				// LINE 866:
					__asm        jmp    _T1811;
				// LINE 868:
				_Tab8:
					__asm        push   0x3A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 869:
					obj1user = 0x40;
				// LINE 870:
					__asm        jmp    _T1811;
				// LINE 873:
				_Tad1:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _Tb04;
				// LINE 875:
					__asm        push   0x128;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 876:
					flags = 0x1;
				// LINE 878:
					__asm        jmp    _Tb14;
				// LINE 880:
				_Tb04:
					__asm        push   0x17F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 882:
				_Tb14:
					obj1user = 0x20;
				// LINE 883:
					__asm        or     obj1user, 0x200;
				// LINE 884:
					__asm        jmp    _T1811;
				// LINE 886:
				_Tb27:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _Tb5a;
				// LINE 888:
					__asm        push   0x129;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 889:
					flags = 0x1;
				// LINE 891:
					__asm        jmp    _Tb6a;
				// LINE 893:
				_Tb5a:
					__asm        push   0x180;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 895:
				_Tb6a:
					obj1user = 0x20;
				// LINE 896:
					__asm        or     obj1user, 0x200;
				// LINE 897:
					__asm        jmp    _T1811;
				// LINE 900:
				_Tb7d:
					objcount = 0x2;
				// LINE 901:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _Tbb4;
				// LINE 903:
					__asm        push   0x3B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 904:
					flags = 0x1;
				// LINE 906:
					__asm        jmp    _Tbc1;
				// LINE 908:
				_Tbb4:
					__asm        push   0x1D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 910:
				_Tbc1:
					__asm        push   0x2D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj2, eax;
				// LINE 911:
					__asm        jmp    _T1811;
				// LINE 913:
				_Tbd3:
					objcount = 0x2;
				// LINE 914:
					__asm        mov    eax, y;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        push   eax;
					__asm        call   S3CityIsCellFlat;
					__asm        add    esp, 8;
					__asm        test   eax, eax;
					__asm        je     _Tc0a;
				// LINE 916:
					__asm        push   0x3C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 917:
					flags = 0x1;
				// LINE 919:
					__asm        jmp    _Tc17;
				// LINE 921:
				_Tc0a:
					__asm        push   0x1E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 923:
				_Tc17:
					__asm        push   0x2C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj2, eax;
				// LINE 924:
					__asm        jmp    _T1811;
				// LINE 927:
				_Tc29:
					__asm        push   0x17D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 928:
					obj1user = 0x40;
				// LINE 929:
					__asm        jmp    _T1811;
				// LINE 931:
				_Tc45:
					__asm        push   0x17E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 932:
					obj1user = 0x40;
				// LINE 933:
					__asm        jmp    _T1811;
				// LINE 937:
				_Tc61:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 938:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x64;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 939:
					__asm        or     obj1user, 0x200;
				// LINE 940:
					__asm        jmp    _T1811;
				// LINE 942:
				_Tc9c:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 943:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x66;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 944:
					__asm        or     obj1user, 0x200;
				// LINE 945:
					__asm        jmp    _T1811;
				// LINE 947:
				_Tcd7:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 948:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x68;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 949:
					__asm        or     obj1user, 0x200;
				// LINE 950:
					__asm        jmp    _T1811;
				// LINE 952:
				_Td12:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 953:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x6A;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 954:
					__asm        or     obj1user, 0x200;
				// LINE 955:
					__asm        jmp    _T1811;
				// LINE 957:
				_Td4d:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 958:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x6C;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 959:
					__asm        or     obj1user, 0x200;
				// LINE 960:
					__asm        jmp    _T1811;
				// LINE 962:
				_Td88:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 963:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x6E;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 964:
					__asm        or     obj1user, 0x200;
				// LINE 965:
					__asm        jmp    _T1811;
				// LINE 967:
				_Tdc3:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 968:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x70;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 969:
					__asm        or     obj1user, 0x200;
				// LINE 970:
					__asm        jmp    _T1811;
				// LINE 973:
				_Tdfe:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 974:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x72;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 975:
					__asm        or     obj1user, 0x200;
				// LINE 976:
					__asm        jmp    _T1811;
				// LINE 978:
				_Te39:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 979:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x74;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 980:
					__asm        or     obj1user, 0x200;
				// LINE 981:
					__asm        jmp    _T1811;
				// LINE 983:
				_Te74:
					size = 0x1;
				// LINE 984:
					objcount = 0x1;
				// LINE 985:
					__asm        push   0xF7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 986:
					__asm        or     obj1user, 0x200;
				// LINE 987:
					__asm        jmp    _T1811;
				// LINE 989:
				_Te9d:
					size = 0x1;
				// LINE 990:
					objcount = 0x1;
				// LINE 991:
					__asm        push   0xF8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 992:
					__asm        or     obj1user, 0x200;
				// LINE 993:
					__asm        jmp    _T1811;
				// LINE 995:
				_Tec6:
					size = 0x1;
				// LINE 996:
					objcount = 0x1;
				// LINE 997:
					__asm        push   0xF9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 998:
					__asm        or     obj1user, 0x200;
				// LINE 999:
					__asm        jmp    _T1811;
				// LINE 1001:
				_Teef:
					size = 0x1;
				// LINE 1002:
					objcount = 0x1;
				// LINE 1003:
					__asm        push   0xFA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1004:
					__asm        or     obj1user, 0x200;
				// LINE 1005:
					__asm        jmp    _T1811;
				// LINE 1007:
				_Tf18:
					size = 0x1;
				// LINE 1008:
					objcount = 0x2;
				// LINE 1009:
					__asm        push   0xF7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1010:
					__asm        push   0x2D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj2, eax;
				// LINE 1011:
					__asm        jmp    _T1811;
				// LINE 1013:
				_Tf47:
					size = 0x1;
				// LINE 1014:
					objcount = 0x2;
				// LINE 1015:
					__asm        push   0xF8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1016:
					__asm        push   0x2C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj2, eax;
				// LINE 1017:
					__asm        jmp    _T1811;
				// LINE 1019:
				_Tf76:
					size = 0x1;
				// LINE 1020:
					objcount = 0x1;
				// LINE 1021:
					__asm        push   0xF7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1022:
					__asm        or     obj1user, 0x200;
				// LINE 1024:
					__asm        jmp    _T1811;
				// LINE 1026:
				_Tf9f:
					size = 0x1;
				// LINE 1027:
					objcount = 0x1;
				// LINE 1028:
					__asm        push   0xF8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1029:
					__asm        or     obj1user, 0x200;
				// LINE 1031:
					__asm        jmp    _T1811;
				// LINE 1033:
				_Tfc8:
					objcount = 0x1;
				// LINE 1034:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1035:
					__asm        movsx  eax, i;
					__asm        add    eax, 0xFB;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1036:
					__asm        jmp    _T1811;
				// LINE 1038:
				_T1005:
					objcount = 0x1;
				// LINE 1039:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1040:
					__asm        movsx  eax, i;
					__asm        add    eax, 0xFD;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1041:
					__asm        jmp    _T1811;
				// LINE 1043:
				_T1042:
					objcount = 0x1;
				// LINE 1044:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1045:
					__asm        movsx  eax, i;
					__asm        add    eax, 0xFF;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1046:
					__asm        jmp    _T1811;
				// LINE 1048:
				_T107f:
					objcount = 0x1;
				// LINE 1049:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1050:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x101;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1051:
					__asm        jmp    _T1811;
				// LINE 1053:
				_T10bc:
					objcount = 0x1;
				// LINE 1054:
					__asm        push   0x103;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1056:
					__asm        mov    eax, y;
					__asm        inc    eax;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        inc    eax;
					__asm        push   eax;
					__asm        call   GetAltitude;
					__asm        add    esp, 8;
					__asm        mov    alt, ax;
				// LINE 1058:
					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[1][eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx+1];
					__asm        cmp    edx, 0xD;
					__asm        je     _T1121;

					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[1][eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx+1];
					__asm        cmp    edx, 0xE;
					__asm        jne    _T1125;
				// LINE 1059:
				_T1121:
					alt++;
				// LINE 1060:
				_T1125:
					__asm        movsx  eax, alt;
					__asm        shl    eax, 5;
					__asm        add    eax, 0x20;
					__asm        mov    alt, ax;
				// LINE 1061:
					__asm        jmp    _T1811;
				// LINE 1063:
				_T1138:
					objcount = 0x1;
				// LINE 1064:
					__asm        push   0x104;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1066:
					__asm        mov    eax, y;
					__asm        inc    eax;
					__asm        push   eax;
					__asm        mov    eax, x;
					__asm        inc    eax;
					__asm        push   eax;
					__asm        call   GetAltitude;
					__asm        add    esp, 8;
					__asm        mov    alt, ax;
				// LINE 1068:
					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[1][eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx+1];
					__asm        cmp    edx, 0xD;
					__asm        je     _T119d;

					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[1][eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx+1];
					__asm        cmp    edx, 0xE;
					__asm        jne    _T11a1;
				// LINE 1069:
				_T119d:
					alt++;
				// LINE 1070:
				_T11a1:
					__asm        movsx  eax, alt;
					__asm        shl    eax, 5;
					__asm        add    eax, 0x20;
					__asm        mov    alt, ax;
				// LINE 1071:
					__asm        jmp    _T1811;
				// LINE 1073:
				_T11b4:
					objcount = 0x1;
				// LINE 1074:
					__asm        push   0x105;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1075:
					__asm        jmp    _T1811;
				// LINE 1077:
				_T11d0:
					objcount = 0x1;
				// LINE 1078:
					__asm        push   0x106;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1079:
					__asm        jmp    _T1811;
				// LINE 1081:
				_T11ec:
					objcount = 0x1;
				// LINE 1082:
					__asm        push   0x107;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1083:
					__asm        or     obj1user, 0x200;
				// LINE 1084:
					__asm        jmp    _T1811;
				// LINE 1086:
				_T120f:
					objcount = 0x1;
				// LINE 1087:
					__asm        push   0x108;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1088:
					__asm        or     obj1user, 0x200;
				// LINE 1089:
					__asm        jmp    _T1811;
				// LINE 1091:
				_T1232:
					objcount = 0x1;
				// LINE 1092:
					__asm        push   0x109;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1093:
					__asm        or     obj1user, 0x200;
				// LINE 1094:
					__asm        jmp    _T1811;
				// LINE 1096:
				_T1255:
					objcount = 0x1;
				// LINE 1097:
					__asm        push   0x10A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1098:
					__asm        or     obj1user, 0x200;
				// LINE 1099:
					__asm        jmp    _T1811;
				// LINE 1101:
				_T1278:
					objcount = 0x1;
				// LINE 1102:
					__asm        push   0x10B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1103:
					__asm        or     obj1user, 0x200;
				// LINE 1104:
					__asm        jmp    _T1811;
				// LINE 1107:
				_T129b:
					objcount = 0x1;
				// LINE 1108:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1109:
					__asm        movsx  eax, i;
					__asm        add    eax, 0x114;
					__asm        push   eax;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1110:
					__asm        or     obj1user, 0x200;
				// LINE 1111:
					__asm        jmp    _T1811;
				// LINE 1121:
				_T12df:
					__asm        push   0x178;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1122:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 1123:
					sptr = S2Alloc(0x10, G_citymempool);
				// LINE 1124:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        dec    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 1126:
					__asm        mov    eax, x;
					__asm        dec    eax;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FE0;
					__asm        mov    i, ax;
				// LINE 1127:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 1128:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x20;
					__asm        mov    i, ax;
				// LINE 1129:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 1130:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 1131:
					__asm        mov    ax, size;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+8], ax;
				// LINE 1132:
					cptr->flags = 0x0;
				// LINE 1133:
					cptr->ctr = 0x0;
				// LINE 1134:
					cptr->stptr = sptr;
				// LINE 1135:
					cptr->dyptr = 0x0;
				// LINE 1137:
					sptr->next = 0x0;
				// LINE 1138:
					sptr->mesh = obj;
				// LINE 1139:
					sptr->user1 = 0x0;
				// LINE 1140:
					sptr->user2 = 0x0;
				// LINE 1141:
					__asm        jmp    _T1811;
				// LINE 1143:
				_T13d4:
					__asm        push   0x17A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1144:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 1145:
					sptr = S2Alloc(0x10, G_citymempool);
				// LINE 1146:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 1148:
					__asm        mov    eax, x;
					__asm        inc    eax;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FE0;
					__asm        mov    i, ax;
				// LINE 1149:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 1150:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x20;
					__asm        mov    i, ax;
				// LINE 1151:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 1152:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 1153:
					__asm        mov    ax, size;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+8], ax;
				// LINE 1154:
					cptr->flags = 0x0;
				// LINE 1155:
					cptr->ctr = 0x0;
				// LINE 1156:
					cptr->stptr = sptr;
				// LINE 1157:
					cptr->dyptr = 0x0;
				// LINE 1159:
					sptr->next = 0x0;
				// LINE 1160:
					sptr->mesh = obj;
				// LINE 1161:
					sptr->user1 = 0x0;
				// LINE 1162:
					sptr->user2 = 0x0;
				// LINE 1163:
					__asm        jmp    _T1811;
				// LINE 1165:
				_T14c9:
					__asm        push   0x179;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1166:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 1167:
					sptr = S2Alloc(0x10, G_citymempool);
				// LINE 1168:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        dec    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 1170:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FE0;
					__asm        mov    i, ax;
				// LINE 1171:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 1172:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        dec    ecx;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x20;
					__asm        mov    i, ax;
				// LINE 1173:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 1174:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 1175:
					__asm        mov    ax, size;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+8], ax;
				// LINE 1176:
					cptr->flags = 0x0;
				// LINE 1177:
					cptr->ctr = 0x0;
				// LINE 1178:
					cptr->stptr = sptr;
				// LINE 1179:
					cptr->dyptr = 0x0;
				// LINE 1181:
					sptr->next = 0x0;
				// LINE 1182:
					sptr->mesh = obj;
				// LINE 1183:
					sptr->user1 = 0x0;
				// LINE 1184:
					sptr->user2 = 0x0;
				// LINE 1185:
					__asm        jmp    _T1811;
				// LINE 1187:
				_T15be:
					__asm        push   0x17B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1188:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 1189:
					sptr = S2Alloc(0x10, G_citymempool);
				// LINE 1190:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 1192:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FE0;
					__asm        mov    i, ax;
				// LINE 1193:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 1194:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x20;
					__asm        mov    i, ax;
				// LINE 1195:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 1196:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 1197:
					__asm        mov    ax, size;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+8], ax;
				// LINE 1198:
					cptr->flags = 0x0;
				// LINE 1199:
					cptr->ctr = 0x0;
				// LINE 1200:
					cptr->stptr = sptr;
				// LINE 1201:
					cptr->dyptr = 0x0;
				// LINE 1203:
					sptr->next = 0x0;
				// LINE 1204:
					sptr->mesh = obj;
				// LINE 1205:
					sptr->user1 = 0x0;
				// LINE 1206:
					sptr->user2 = 0x0;
				// LINE 1207:
					__asm        jmp    _T1811;
				// LINE 1209:
				_T16b3:
					__asm        jmp    _FOR_NEXT_3f;
				// LINE 1210:
					__asm        jmp    _T1811;
				_T16bd:
					__asm        sub    dword ptr [ebp-0x48], 0x1D;
					__asm        cmp    dword ptr [ebp-0x48], 0x4E;
					__asm        ja     _FOR_NEXT_3f;

					__asm        mov    eax, [ebp-0x48];
					__asm        jmp    _Switch_16d5[0][eax*4];
				// Switch pointers:
				//   _T5d3
				//   _T61c
				//   _T665
				//   _T67e
				//   _T697
				//   _T6b0
				//   _T6c9
				//   _T712
				//   _T75b
				//   _T7a4
				//   _T7ed
				//   _T836
				//   _T87f
				//   _T8c8
				//   _T911
				//   _T95a
				//   _T973
				//   _T9f0
				//   _Ta09
				//   _Ta22
				//   _Ta3b
				//   _T98c
				//   _T9a5
				//   _T9be
				//   _T9d7
				//   _Ta54
				//   _Ta6d
				//   _Ta86
				//   _Ta9f
				//   _Tab8
				//   _T973
				//   _T95a
				//   _T973
				//   _T95a
				//   _T12df
				//   _T14c9
				//   _T13d4
				//   _T15be
				//   _Tad1
				//   _Tb27
				//   _Tb7d
				//   _Tbd3
				//   _Tc29
				//   _Tc45
				//   _Te74
				//   _Te9d
				//   _Tec6
				//   _Teef
				//   _Tf18
				//   _Tf47
				//   _Tf76
				//   _Tf9f
				//   _Tc9c
				//   _Tcd7
				//   _Td12
				//   _Td4d
				//   _Td88
				//   _Tdc3
				//   _Tc61
				//   _Tc61
				//   _T16b3
				//   _Tdfe
				//   _Tdfe
				//   _Te39
				//   _Tfc8
				//   _T1005
				//   _T1042
				//   _T107f
				//   _T10bc
				//   _T1138
				//   _T11b4
				//   _T11d0
				//   _T11ec
				//   _T120f
				//   _T1232
				//   _T1255
				//   _T1278
				//   _T129b
				//   _T129b
				// LINE 1213:
				_T1811:
					__asm        jmp    _T3814;
				// LINE 1217:
				_T1816:
					flags = 0x1;
				// LINE 1221:
					__asm        mov    eax, tile;
					__asm        mov    [ebp-0x4C], eax;
					__asm        jmp    _T35b9;
				// LINE 1224:
				_T1827:
					objcount = 0x2;
				// LINE 1225:
					__asm        push   0xAF;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1226:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1227:
					__asm        jmp    _T3814;
				// LINE 1229:
				_T185b:
					objcount = 0x1;
				// LINE 1230:
					flags = 0x0;
				// LINE 1231:
					__asm        push   0x144;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1232:
					__asm        jmp    _T3814;
				// LINE 1234:
				_T187d:
					objcount = 0x2;
				// LINE 1235:
					__asm        push   0xB0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1236:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1237:
					__asm        jmp    _T3814;
				// LINE 1239:
				_T18b1:
					objcount = 0x2;
				// LINE 1240:
					__asm        push   0xB1;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1241:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1242:
					__asm        jmp    _T3814;
				// LINE 1244:
				_T18e5:
					objcount = 0x2;
				// LINE 1245:
					__asm        push   0xB2;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1246:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1247:
					__asm        jmp    _T3814;
				// LINE 1249:
				_T1919:
					objcount = 0x2;
				// LINE 1250:
					__asm        push   0xB3;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1251:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1252:
					__asm        jmp    _T3814;
				// LINE 1254:
				_T194d:
					objcount = 0x2;
				// LINE 1255:
					__asm        push   0xB4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1256:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1257:
					__asm        jmp    _T3814;
				// LINE 1259:
				_T1981:
					objcount = 0x2;
				// LINE 1260:
					__asm        push   0xB5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1261:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1262:
					__asm        jmp    _T3814;
				// LINE 1264:
				_T19b5:
					objcount = 0x2;
				// LINE 1265:
					__asm        push   0xB6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1266:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1267:
					__asm        jmp    _T3814;
				// LINE 1269:
				_T19e9:
					objcount = 0x2;
				// LINE 1270:
					__asm        push   0xB7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1271:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1272:
					__asm        jmp    _T3814;
				// LINE 1274:
				_T1a1d:
					objcount = 0x2;
				// LINE 1275:
					__asm        push   0xB8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1276:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1277:
					__asm        jmp    _T3814;
				// LINE 1279:
				_T1a51:
					objcount = 0x2;
				// LINE 1280:
					__asm        push   0xB9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1281:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1282:
					__asm        jmp    _T3814;
				// LINE 1284:
				_T1a85:
					objcount = 0x2;
				// LINE 1285:
					__asm        push   0xBA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1286:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1287:
					__asm        jmp    _T3814;
				// LINE 1289:
				_T1ab9:
					objcount = 0x2;
				// LINE 1290:
					__asm        push   0xBB;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1291:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1292:
					__asm        jmp    _T3814;
				// LINE 1294:
				_T1aed:
					objcount = 0x2;
				// LINE 1295:
					__asm        push   0xBC;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1296:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1297:
					__asm        jmp    _T3814;
				// LINE 1299:
				_T1b21:
					objcount = 0x2;
				// LINE 1300:
					__asm        push   0xBD;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1301:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1302:
					__asm        jmp    _T3814;
				// LINE 1304:
				_T1b55:
					objcount = 0x2;
				// LINE 1305:
					__asm        push   0xBE;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1306:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1307:
					__asm        jmp    _T3814;
				// LINE 1309:
				_T1b89:
					objcount = 0x2;
				// LINE 1310:
					__asm        push   0xBF;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1311:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1312:
					__asm        jmp    _T3814;
				// LINE 1314:
				_T1bbd:
					objcount = 0x2;
				// LINE 1315:
					__asm        or     obj1user, 0x200;
				// LINE 1316:
					__asm        push   0xC0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1317:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1318:
					__asm        jmp    _T3814;
				// LINE 1320:
				_T1bf8:
					objcount = 0x2;
				// LINE 1321:
					__asm        push   0xC1;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1322:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1323:
					__asm        jmp    _T3814;
				// LINE 1325:
				_T1c2c:
					objcount = 0x2;
				// LINE 1326:
					__asm        push   0x9D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1327:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1328:
					__asm        jmp    _T3814;
				// LINE 1330:
				_T1c60:
					objcount = 0x2;
				// LINE 1331:
					__asm        or     obj1user, 0x200;
				// LINE 1332:
					__asm        push   0xC2;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1333:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1334:
					__asm        jmp    _T3814;
				// LINE 1336:
				_T1c9b:
					objcount = 0x2;
				// LINE 1337:
					__asm        push   0xC3;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1338:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1339:
					__asm        jmp    _T3814;
				// LINE 1341:
				_T1ccf:
					objcount = 0x2;
				// LINE 1342:
					__asm        push   0x9E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1343:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1344:
					__asm        jmp    _T3814;
				// LINE 1346:
				_T1d03:
					objcount = 0x2;
				// LINE 1347:
					__asm        push   5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1348:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1349:
					__asm        jmp    _T3814;
				// LINE 1351:
				_T1d34:
					objcount = 0x2;
				// LINE 1352:
					__asm        push   0x9F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1353:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1354:
					__asm        jmp    _T3814;
				// LINE 1356:
				_T1d68:
					objcount = 0x2;
				// LINE 1357:
					__asm        push   0xA0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1358:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1359:
					__asm        jmp    _T3814;
				// LINE 1361:
				_T1d9c:
					objcount = 0x2;
				// LINE 1362:
					__asm        push   0xA1;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1363:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1364:
					__asm        jmp    _T3814;
				// LINE 1366:
				_T1dd0:
					objcount = 0x2;
				// LINE 1367:
					__asm        push   0xA2;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1368:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1369:
					__asm        jmp    _T3814;
				// LINE 1371:
				_T1e04:
					objcount = 0x2;
				// LINE 1372:
					__asm        push   0xA3;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1373:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1374:
					__asm        jmp    _T3814;
				// LINE 1376:
				_T1e38:
					objcount = 0x2;
				// LINE 1377:
					__asm        push   0xA4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1378:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1379:
					__asm        jmp    _T3814;
				// LINE 1381:
				_T1e6c:
					objcount = 0x2;
				// LINE 1382:
					__asm        push   0xA5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1383:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1384:
					__asm        jmp    _T3814;
				// LINE 1386:
				_T1ea0:
					objcount = 0x2;
				// LINE 1387:
					__asm        push   0x84;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1388:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1389:
					__asm        jmp    _T3814;
				// LINE 1391:
				_T1ed4:
					objcount = 0x2;
				// LINE 1392:
					__asm        push   0x85;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1393:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1394:
					__asm        jmp    _T3814;
				// LINE 1396:
				_T1f08:
					objcount = 0x2;
				// LINE 1397:
					__asm        push   0xA7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1398:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1399:
					__asm        jmp    _T3814;
				// LINE 1401:
				_T1f3c:
					objcount = 0x2;
				// LINE 1402:
					__asm        push   0xD1;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1403:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1404:
					__asm        jmp    _T3814;
				// LINE 1406:
				_T1f70:
					objcount = 0x2;
				// LINE 1407:
					__asm        push   0xA8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1408:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1409:
					__asm        jmp    _T3814;
				// LINE 1411:
				_T1fa4:
					objcount = 0x2;
				// LINE 1412:
					__asm        push   0xD2;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1413:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1414:
					__asm        jmp    _T3814;
				// LINE 1416:
				_T1fd8:
					objcount = 0x2;
				// LINE 1417:
					__asm        push   0xD3;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1418:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1419:
					__asm        jmp    _T3814;
				// LINE 1421:
				_T200c:
					objcount = 0x2;
				// LINE 1422:
					__asm        push   0xD4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1423:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1424:
					__asm        jmp    _T3814;
				// LINE 1426:
				_T2040:
					objcount = 0x2;
				// LINE 1427:
					__asm        push   0xD5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1428:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1429:
					__asm        or     obj1user, 0x200;
				// LINE 1430:
					__asm        jmp    _T3814;
				// LINE 1432:
				_T207b:
					objcount = 0x2;
				// LINE 1433:
					__asm        push   0xD6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1434:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1435:
					__asm        or     obj1user, 0x200;
				// LINE 1436:
					__asm        jmp    _T3814;
				// LINE 1438:
				_T20b6:
					objcount = 0x2;
				// LINE 1439:
					__asm        push   0xD7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1440:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1441:
					__asm        jmp    _T3814;
				// LINE 1443:
				_T20ea:
					objcount = 0x2;
				// LINE 1444:
					__asm        push   0xD8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1445:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1446:
					__asm        jmp    _T3814;
				// LINE 1448:
				_T211e:
					objcount = 0x1;
				// LINE 1449:
					flags = 0x0;
				// LINE 1450:
					__asm        push   0xD9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1451:
					__asm        jmp    _T3814;
				// LINE 1453:
				_T2140:
					objcount = 0x1;
				// LINE 1454:
					flags = 0x0;
				// LINE 1455:
					__asm        push   0xDA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1456:
					__asm        jmp    _T3814;
				// LINE 1458:
				_T2162:
					objcount = 0x2;
				// LINE 1459:
					__asm        push   0xDB;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1460:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1461:
					__asm        or     obj1user, 0x200;
				// LINE 1462:
					__asm        jmp    _T3814;
				// LINE 1464:
				_T219d:
					objcount = 0x2;
				// LINE 1465:
					__asm        push   0xDC;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1466:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1467:
					__asm        jmp    _T3814;
				// LINE 1469:
				_T21d1:
					objcount = 0x2;
				// LINE 1470:
					__asm        push   0xDD;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1471:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1472:
					__asm        jmp    _T3814;
				// LINE 1474:
				_T2205:
					objcount = 0x2;
				// LINE 1475:
					__asm        push   0xDE;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1476:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1477:
					__asm        jmp    _T3814;
				// LINE 1479:
				_T2239:
					objcount = 0x2;
				// LINE 1480:
					__asm        push   0xDF;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1481:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1482:
					__asm        jmp    _T3814;
				// LINE 1484:
				_T226d:
					objcount = 0x2;
				// LINE 1485:
					__asm        push   0xE0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1486:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1487:
					__asm        or     obj1user, 0x200;
				// LINE 1488:
					__asm        jmp    _T3814;
				// LINE 1490:
				_T22a8:
					objcount = 0x2;
				// LINE 1491:
					__asm        push   0xE1;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1492:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1493:
					__asm        jmp    _T3814;
				// LINE 1495:
				_T22dc:
					objcount = 0x2;
				// LINE 1496:
					__asm        push   0xE2;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1497:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1498:
					__asm        jmp    _T3814;
				// LINE 1500:
				_T2310:
					objcount = 0x2;
				// LINE 1501:
					__asm        push   0xA9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1502:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1503:
					__asm        jmp    _T3814;
				// LINE 1505:
				_T2344:
					objcount = 0x2;
				// LINE 1506:
					__asm        push   0xAA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1507:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1508:
					__asm        jmp    _T3814;
				// LINE 1510:
				_T2378:
					objcount = 0x2;
				// LINE 1511:
					__asm        push   0xAB;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1512:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1513:
					__asm        jmp    _T3814;
				// LINE 1515:
				_T23ac:
					objcount = 0x2;
				// LINE 1516:
					__asm        push   0xAC;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1517:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1518:
					__asm        jmp    _T3814;
				// LINE 1520:
				_T23e0:
					objcount = 0x2;
				// LINE 1521:
					__asm        push   0xAD;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1522:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1523:
					__asm        jmp    _T3814;
				// LINE 1525:
				_T2414:
					objcount = 0x2;
				// LINE 1526:
					__asm        push   0xA6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1527:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1528:
					__asm        jmp    _T3814;
				// LINE 1530:
				_T2448:
					objcount = 0x2;
				// LINE 1531:
					__asm        push   0x86;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1532:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1533:
					__asm        jmp    _T3814;
				// LINE 1535:
				_T247c:
					objcount = 0x2;
				// LINE 1536:
					__asm        push   0x87;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1537:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1538:
					__asm        jmp    _T3814;
				// LINE 1540:
				_T24b0:
					objcount = 0x2;
				// LINE 1541:
					__asm        push   0x88;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1542:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1543:
					__asm        jmp    _T3814;
				// LINE 1545:
				_T24e4:
					objcount = 0x2;
				// LINE 1546:
					__asm        push   0x89;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1547:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1548:
					__asm        jmp    _T3814;
				// LINE 1550:
				_T2518:
					objcount = 0x2;
				// LINE 1551:
					__asm        push   0x9A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1552:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1553:
					__asm        jmp    _T3814;
				// LINE 1555:
				_T254c:
					objcount = 0x2;
				// LINE 1556:
					__asm        push   0x9B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1557:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1558:
					__asm        jmp    _T3814;
				// LINE 1560:
				_T2580:
					objcount = 0x2;
				// LINE 1561:
					__asm        push   0xCB;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1562:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1563:
					__asm        jmp    _T3814;
				// LINE 1565:
				_T25b4:
					objcount = 0x2;
				// LINE 1566:
					__asm        push   0xCC;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1567:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1568:
					__asm        or     obj1user, 0x200;
				// LINE 1569:
					__asm        jmp    _T3814;
				// LINE 1571:
				_T25ef:
					objcount = 0x2;
				// LINE 1572:
					__asm        push   0x9C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1573:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1574:
					__asm        or     obj1user, 0x200;
				// LINE 1575:
					__asm        jmp    _T3814;
				// LINE 1577:
				_T262a:
					objcount = 0x2;
				// LINE 1578:
					__asm        push   0xCD;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1579:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1580:
					__asm        or     obj1user, 0x200;
				// LINE 1581:
					__asm        jmp    _T3814;
				// LINE 1583:
				_T2665:
					objcount = 0x1;
				// LINE 1584:
					flags = 0x0;
				// LINE 1585:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1586:
					__asm        movsx  eax, i;
					__asm        test   eax, eax;
					__asm        je     _T26af;
				// LINE 1587:
					__asm        push   0x8A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1588:
					__asm        jmp    _T26bf;
				// LINE 1589:
				_T26af:
					__asm        push   0x11B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1590:
				_T26bf:
					__asm        jmp    _T3814;
				// LINE 1592:
				_T26c4:
					objcount = 0x1;
				// LINE 1593:
					flags = 0x0;
				// LINE 1594:
					__asm        push   0x8B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1595:
					__asm        jmp    _T3814;
				// LINE 1597:
				_T26e6:
					objcount = 0x1;
				// LINE 1598:
					flags = 0x0;
				// LINE 1599:
					__asm        mov    eax, x;
					__asm        mov    eax, BitsMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    edx, 2;
					__asm        shr    edx, 1;
					__asm        mov    i, dx;
				// LINE 1600:
					__asm        movsx  eax, i;
					__asm        test   eax, eax;
					__asm        je     _T2730;
				// LINE 1601:
					__asm        push   0x8C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1602:
					__asm        jmp    _T2740;
				// LINE 1603:
				_T2730:
					__asm        push   0x10C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1604:
				_T2740:
					__asm        jmp    _T3814;
				// LINE 1606:
				_T2745:
					objcount = 0x2;
				// LINE 1607:
					__asm        push   0x8D;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1608:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1609:
					__asm        or     obj1user, 0x200;
				// LINE 1610:
					__asm        jmp    _T3814;
				// LINE 1612:
				_T2780:
					objcount = 0x2;
				// LINE 1613:
					__asm        push   0x8E;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1614:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1615:
					__asm        jmp    _T3814;
				// LINE 1617:
				_T27b4:
					objcount = 0x2;
				// LINE 1618:
					__asm        push   0x8F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1619:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1620:
					__asm        jmp    _T3814;
				// LINE 1622:
				_T27e8:
					objcount = 0x2;
				// LINE 1623:
					__asm        push   0x90;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1624:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1625:
					__asm        jmp    _T3814;
				// LINE 1627:
				_T281c:
					objcount = 0x2;
				// LINE 1628:
					__asm        push   0x91;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1629:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1630:
					__asm        jmp    _T3814;
				// LINE 1632:
				_T2850:
					objcount = 0x2;
				// LINE 1633:
					__asm        push   0x92;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1634:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1635:
					__asm        jmp    _T3814;
				// LINE 1637:
				_T2884:
					objcount = 0x2;
				// LINE 1638:
					__asm        push   0x93;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1639:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1640:
					__asm        jmp    _T3814;
				// LINE 1644:
				_T28b8:
					__asm        cmp    G_apachebase_found, 0;
					__asm        jne    _T2903;
				// LINE 1646:
					objcount = 0x1;
				// LINE 1647:
					obj = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1648:
					G_apachebase_found = 0x1;
				// LINE 1649:
					G_helibase.apache_pad.x = x;
				// LINE 1650:
					G_helibase.apache_pad.y = y;
				// LINE 1652:
					__asm        jmp    _T2932;
				// LINE 1654:
				_T2903:
					objcount = 0x2;
				// LINE 1655:
					__asm        push   0x94;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1656:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1658:
				_T2932:
					__asm        jmp    _T3814;
				// LINE 1660:
				_T2937:
					objcount = 0x2;
				// LINE 1661:
					__asm        push   0x95;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1662:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1663:
					__asm        jmp    _T3814;
				// LINE 1665:
				_T296b:
					objcount = 0x2;
				// LINE 1666:
					__asm        push   0xE8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1667:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1668:
					__asm        jmp    _T3814;
				// LINE 1670:
				_T299f:
					objcount = 0x2;
				// LINE 1671:
					__asm        push   0xE9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1672:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1673:
					__asm        jmp    _T3814;
				// LINE 1675:
				_T29d3:
					objcount = 0x2;
				// LINE 1676:
					__asm        push   0x96;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1677:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1678:
					__asm        jmp    _T3814;
				// LINE 1681:
				_T2a07:
					objcount = 0x2;
				// LINE 1682:
					__asm        push   0x97;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1683:
					__asm        or     obj1user, 0x200;
				// LINE 1684:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1685:
					__asm        jmp    _T3814;
				// LINE 1687:
				_T2a42:
					objcount = 0x2;
				// LINE 1688:
					__asm        push   0xF5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1689:
					__asm        or     obj1user, 0x200;
				// LINE 1690:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1691:
					__asm        jmp    _T3814;
				// LINE 1693:
				_T2a7d:
					objcount = 0x2;
				// LINE 1694:
					__asm        push   0xF6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1695:
					__asm        or     obj1user, 0x200;
				// LINE 1696:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1697:
					__asm        jmp    _T3814;
				// LINE 1699:
				_T2ab8:
					objcount = 0x2;
				// LINE 1700:
					__asm        push   0x98;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1701:
					__asm        or     obj1user, 0x200;
				// LINE 1702:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1703:
					__asm        jmp    _T3814;
				// LINE 1705:
				_T2af3:
					objcount = 0x2;
				// LINE 1706:
					__asm        push   0x99;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1707:
					__asm        or     obj1user, 0x200;
				// LINE 1708:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1709:
					__asm        jmp    _T3814;
				// LINE 1711:
				_T2b2e:
					objcount = 0x2;
				// LINE 1712:
					__asm        push   6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1713:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1714:
					__asm        jmp    _T3814;
				// LINE 1716:
				_T2b5f:
					objcount = 0x2;
				// LINE 1717:
					__asm        push   7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1718:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1719:
					__asm        jmp    _T3814;
				// LINE 1721:
				_T2b90:
					objcount = 0x2;
				// LINE 1722:
					__asm        push   8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1723:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1724:
					__asm        jmp    _T3814;
				// LINE 1726:
				_T2bc1:
					objcount = 0x2;
				// LINE 1727:
					__asm        push   9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1728:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1729:
					__asm        jmp    _T3814;
				// LINE 1731:
				_T2bf2:
					objcount = 0x2;
				// LINE 1732:
					__asm        push   0xD0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1733:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1734:
					__asm        jmp    _T3814;
				// LINE 1736:
				_T2c26:
					objcount = 0x2;
				// LINE 1737:
					__asm        push   0xA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1738:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1739:
					__asm        jmp    _T3814;
				// LINE 1741:
				_T2c57:
					objcount = 0x2;
				// LINE 1742:
					__asm        push   0xCE;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1743:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1744:
					__asm        jmp    _T3814;
				// LINE 1746:
				_T2c8b:
					objcount = 0x2;
				// LINE 1747:
					__asm        push   0xB;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1748:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1749:
					__asm        jmp    _T3814;
				// LINE 1751:
				_T2cbc:
					objcount = 0x2;
				// LINE 1752:
					__asm        push   0xCF;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1753:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1754:
					__asm        jmp    _T3814;
				// LINE 1756:
				_T2cf0:
					objcount = 0x2;
				// LINE 1757:
					__asm        push   0xC;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1758:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1759:
					__asm        jmp    _T3814;
				// LINE 1761:
				_T2d21:
					objcount = 0x2;
				// LINE 1762:
					__asm        push   0xD;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1763:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1764:
					__asm        jmp    _T3814;
				// LINE 1766:
				_T2d52:
					objcount = 0x2;
				// LINE 1767:
					__asm        push   0xE;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1768:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1769:
					__asm        jmp    _T3814;
				// LINE 1771:
				_T2d83:
					objcount = 0x2;
				// LINE 1772:
					__asm        push   0x80;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1773:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1774:
					__asm        jmp    _T3814;
				// LINE 1776:
				_T2db7:
					objcount = 0x2;
				// LINE 1777:
					__asm        push   0x81;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1778:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1779:
					__asm        jmp    _T3814;
				// LINE 1781:
				_T2deb:
					objcount = 0x2;
				// LINE 1782:
					__asm        push   0xC9;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1783:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1784:
					__asm        jmp    _T3814;
				// LINE 1786:
				_T2e1f:
					objcount = 0x2;
				// LINE 1787:
					__asm        push   0xCA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1788:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1789:
					__asm        jmp    _T3814;
				// LINE 1791:
				_T2e53:
					objcount = 0x2;
				// LINE 1792:
					__asm        push   0xF;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1793:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1794:
					__asm        jmp    _T3814;
				// LINE 1796:
				_T2e84:
					objcount = 0x2;
				// LINE 1797:
					__asm        push   0x10;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1798:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1799:
					__asm        jmp    _T3814;
				// LINE 1801:
				_T2eb5:
					objcount = 0x2;
				// LINE 1802:
					__asm        push   0x11;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1803:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1804:
					__asm        jmp    _T3814;
				// LINE 1806:
				_T2ee6:
					objcount = 0x2;
				// LINE 1807:
					__asm        push   0x12;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1808:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1809:
					__asm        jmp    _T3814;
				// LINE 1811:
				_T2f17:
					objcount = 0x2;
				// LINE 1812:
					__asm        push   0x13;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1813:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1814:
					__asm        jmp    _T3814;
				// LINE 1816:
				_T2f48:
					objcount = 0x2;
				// LINE 1817:
					__asm        push   0x14;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1818:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1819:
					__asm        jmp    _T3814;
				// LINE 1821:
				_T2f79:
					objcount = 0x1;
				// LINE 1822:
					flags = 0x0;
				// LINE 1823:
					__asm        push   0xF3;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1825:
					__asm        jmp    _T3814;
				// LINE 1827:
				_T2f9b:
					objcount = 0x2;
				// LINE 1828:
					__asm        push   0xF4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1829:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1830:
					__asm        jmp    _T3814;
				// LINE 1832:
				_T2fcf:
					objcount = 0x2;
				// LINE 1833:
					__asm        push   0x15;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1834:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1835:
					__asm        jmp    _T3814;
				// LINE 1837:
				_T3000:
					objcount = 0x2;
				// LINE 1838:
					__asm        push   0x16;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1839:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1840:
					__asm        jmp    _T3814;
				// LINE 1842:
				_T3031:
					objcount = 0x2;
				// LINE 1843:
					__asm        push   0x17;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1844:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1845:
					__asm        jmp    _T3814;
				// LINE 1847:
				_T3062:
					objcount = 0x2;
				// LINE 1848:
					__asm        push   0xE3;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1849:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1850:
					__asm        jmp    _T3814;
				// LINE 1852:
				_T3096:
					objcount = 0x2;
				// LINE 1853:
					__asm        push   0x18;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1854:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1855:
					__asm        jmp    _T3814;
				// LINE 1857:
				_T30c7:
					objcount = 0x2;
				// LINE 1858:
					__asm        push   0xC4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1859:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1860:
					__asm        jmp    _T3814;
				// LINE 1862:
				_T30fb:
					objcount = 0x2;
				// LINE 1863:
					__asm        push   0x19;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1864:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1865:
					__asm        jmp    _T3814;
				// LINE 1867:
				_T312c:
					objcount = 0x2;
				// LINE 1868:
					__asm        push   0x1A;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1869:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1870:
					__asm        jmp    _T3814;
				// LINE 1872:
				_T315d:
					objcount = 0x2;
				// LINE 1873:
					__asm        push   0xC5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1874:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1875:
					__asm        jmp    _T3814;
				// LINE 1877:
				_T3191:
					objcount = 0x2;
				// LINE 1878:
					__asm        push   0xC6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1879:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1880:
					__asm        jmp    _T3814;
				// LINE 1882:
				_T31c5:
					objcount = 0x2;
				// LINE 1883:
					__asm        push   0xC7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1884:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1885:
					__asm        jmp    _T3814;
				// LINE 1887:
				_T31f9:
					objcount = 0x2;
				// LINE 1888:
					__asm        push   0xC8;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1889:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1890:
					__asm        jmp    _T3814;
				// LINE 1892:
				_T322d:
					objcount = 0x2;
				// LINE 1893:
					__asm        push   0x1B;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1894:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1895:
					__asm        jmp    _T3814;
				// LINE 1897:
				_T325e:
					objcount = 0x2;
				// LINE 1898:
					__asm        push   0x82;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1899:
					__asm        push   4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj2, eax;
				// LINE 1900:
					__asm        jmp    _T3814;
				// LINE 1902:
				_T3287:
					objcount = 0x2;
				// LINE 1903:
					__asm        push   0xE4;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1904:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1905:
					__asm        jmp    _T3814;
				// LINE 1907:
				_T32bb:
					objcount = 0x2;
				// LINE 1908:
					__asm        push   0xE5;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1909:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1910:
					__asm        jmp    _T3814;
				// LINE 1912:
				_T32ef:
					__asm        push   0x16F;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1913:
					flags = 0x0;
				// LINE 1914:
					__asm        jmp    _T3814;
				// LINE 1916:
				_T330a:
					objcount = 0x2;
				// LINE 1917:
					__asm        push   0xE6;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1918:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1919:
					__asm        jmp    _T3814;
				// LINE 1921:
				_T333e:
					objcount = 0x2;
				// LINE 1922:
					__asm        push   0xE7;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1923:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1924:
					__asm        jmp    _T3814;
				// LINE 1926:
				_T3372:
					objcount = 0x2;
				// LINE 1927:
					__asm        push   0x1C;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1928:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1929:
					__asm        or     obj1user, 0x200;
				// LINE 1930:
					__asm        jmp    _T3814;
				// LINE 1932:
				_T33aa:
					objcount = 0x2;
				// LINE 1933:
					__asm        push   0xEA;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1934:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1935:
					__asm        jmp    _T3814;
				// LINE 1937:
				_T33de:
					objcount = 0x2;
				// LINE 1938:
					__asm        push   0xEB;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1939:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1940:
					__asm        jmp    _T3814;
				// LINE 1942:
				_T3412:
					objcount = 0x2;
				// LINE 1943:
					__asm        push   0xEC;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1944:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1945:
					__asm        jmp    _T3814;
				// LINE 1947:
				_T3446:
					objcount = 0x2;
				// LINE 1948:
					__asm        push   0xED;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1949:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1950:
					__asm        jmp    _T3814;
				// LINE 1952:
				_T347a:
					objcount = 0x2;
				// LINE 1953:
					__asm        push   0xEE;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1954:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1955:
					__asm        jmp    _T3814;
				// LINE 1957:
				_T34ae:
					objcount = 0x2;
				// LINE 1958:
					__asm        push   0xEF;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1959:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1960:
					__asm        jmp    _T3814;
				// LINE 1962:
				_T34e2:
					objcount = 0x2;
				// LINE 1963:
					__asm        push   0xF0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1964:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1965:
					__asm        jmp    _T3814;
				// LINE 1967:
				_T3516:
					objcount = 0x2;
				// LINE 1968:
					__asm        push   0xF1;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1969:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1970:
					__asm        jmp    _T3814;
				// LINE 1972:
				_T354a:
					objcount = 0x2;
				// LINE 1973:
					__asm        push   0xF2;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1974:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1975:
					__asm        jmp    _T3814;
				// LINE 1977:
				_T357e:
					objcount = 0x2;
				// LINE 1978:
					__asm        push   0;
					__asm        call   0x004D8821;
					__asm        add    esp, 4;
					__asm        mov    obj, eax;
				// LINE 1979:
					obj2 = S3CityGetBase(reinterpret_cast<int16_t>(size), y, x);
				// LINE 1980:
					__asm        jmp    _T3814;
				// LINE 1982:
					__asm        jmp    _FOR_NEXT_3f;
				// LINE 2012:
					__asm        jmp    _T3814;
				_T35b9:
					__asm        sub    dword ptr [ebp-0x4C], 0x70;
					__asm        cmp    dword ptr [ebp-0x4C], 0x8F;
					__asm        ja     _FOR_NEXT_3f;

					__asm        mov    eax, [ebp-0x4C];
					__asm        jmp    _Switch_35d4[0][eax*4];
				// Switch pointers:
				//   _T1827
				//   _T187d
				//   _T18b1
				//   _T18e5
				//   _T1919
				//   _T194d
				//   _T1981
				//   _T19b5
				//   _T19e9
				//   _T1a1d
				//   _T1a51
				//   _T1a85
				//   _T1ab9
				//   _T1aed
				//   _T1b21
				//   _T1b55
				//   _T1b89
				//   _T1bbd
				//   _T2310
				//   _T1bf8
				//   _T1c2c
				//   _T1c60
				//   _T1c9b
				//   _T1ccf
				//   _T2518
				//   _T254c
				//   _T1ea0
				//   _T1ed4
				//   _T30c7
				//   _T30fb
				//   _T312c
				//   _T315d
				//   _T3191
				//   _T2d83
				//   _T31c5
				//   _T31f9
				//   _T2db7
				//   _T2deb
				//   _T1d03
				//   _T2b2e
				//   _T2d52
				//   _T2e1f
				//   _T2e53
				//   _T2e84
				//   _T2eb5
				//   _T2ee6
				//   _T1d34
				//   _T1d68
				//   _T1d9c
				//   _T1dd0
				//   _T1e04
				//   _T1e38
				//   _T1e6c
				//   _T2414
				//   _T2580
				//   _T25b4
				//   _T25ef
				//   _T262a
				//   _T2448
				//   _T247c
				//   _T24b0
				//   _T24e4
				//   _T2c57
				//   _T2c8b
				//   _T2cbc
				//   _T2cf0
				//   _T2f17
				//   _T2344
				//   _T2378
				//   _T23ac
				//   _T2b5f
				//   _T2b90
				//   _T2bc1
				//   _T2bf2
				//   _T23e0
				//   _T2c26
				//   _T1f08
				//   _T1f3c
				//   _T1f70
				//   _T1fa4
				//   _T1fd8
				//   _T200c
				//   _T2040
				//   _T207b
				//   _T20b6
				//   _T20ea
				//   _T211e
				//   _T2140
				//   _T2162
				//   _T219d
				//   _T21d1
				//   _T2205
				//   _T2239
				//   _T226d
				//   _T22a8
				//   _T22dc
				//   _T2d21
				//   _T3000
				//   _T357e
				//   _T3062
				//   _T3096
				//   _T185b
				//   _T322d
				//   _T325e
				//   _T3287
				//   _T32bb
				//   _T32ef
				//   _T330a
				//   _T333e
				//   _T2665
				//   _T26c4
				//   _T26e6
				//   _T2745
				//   _T2780
				//   _T27b4
				//   _T27e8
				//   _T281c
				//   _T2850
				//   _T2884
				//   _T28b8
				//   _T2937
				//   _T296b
				//   _T299f
				//   _T3372
				//   _T33aa
				//   _T33de
				//   _T3412
				//   _T3446
				//   _T347a
				//   _T34ae
				//   _T34e2
				//   _T3516
				//   _T354a
				//   _T3031
				//   _T29d3
				//   _T2f48
				//   _T2f79
				//   _T2f9b
				//   _T2fcf
				//   _T2a07
				//   _T2a42
				//   _T2a7d
				//   _T2ab8
				//   _T2af3
				// LINE 2017:
				_T3814:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 2018:
					sptr = S2Alloc(0x10, G_citymempool);
				// LINE 2021:
					__asm        movsx  eax, size;
					__asm        mov    [ebp-0x50], eax;
					__asm        jmp    _T3d40;
				// LINE 2024:
				_T3846:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2026:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FE0;
					__asm        mov    i, ax;
				// LINE 2027:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2028:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x20;
					__asm        mov    i, ax;
				// LINE 2029:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2030:
					__asm        jmp    _T3d67;
				// LINE 2032:
				_T38a3:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2033:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2034:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2035:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2037:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FC0;
					__asm        mov    i, ax;
				// LINE 2038:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2039:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x40;
					__asm        mov    i, ax;
				// LINE 2040:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2041:
					__asm        jmp    _T3d67;
				// LINE 2043:
				_T3961:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2044:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2045:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2046:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2047:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2048:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2049:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2050:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2051:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2053:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FA0;
					__asm        mov    i, ax;
				// LINE 2054:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2055:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x60;
					__asm        mov    i, ax;
				// LINE 2056:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2057:
					__asm        jmp    _T3d67;
				// LINE 2059:
				_T3ace:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2060:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2061:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2062:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2063:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2064:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2065:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2066:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2067:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2068:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2069:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2070:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2071:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2072:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2073:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2074:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2076:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1F80;
					__asm        mov    i, ax;
				// LINE 2077:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2078:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x80;
					__asm        mov    i, ax;
				// LINE 2079:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2080:
					__asm        jmp    _T3d67;
				// LINE 2083:
					__asm        jmp    _T3d67;
				// LINE 2084:
					__asm        jmp    _T3d67;
				_T3d40:
					__asm        dec    dword ptr [ebp-0x50];
					__asm        cmp    dword ptr [ebp-0x50], 3;
					__asm        ja     _T3d67;

					__asm        mov    eax, [ebp-0x50];
					__asm        jmp    _Switch_3d57[0][eax*4];
				// Switch pointers:
				//   _T3846
				//   _T38a3
				//   _T3961
				//   _T3ace
				// LINE 2086:
				_T3d67:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 2087:
					__asm        mov    ax, size;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+8], ax;
				// LINE 2088:
					__asm        mov    ax, flags;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 2089:
					__asm        cmp    G_artmode, 1;
					__asm        jne    _T3da3;
				// LINE 2090:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        or     eax, 1;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 2091:
				_T3da3:
					cptr->ctr = 0x0;
				// LINE 2092:
					cptr->stptr = sptr;
				// LINE 2093:
					cptr->dyptr = 0x0;
				// LINE 2095:
					sptr->next = 0x0;
				// LINE 2096:
					sptr->mesh = obj;
				// LINE 2097:
					sptr->user1 = obj1user;
				// LINE 2098:
					sptr->user2 = 0x0;
				// LINE 2100:
					__asm        cmp    objcount, 2;
					__asm        jne    _T3e3d;

					__asm        cmp    G_artmode, 0;
					__asm        jne    _T3e3d;
				// LINE 2102:
					sptr->next = S2Alloc(0x10, G_citymempool);
				// LINE 2103:
					sptr = sptr->next;
				// LINE 2104:
					sptr->next = 0x0;
				// LINE 2105:
					sptr->mesh = obj2;
				// LINE 2106:
					sptr->user1 = obj2user;
				// LINE 2107:
					sptr->user2 = 0x0;
				// LINE 2109:
				_T3e3d:
			}
		// LINE 2110:
		_T3e42:
	}
// LINE 2119:
_FOR_3e53:
	for (x = 0x0; (x < 0x80); x++) {
		// LINE 2121:
		_FOR_3e6f:
			for (y = 0x0; (y < 0x80); y++) {
				// LINE 2124:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        cmp    G_omap[0][0][ecx+eax*4], 0;
					__asm        je     _T3ea6;
				// LINE 2125:
					__asm        jmp    _FOR_NEXT_3e6f;
				// LINE 2128:
				_T3ea6:
					__asm        mov    eax, G_max_emptycel_size;
					__asm        mov    size, ax;
				// LINE 2131:
					__asm        movsx  eax, size;
					__asm        mov    ecx, 0x80;
					__asm        sub    ecx, y;
					__asm        cmp    eax, ecx;
					__asm        jle    _T3ecf;

					__asm        mov    eax, 0x80;
					__asm        sub    eax, y;
					__asm        mov    size, ax;
				// LINE 2132:
				_T3ecf:
					__asm        mov    eax, 0x80;
					__asm        sub    eax, x;
					__asm        movsx  ecx, size;
					__asm        cmp    eax, ecx;
					__asm        jge    _FOR_3efb;

					__asm        mov    eax, 0x80;
					__asm        sub    eax, x;
					__asm        mov    size, ax;
				// LINE 2135:
				_FOR_3efb:
					for (j = 0x0; (reinterpret_cast<int16_t>(size) > j); j++) {
						// LINE 2137:
						_FOR_3f17:
							for (k = 0x0; (reinterpret_cast<int16_t>(size) > k); k++) {
								// LINE 2140:
									__asm        movsx  eax, size;
									__asm        cmp    eax, 1;
									__asm        jne    _T3f39;
								// LINE 2141:
									__asm        jmp    _T3fc9;
								// LINE 2144:
								_T3f39:
									__asm        mov    eax, x;
									__asm        add    eax, j;
									__asm        and    eax, 0xFF;
									__asm        shl    eax, 0xA;
									__asm        mov    ecx, k;
									__asm        add    ecx, y;
									__asm        and    ecx, 0xFF;
									__asm        cmp    G_omap[0][0][eax+ecx*4], 0;
									__asm        jne    _T3f66;
								// LINE 2145:
									__asm        jmp    _FOR_NEXT_3f17;
								// LINE 2148:
								_T3f66:
									__asm        mov    eax, j;
									__asm        cmp    k, eax;
									__asm        jge    _T3f8b;
								// LINE 2150:
									__asm        movsx  eax, size;
									__asm        cmp    eax, j;
									__asm        jle    _T3f86;

									__asm        mov    eax, j;
									__asm        mov    size, ax;
								// LINE 2152:
								_T3f86:
									__asm        jmp    _T3fc4;
								_T3f8b:
									__asm        mov    eax, j;
									__asm        cmp    k, eax;
									__asm        jle    _T3fb0;
								// LINE 2154:
									__asm        movsx  eax, size;
									__asm        cmp    eax, k;
									__asm        jle    _T3fab;

									__asm        mov    eax, k;
									__asm        mov    size, ax;
								// LINE 2156:
								_T3fab:
									__asm        jmp    _T3fc4;
								// LINE 2158:
								_T3fb0:
									__asm        movsx  eax, size;
									__asm        cmp    eax, k;
									__asm        jle    _T3fc4;

									__asm        mov    eax, k;
									__asm        mov    size, ax;
								// LINE 2160:
								_T3fc4:
							}
						// LINE 2161:
						_T3fc9:
					}
				// LINE 2165:
				_T3fce:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 2167:
					__asm        movsx  eax, size;
					__asm        mov    [ebp-0x54], eax;
					__asm        jmp    _T44ed;
				// LINE 2170:
				_T3fed:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2172:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FE0;
					__asm        mov    i, ax;
				// LINE 2173:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2174:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x20;
					__asm        mov    i, ax;
				// LINE 2175:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2176:
					__asm        jmp    _T4514;
				// LINE 2178:
				_T404a:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2179:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2180:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2181:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2183:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FC0;
					__asm        mov    i, ax;
				// LINE 2184:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2185:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x40;
					__asm        mov    i, ax;
				// LINE 2186:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2187:
					__asm        jmp    _T4514;
				// LINE 2189:
				_T4108:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2190:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2191:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2192:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2193:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2194:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2195:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2196:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2197:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2199:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1FA0;
					__asm        mov    i, ax;
				// LINE 2200:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2201:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x60;
					__asm        mov    i, ax;
				// LINE 2202:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2203:
					__asm        jmp    _T4514;
				// LINE 2205:
				_T4275:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2206:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2207:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2208:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2209:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2210:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2211:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2212:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2213:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2214:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2215:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2216:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2217:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2218:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, y;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, x;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 2219:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2220:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, x;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, y;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 2222:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1F80;
					__asm        mov    i, ax;
				// LINE 2223:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2224:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x80;
					__asm        mov    i, ax;
				// LINE 2225:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2226:
					__asm        jmp    _T4514;
				// LINE 2228:
				_T44dd:
					i = 0x1;
				// LINE 2230:
					__asm        jmp    _T4514;
				// LINE 2231:
					__asm        jmp    _T4514;
				_T44ed:
					__asm        dec    dword ptr [ebp-0x54];
					__asm        cmp    dword ptr [ebp-0x54], 3;
					__asm        ja     _T44dd;

					__asm        mov    eax, [ebp-0x54];
					__asm        jmp    _Switch_4504[0][eax*4];
				// Switch pointers:
				//   _T3fed
				//   _T404a
				//   _T4108
				//   _T4275
				// LINE 2234:
				_T4514:
					alt = GetAltitude(y, x);
				// LINE 2236:
					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        cmp    edx, 0xD;
					__asm        je     _T455e;

					__asm        mov    eax, x;
					__asm        mov    eax, TerrainMap[eax*4];
					__asm        mov    ecx, y;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        cmp    edx, 0xE;
					__asm        jne    _T4562;
				// LINE 2237:
				_T455e:
					alt++;
				// LINE 2238:
				_T4562:
					__asm        movsx  eax, alt;
					__asm        shl    eax, 5;
					__asm        add    eax, 0x20;
					__asm        mov    alt, ax;
				// LINE 2241:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 2242:
					__asm        mov    ax, size;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+8], ax;
				// LINE 2243:
					cptr->flags = 0x0;
				// LINE 2244:
					__asm        cmp    G_artmode, 1;
					__asm        jne    _T45aa;
				// LINE 2245:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        or     eax, 1;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 2246:
				_T45aa:
					cptr->ctr = 0x0;
				// LINE 2247:
					cptr->stptr = 0x0;
				// LINE 2248:
					cptr->dyptr = 0x0;
			}
		// LINE 2252:
		_T45cc:
	}
// LINE 2264:
_FOR_45dd:
	for (x = 0x80; (x < 0x100); x += 0x10) {
		// LINE 2266:
		_FOR_45fa:
			for (y = 0x0; (y < 0x80); y += 0x10) {
				// LINE 2268:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 2269:
					__asm        cmp    cptr, 0;
					__asm        jne    _FOR_4640;
				// LINE 2270:
					ERexit(0x5b5a34);
				// LINE 2272:
				_FOR_4640:
					for (i = 0x0; (reinterpret_cast<int16_t>(i) < 0x10); i++) {
						// LINE 2273:
						_FOR_465d:
							for (j = 0x0; (j < 0x10); j++) {
								// LINE 2274:
									__asm        mov    eax, cptr;
									__asm        movsx  ecx, i;
									__asm        add    ecx, x;
									__asm        and    ecx, 0xFF;
									__asm        shl    ecx, 0xA;
									__asm        mov    edx, j;
									__asm        add    edx, y;
									__asm        and    edx, 0xFF;
									__asm        mov    G_omap[0][0][ecx+edx*4], eax;
									__asm        jmp    _FOR_NEXT_465d;
							}
						_T4695:
					}
				// LINE 2276:
				_T469a:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1E00;
					__asm        mov    i, ax;
				// LINE 2277:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2278:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x200;
					__asm        mov    i, ax;
				// LINE 2279:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2280:
					__asm        mov    eax, y;
					__asm        add    eax, 4;
					__asm        and    eax, G_tmask;
					__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
					__asm        shl    eax, cl;
					__asm        mov    ecx, x;
					__asm        add    ecx, 4;
					__asm        and    ecx, G_tmask;
					__asm        add    ecx, ecx;
					__asm        lea    eax, [ecx+eax*2];
					__asm        mov    ecx, G_tmap;
					__asm        mov    ax, [eax+ecx];
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 2283:
					cptr->size = 0x10;
				// LINE 2284:
					cptr->flags = 0x0;
				// LINE 2285:
					cptr->ctr = 0x0;
				// LINE 2286:
					cptr->stptr = 0x0;
				// LINE 2287:
					cptr->dyptr = 0x0;
			}
		// LINE 2291:
		_T473e:
	}
// LINE 2294:
_FOR_474f:
	for (x = 0x0; (x < 0x100); x += 0x10) {
		// LINE 2296:
		_FOR_476c:
			for (y = 0x80; (y < 0x100); y += 0x10) {
				// LINE 2299:
					__asm        cmp    x, 0x80;
					__asm        jne    _T47b9;

					__asm        cmp    y, 0x80;
					__asm        jne    _T47b9;

					__asm        cmp    G_helibase_found, 0;
					__asm        jne    _T47b9;
				// LINE 2301:
					S3CityCreateHeliBase(y, x);
				// LINE 2302:
					__asm        jmp    _FOR_NEXT_476c;
				// LINE 2305:
				_T47b9:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 2306:
					__asm        cmp    cptr, 0;
					__asm        jne    _FOR_47ee;
				// LINE 2307:
					ERexit(0x5b5a50);
				// LINE 2309:
				_FOR_47ee:
					for (i = 0x0; (reinterpret_cast<int16_t>(i) < 0x10); i++) {
						// LINE 2310:
						_FOR_480b:
							for (j = 0x0; (j < 0x10); j++) {
								// LINE 2311:
									__asm        mov    eax, cptr;
									__asm        movsx  ecx, i;
									__asm        add    ecx, x;
									__asm        and    ecx, 0xFF;
									__asm        shl    ecx, 0xA;
									__asm        mov    edx, j;
									__asm        add    edx, y;
									__asm        and    edx, 0xFF;
									__asm        mov    G_omap[0][0][ecx+edx*4], eax;
									__asm        jmp    _FOR_NEXT_480b;
							}
						_T4843:
					}
				// LINE 2314:
				_T4848:
					__asm        mov    eax, x;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1E00;
					__asm        mov    i, ax;
				// LINE 2315:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 2316:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, y;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x200;
					__asm        mov    i, ax;
				// LINE 2317:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 2318:
					__asm        mov    eax, y;
					__asm        add    eax, 4;
					__asm        and    eax, G_tmask;
					__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
					__asm        shl    eax, cl;
					__asm        mov    ecx, x;
					__asm        add    ecx, 4;
					__asm        and    ecx, G_tmask;
					__asm        add    ecx, ecx;
					__asm        lea    eax, [ecx+eax*2];
					__asm        mov    ecx, G_tmap;
					__asm        mov    ax, [eax+ecx];
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 2321:
					cptr->size = 0x10;
				// LINE 2322:
					cptr->flags = 0x0;
				// LINE 2323:
					cptr->ctr = 0x0;
				// LINE 2324:
					cptr->stptr = 0x0;
				// LINE 2325:
					cptr->dyptr = 0x0;
			}
		// LINE 2329:
		_T48ec:
	}
// LINE 2419:
_FOR_48fd:
	for (x = 0x0; (x < 0x100); x++) {
		// LINE 2421:
		_FOR_4919:
			for (y = 0x0; (y < 0x100); y++) {
				// LINE 2423:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        cmp    G_omap[0][0][ecx+eax*4], 0;
					__asm        jne    _T4958;
				// LINE 2424:
					ERexit(0x5b5a6c);
				// LINE 2425:
				_T4958:
			}
		// LINE 2426:
		_T495d:
	}
// LINE 2430:
_T4962:
	return 0x0;
// LINE 2431:
}

// FUNCTION: COPTER_D 0x0050ef4e
void S3CityGrid() {
	/*bp-0x4*/   int32_t tmpfix;
	/*bp-0x8*/   short x_pos;
	/*bp-0xc*/   long spiral_dist;
	/*bp-0x10*/  short y_pos;
	/*bp-0x14*/  int32_t view_changed;

// LINE 2447:
	view_changed = 0x1;
// LINE 2455:
	__asm        push   0x609C00;
	__asm        mov    eax, 0x6C1210;
	__asm        add    eax, 0x44;
	__asm        push   eax;
	__asm        mov    eax, 0x6C1210;
	__asm        add    eax, 0x14;
	__asm        push   eax;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 2456:
	__asm        push   0x62A458;
	__asm        mov    eax, 0x6C1210;
	__asm        add    eax, 0x2C;
	__asm        push   eax;
	__asm        mov    eax, 0x6C1210;
	__asm        add    eax, 0x14;
	__asm        push   eax;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 2458:
	S3CityCheckGridPos();
// LINE 2461:
	S_used_spiralscan = 0x0;
// LINE 2462:
	__asm        cmp    cameraPitch, 0x2BC0000;
	__asm        jl     _Tb2;

	__asm        cmp    cameraPitch, 0x3840000;
	__asm        jg     _Tb2;
// LINE 2466:
	S_used_spiralscan = 0x1;
// LINE 2467:
	spiral_dist = ((G_alt >> 0x5) + 0x5);
// LINE 2468:
	S3CitySpiralScan(spiral_dist, S_curr_pos.y, S_curr_pos.x);
// LINE 2469:
	return;
// LINE 2473:
_Tb2:
	__asm        cmp    view_changed, 1;
	__asm        jne    _T719;
// LINE 2475:
	S_fovlast = 0x0;
// LINE 2483:
	S_local_lstart.x = 0xffc00000;
// LINE 2484:
	tmpfix = ((G_alt << 0x10) >> 0x8);
// LINE 2485:
	__asm        xor    eax, eax;
	__asm        mov    ecx, tmpfix;
	__asm        shl    ecx, 6;
	__asm        sub    eax, ecx;
	__asm        neg    eax;
	__asm        sub    S_local_lstart.x, eax;
// LINE 2570:
	__asm        mov    eax, S_local_lstart.x;
	__asm        neg    eax;
	__asm        mov    S_local_rstart.x, eax;
// LINE 2573:
	__asm        push   0x6C1370;
	__asm        push   0x609BF0;
	__asm        push   0x609098;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 2574:
	__asm        push   0x6C1370;
	__asm        push   0x62A4C8;
	__asm        push   0x62A4A8;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 2580:
	__asm        mov    eax, ViewState.world_pos.x;
	__asm        mov    ecx, ViewState.view_vect.x;
	__asm        shl    ecx, 6;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        sub    eax, ecx;
	__asm        mov    S_world_eye.x, eax;
// LINE 2582:
	__asm        mov    eax, ViewState.world_pos.z;
	__asm        mov    ecx, ViewState.view_vect.z;
	__asm        shl    ecx, 6;
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        sub    eax, ecx;
	__asm        mov    S_world_eye.z, eax;
// LINE 2583:
	S_world_eye.y = ViewState.world_pos.y;
// LINE 2585:
	S_world_lstart.x += S_world_eye.x;
// LINE 2586:
	S_world_lstart.y += S_world_eye.y;
// LINE 2587:
	S_world_lstart.z += S_world_eye.z;
// LINE 2588:
	S_world_rstart.x += S_world_eye.x;
// LINE 2589:
	S_world_rstart.y += S_world_eye.y;
// LINE 2590:
	S_world_rstart.z += S_world_eye.z;
// LINE 2694:
	S_pos.x = ((S_world_eye.x + 0x20000000) >> 0x16);
// LINE 2695:
	S_pos.y = ((0x20000000 - S_world_eye.z) >> 0x16);
// LINE 2698:
	__asm        cmp    ViewState.view_vect.x, 0;
	__asm        jle    _T203;
// LINE 2700:
	__asm        cmp    ViewState.view_vect.z, 0;
	__asm        jle    _T1f4;
// LINE 2702:
	S_facesort = 0x609c40;
// LINE 2704:
	__asm        jmp    _T1fe;
// LINE 2706:
_T1f4:
	S_facesort = 0x609908;
// LINE 2709:
_T1fe:
	__asm        jmp    _T229;
// LINE 2711:
_T203:
	__asm        cmp    ViewState.view_vect.z, 0;
	__asm        jle    _T21f;
// LINE 2713:
	S_facesort = 0x62a4d8;
// LINE 2715:
	__asm        jmp    _T229;
// LINE 2717:
_T21f:
	S_facesort = 0x62a4b8;
// LINE 2724:
_T229:
	S3CityGetCells(0x62a498, 0x609bf0, 0x62a4a0, 0x609108, (0x6c1210 + 0x2c));
// LINE 2725:
	S3CityGetCells(0x62a498, 0x62a4c8, 0x609104, 0x629c50, (0x6c1210 + 0x44));
// LINE 2733:
	__asm        mov    eax, ViewState.world_pos.x;
	__asm        add    eax, 0x20000000;
	__asm        sar    eax, 0x16;
	__asm        mov    x_pos, ax;
// LINE 2734:
	__asm        mov    eax, 0x20000000;
	__asm        sub    eax, ViewState.world_pos.z;
	__asm        sar    eax, 0x16;
	__asm        mov    y_pos, ax;
// LINE 2735:
	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx+4];
	__asm        cmp    [eax+4], ecx;
	__asm        jne    _T2b7;
// LINE 2737:
	city_fovscan_horizedge();
// LINE 2739:
	__asm        jmp    _T719;
_T2b7:
	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax], ecx;
	__asm        jne    _T2d6;
// LINE 2741:
	city_fovscan_vertedge();
// LINE 2743:
	__asm        jmp    _T719;
_T2d6:
	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax], ecx;
	__asm        jle    _T3e8;

	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx+4];
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T3e8;
// LINE 2750:
	__asm        mov    eax, S_llast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jl     _T386;

	__asm        mov    eax, S_rlast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jg     _T386;
// LINE 2753:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax];
	__asm        dec    eax;
	__asm        mov    x_pos, ax;
// LINE 2754:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax+4];
	__asm        mov    y_pos, ax;
// LINE 2755:
__WHILE_33e:
	while ((S_rlast->x > S_llast->x)) {
		// LINE 2757:
			S_rlast += 0x8;
		// LINE 2758:
			S_rlast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2759:
			S_rlast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2760:
			x_pos--;
		// LINE 2761:
			__asm        jmp    __WHILE_33e;
	}
// LINE 2762:
_T37c:
	city_fovscan_vertedge();
// LINE 2764:
	__asm        jmp    _T3e3;
// LINE 2767:
_T386:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax];
	__asm        mov    x_pos, ax;
// LINE 2768:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax+4];
	__asm        dec    eax;
	__asm        mov    y_pos, ax;
// LINE 2769:
__WHILE_39e:
	while ((S_rlast->y < S_llast->y)) {
		// LINE 2771:
			S_llast += 0x8;
		// LINE 2772:
			S_llast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2773:
			S_llast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2774:
			y_pos--;
		// LINE 2775:
			__asm        jmp    __WHILE_39e;
	}
// LINE 2776:
_T3de:
	city_fovscan_horizedge();
// LINE 2780:
_T3e3:
	__asm        jmp    _T719;
_T3e8:
	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax], ecx;
	__asm        jle    _T4fa;

	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx+4];
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T4fa;
// LINE 2787:
	__asm        mov    eax, S_llast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jg     _T498;

	__asm        mov    eax, S_rlast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jl     _T498;
// LINE 2790:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax];
	__asm        inc    eax;
	__asm        mov    x_pos, ax;
// LINE 2791:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax+4];
	__asm        mov    y_pos, ax;
// LINE 2792:
__WHILE_450:
	while ((S_rlast->x > S_llast->x)) {
		// LINE 2794:
			S_llast += 0x8;
		// LINE 2795:
			S_llast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2796:
			S_llast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2797:
			x_pos++;
		// LINE 2798:
			__asm        jmp    __WHILE_450;
	}
// LINE 2799:
_T48e:
	city_fovscan_vertedge();
// LINE 2801:
	__asm        jmp    _T4f5;
// LINE 2804:
_T498:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax];
	__asm        mov    x_pos, ax;
// LINE 2805:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax+4];
	__asm        dec    eax;
	__asm        mov    y_pos, ax;
// LINE 2806:
__WHILE_4b0:
	while ((S_rlast->y > S_llast->y)) {
		// LINE 2808:
			S_rlast += 0x8;
		// LINE 2809:
			S_rlast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2810:
			S_rlast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2811:
			y_pos--;
		// LINE 2812:
			__asm        jmp    __WHILE_4b0;
	}
// LINE 2813:
_T4f0:
	city_fovscan_horizedge();
// LINE 2817:
_T4f5:
	__asm        jmp    _T719;
_T4fa:
	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax], ecx;
	__asm        jge    _T60c;

	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx+4];
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _T60c;
// LINE 2824:
	__asm        mov    eax, S_llast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jg     _T5aa;

	__asm        mov    eax, S_rlast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jl     _T5aa;
// LINE 2827:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax];
	__asm        inc    eax;
	__asm        mov    x_pos, ax;
// LINE 2828:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax+4];
	__asm        mov    y_pos, ax;
// LINE 2829:
__WHILE_562:
	while ((S_rlast->x < S_llast->x)) {
		// LINE 2831:
			S_rlast += 0x8;
		// LINE 2832:
			S_rlast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2833:
			S_rlast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2834:
			x_pos++;
		// LINE 2835:
			__asm        jmp    __WHILE_562;
	}
// LINE 2836:
_T5a0:
	city_fovscan_vertedge();
// LINE 2838:
	__asm        jmp    _T607;
// LINE 2841:
_T5aa:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax];
	__asm        mov    x_pos, ax;
// LINE 2842:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax+4];
	__asm        inc    eax;
	__asm        mov    y_pos, ax;
// LINE 2843:
__WHILE_5c2:
	while ((S_rlast->y > S_llast->y)) {
		// LINE 2845:
			S_llast += 0x8;
		// LINE 2846:
			S_llast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2847:
			S_llast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2848:
			y_pos++;
		// LINE 2849:
			__asm        jmp    __WHILE_5c2;
	}
// LINE 2850:
_T602:
	city_fovscan_horizedge();
// LINE 2854:
_T607:
	__asm        jmp    _T719;
_T60c:
	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax], ecx;
	__asm        jge    _T719;

	__asm        mov    eax, S_rlast;
	__asm        mov    ecx, S_llast;
	__asm        mov    ecx, [ecx+4];
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T719;
// LINE 2861:
	__asm        mov    eax, S_llast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jl     _T6bc;

	__asm        mov    eax, S_rlast;
	__asm        movsx  ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jg     _T6bc;
// LINE 2864:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax];
	__asm        dec    eax;
	__asm        mov    x_pos, ax;
// LINE 2865:
	__asm        mov    eax, S_llast;
	__asm        mov    eax, [eax+4];
	__asm        mov    y_pos, ax;
// LINE 2866:
__WHILE_674:
	while ((S_rlast->x < S_llast->x)) {
		// LINE 2868:
			S_llast += 0x8;
		// LINE 2869:
			S_llast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2870:
			S_llast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2871:
			x_pos--;
		// LINE 2872:
			__asm        jmp    __WHILE_674;
	}
// LINE 2873:
_T6b2:
	city_fovscan_vertedge();
// LINE 2875:
	__asm        jmp    _T719;
// LINE 2878:
_T6bc:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax];
	__asm        mov    x_pos, ax;
// LINE 2879:
	__asm        mov    eax, S_rlast;
	__asm        mov    eax, [eax+4];
	__asm        inc    eax;
	__asm        mov    y_pos, ax;
// LINE 2880:
__WHILE_6d4:
	while ((S_rlast->y < S_llast->y)) {
		// LINE 2882:
			S_rlast += 0x8;
		// LINE 2883:
			S_rlast->y = reinterpret_cast<int16_t>(y_pos);
		// LINE 2884:
			S_rlast->x = reinterpret_cast<int16_t>(x_pos);
		// LINE 2885:
			y_pos++;
		// LINE 2886:
			__asm        jmp    __WHILE_6d4;
	}
// LINE 2887:
_T714:
	city_fovscan_horizedge();
// LINE 2893:
_T719:
	__asm        cmp    S_fovlast, 0;
	__asm        jne    __RETURN;
// LINE 2894:
	return;
// LINE 2896:
__RETURN:
}

// FUNCTION: COPTER_D 0x0050f67e
void S3CityGetCells(/*packed*/ struct Point3d *vec, /*packed*/ struct Point2d *cell_array, /*packed*/ struct Point2d **cell_last, /*packed*/ struct Point3d *spos, /*packed*/ struct Point2d *startcell) {
	/*bp-0x4*/   int32_t xi;
	/*bp-0x8*/   unsigned short get_y_next;
	/*bp-0xc*/   long x_cell_adj;
	/*bp-0x10*/  long y_cell_adj;
	/*bp-0x14*/  int32_t x_pos;
	/*bp-0x18*/  int32_t islope;
	/*bp-0x20*/  double ydist; // 0x8 bytes
	/*bp-0x24*/  unsigned short get_x_next;
	/*bp-0x28*/  int32_t yi;
	/*bp-0x2c*/  int32_t y_end;
	/*bp-0x30*/  int32_t y_bound;
	/*bp-0x34*/  /*packed*/ struct Point2d *curr_cell;
	/*bp-0x38*/  int32_t y_delta;
	/*bp-0x3c*/  long x_coord;
	/*bp-0x40*/  int32_t ystepi;
	/*bp-0x44*/  int32_t xstepi;
	/*bp-0x48*/  int32_t slope;
	/*bp-0x4c*/  long y_coord;
	/*bp-0x50*/  int32_t y_pos;
	/*bp-0x58*/  double xdist; // 0x8 bytes
	/*bp-0x5c*/  int32_t x_end;
	/*bp-0x60*/  int32_t x_bound;
	/*bp-0x64*/  int32_t x_delta;

// LINE 2937:
	y_pos = spos->z;
// LINE 2938:
	x_pos = spos->x;
// LINE 2947:
	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax+8], 0xFFFFFFEC;
	__asm        jl     _T151;

	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax+8], 0x14;
	__asm        jg     _T151;
// LINE 2949:
	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax], 0;
	__asm        jle    _T7d;
// LINE 2952:
	x_end = 0x20000000;
// LINE 2953:
	x_delta = 0x400000;
// LINE 2954:
	__asm        mov    eax, x_pos;
	__asm        add    eax, 0x20000000;
	__asm        sar    eax, 0x16;
	__asm        inc    eax;
	__asm        mov    x_bound, eax;
// LINE 2955:
	x_bound = (((x_bound << 0x6) - 0x2000) << 0x10);
// LINE 2956:
	x_cell_adj = 0xffffffff;
// LINE 2958:
	__asm        jmp    _Tb1;
// LINE 2961:
_T7d:
	x_end = 0xe0000000;
// LINE 2962:
	x_delta = 0xffc00000;
// LINE 2963:
	x_bound = ((x_pos + 0x20000000) >> 0x16);
// LINE 2964:
	x_bound = (((x_bound << 0x6) - 0x2000) << 0x10);
// LINE 2965:
	x_cell_adj = 0x0;
// LINE 2970:
_Tb1:
	y_coord = ((0x20000000 - y_pos) >> 0x16);
// LINE 2973:
	curr_cell = cell_array;
// LINE 2974:
	__asm        mov    eax, x_bound;
	__asm        add    eax, 0x20000000;
	__asm        sar    eax, 0x16;
	__asm        add    eax, x_cell_adj;
	__asm        movsx  eax, ax;
	__asm        mov    ecx, curr_cell;
	__asm        mov    [ecx], eax;
// LINE 2975:
	curr_cell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y_coord));
// LINE 2978:
_LOOP_e5:
	for (;;) {
		// LINE 2978:
		_LOOP_e5:
			curr_cell += 0x8;
		// LINE 2979:
			x_bound += x_delta;
		// LINE 2980:
			__asm        mov    eax, x_bound;
			__asm        add    eax, 0x20000000;
			__asm        sar    eax, 0x16;
			__asm        add    eax, x_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx], eax;
		// LINE 2981:
			curr_cell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y_coord));
		// LINE 2986:
			__asm        mov    eax, G_grid_ulc.x;
			__asm        dec    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx];
			__asm        jg     _T137;

			__asm        mov    eax, G_grid_ulc.x;
			__asm        add    eax, G_ViewSize;
			__asm        inc    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx];
			__asm        jge    _T13c;
		// LINE 2988:
		_T137:
			__asm        jmp    _T141;
		// LINE 2990:
		_T13c:
			__asm        jmp    _LOOP_e5;
	}
// LINE 2991:
_T141:
	cell_last-> = (curr_cell - 0x8);
// LINE 2992:
	return;
// LINE 2995:
_T151:
	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax], 0xFFFFFFEC;
	__asm        jl     _T28a;

	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax], 0x14;
	__asm        jg     _T28a;
// LINE 2997:
	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax+8], 0;
	__asm        jle    _T1b2;
// LINE 3000:
	y_end = 0x20000000;
// LINE 3001:
	y_delta = 0x400000;
// LINE 3002:
	__asm        mov    eax, 0x20000000;
	__asm        sub    eax, y_pos;
	__asm        sar    eax, 0x16;
	__asm        inc    eax;
	__asm        mov    y_bound, eax;
// LINE 3003:
	y_bound = ((0x2000 - (y_bound << 0x6)) << 0x10);
// LINE 3004:
	y_cell_adj = 0x0;
// LINE 3007:
	__asm        jmp    _T1e8;
// LINE 3010:
_T1b2:
	y_end = 0xe0000000;
// LINE 3011:
	y_delta = 0xffc00000;
// LINE 3012:
	y_bound = ((0x20000000 - y_pos) >> 0x16);
// LINE 3013:
	y_bound = ((0x2000 - (y_bound << 0x6)) << 0x10);
// LINE 3014:
	y_cell_adj = 0x0;
// LINE 3019:
_T1e8:
	x_coord = ((x_pos + 0x20000000) >> 0x16);
// LINE 3022:
	curr_cell = cell_array;
// LINE 3023:
	__asm        mov    eax, 0x20000000;
	__asm        sub    eax, y_bound;
	__asm        sar    eax, 0x16;
	__asm        add    eax, y_cell_adj;
	__asm        movsx  eax, ax;
	__asm        mov    ecx, curr_cell;
	__asm        mov    [ecx+4], eax;
// LINE 3024:
	curr_cell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x_coord));
// LINE 3027:
_LOOP_21c:
	for (;;) {
		// LINE 3027:
		_LOOP_21c:
			curr_cell += 0x8;
		// LINE 3028:
			y_bound += y_delta;
		// LINE 3029:
			__asm        mov    eax, 0x20000000;
			__asm        sub    eax, y_bound;
			__asm        sar    eax, 0x16;
			__asm        add    eax, y_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx+4], eax;
		// LINE 3030:
			curr_cell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x_coord));
		// LINE 3034:
			__asm        mov    eax, G_grid_ulc.y;
			__asm        dec    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx+4];
			__asm        jg     _T270;

			__asm        mov    eax, G_grid_ulc.y;
			__asm        add    eax, G_ViewSize;
			__asm        inc    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx+4];
			__asm        jge    _T275;
		// LINE 3036:
		_T270:
			__asm        jmp    _T27a;
		// LINE 3038:
		_T275:
			__asm        jmp    _LOOP_21c;
	}
// LINE 3039:
_T27a:
	cell_last-> = (curr_cell - 0x8);
// LINE 3040:
	return;
// LINE 3046:
_T28a:
	__asm        mov    eax, vec;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, vec;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    slope, eax;
// LINE 3047:
	__asm        mov    eax, vec;
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        mov    eax, vec;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    islope, eax;
// LINE 3060:
	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax+8], 0;
	__asm        jge    _T2fc;
// LINE 3062:
	__asm        mov    eax, 0x20000000;
	__asm        sub    eax, y_pos;
	__asm        sar    eax, 0x16;
	__asm        inc    eax;
	__asm        mov    y_bound, eax;
// LINE 3063:
	y_bound = ((0x2000 - (y_bound << 0x6)) << 0x10);
// LINE 3064:
	y_delta = 0xffc00000;
// LINE 3065:
	y_cell_adj = 0x0;
// LINE 3071:
	__asm        jmp    _T32b;
// LINE 3073:
_T2fc:
	y_bound = ((0x20000000 - y_pos) >> 0x16);
// LINE 3074:
	y_bound = ((0x2000 - (y_bound << 0x6)) << 0x10);
// LINE 3075:
	y_delta = 0x400000;
// LINE 3076:
	y_cell_adj = 0x0;
// LINE 3079:
_T32b:
	__asm        mov    eax, y_bound;
	__asm        sub    eax, y_pos;
	__asm        push   eax;
	__asm        mov    eax, islope;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, x_pos;
	__asm        add    ecx, eax;
	__asm        mov    xi, ecx;
// LINE 3090:
	__asm        mov    eax, vec;
	__asm        cmp    dword ptr [eax], 0;
	__asm        jge    _T384;
// LINE 3092:
	x_bound = ((x_pos + 0x20000000) >> 0x16);
// LINE 3093:
	x_bound = (((x_bound << 0x6) - 0x2000) << 0x10);
// LINE 3094:
	x_delta = 0xffc00000;
// LINE 3095:
	x_cell_adj = 0x0;
// LINE 3100:
	__asm        jmp    _T3b2;
// LINE 3102:
_T384:
	__asm        mov    eax, x_pos;
	__asm        add    eax, 0x20000000;
	__asm        sar    eax, 0x16;
	__asm        inc    eax;
	__asm        mov    x_bound, eax;
// LINE 3103:
	x_bound = (((x_bound << 0x6) - 0x2000) << 0x10);
// LINE 3104:
	x_delta = 0x400000;
// LINE 3105:
	x_cell_adj = 0x0;
// LINE 3111:
_T3b2:
	__asm        mov    eax, x_bound;
	__asm        sub    eax, x_pos;
	__asm        push   eax;
	__asm        mov    eax, slope;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, y_pos;
	__asm        add    ecx, eax;
	__asm        mov    yi, ecx;
// LINE 3118:
	curr_cell = cell_array;
// LINE 3121:
	__asm        mov    eax, y_bound;
	__asm        mov    [ebp-0x68], eax;
	__asm        fild   dword ptr [ebp-0x68];
	__asm        mov    eax, y_pos;
	__asm        mov    [ebp-0x6C], eax;
	__asm        fisub  dword ptr [ebp-0x6C];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        mov    eax, y_bound;
	__asm        mov    [ebp-0x70], eax;
	__asm        fild   dword ptr [ebp-0x70];
	__asm        mov    eax, y_pos;
	__asm        mov    [ebp-0x74], eax;
	__asm        fisub  dword ptr [ebp-0x74];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        fmulp;
	__asm        mov    eax, xi;
	__asm        mov    [ebp-0x78], eax;
	__asm        fild   dword ptr [ebp-0x78];
	__asm        mov    eax, x_pos;
	__asm        mov    [ebp-0x7C], eax;
	__asm        fisub  dword ptr [ebp-0x7C];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        mov    eax, xi;
	__asm        mov    [ebp-0x80], eax;
	__asm        fild   dword ptr [ebp-0x80];
	__asm        mov    eax, x_pos;
	__asm        mov    [ebp-0x84], eax;
	__asm        fisub  dword ptr [ebp-0x84];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        fmulp;
	__asm        faddp;
	__asm        fstp   xdist;
// LINE 3123:
	__asm        mov    eax, x_bound;
	__asm        mov    [ebp-0x88], eax;
	__asm        fild   dword ptr [ebp-0x88];
	__asm        mov    eax, x_pos;
	__asm        mov    [ebp-0x8C], eax;
	__asm        fisub  dword ptr [ebp-0x8C];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        mov    eax, x_bound;
	__asm        mov    [ebp-0x90], eax;
	__asm        fild   dword ptr [ebp-0x90];
	__asm        mov    eax, x_pos;
	__asm        mov    [ebp-0x94], eax;
	__asm        fisub  dword ptr [ebp-0x94];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        fmulp;
	__asm        mov    eax, yi;
	__asm        mov    [ebp-0x98], eax;
	__asm        fild   dword ptr [ebp-0x98];
	__asm        mov    eax, y_pos;
	__asm        mov    [ebp-0x9C], eax;
	__asm        fisub  dword ptr [ebp-0x9C];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        mov    eax, yi;
	__asm        mov    [ebp-0xA0], eax;
	__asm        fild   dword ptr [ebp-0xA0];
	__asm        mov    eax, y_pos;
	__asm        mov    [ebp-0xA4], eax;
	__asm        fisub  dword ptr [ebp-0xA4];
	__asm        fdiv   qword ptr ds:[0x592FD0];
	__asm        fmulp;
	__asm        faddp;
	__asm        fstp   ydist;
// LINE 3125:
	__asm        mov    eax, y_delta;
	__asm        push   eax;
	__asm        mov    eax, islope;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    xstepi, eax;
// LINE 3126:
	__asm        mov    eax, x_delta;
	__asm        push   eax;
	__asm        mov    eax, slope;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ystepi, eax;
// LINE 3134:
_LOOP_501:
	for (;;) {
		// LINE 3134:
		_LOOP_501:
			__asm        fld    xdist;
			__asm        fcomp  ydist;
			__asm        fnstsw ax;
			__asm        test   ah, 1;
			__asm        je     _T550;
		// LINE 3136:
			__asm        mov    eax, 0x20000000;
			__asm        sub    eax, y_bound;
			__asm        sar    eax, 0x16;
			__asm        add    eax, y_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx+4], eax;
		// LINE 3137:
			__asm        mov    eax, xi;
			__asm        add    eax, 0x20000000;
			__asm        sar    eax, 0x16;
			__asm        add    eax, x_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx], eax;
		// LINE 3138:
			get_x_next = 0x1;
		// LINE 3139:
			get_y_next = 0x0;
		// LINE 3141:
			__asm        jmp    _T5d8;
		_T550:
			__asm        fld    xdist;
			__asm        fcomp  ydist;
			__asm        fnstsw ax;
			__asm        test   ah, 0x41;
			__asm        jne    _T59f;
		// LINE 3143:
			__asm        mov    eax, x_bound;
			__asm        add    eax, 0x20000000;
			__asm        sar    eax, 0x16;
			__asm        add    eax, x_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx], eax;
		// LINE 3144:
			__asm        mov    eax, 0x20000000;
			__asm        sub    eax, yi;
			__asm        sar    eax, 0x16;
			__asm        add    eax, y_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx+4], eax;
		// LINE 3145:
			get_y_next = 0x1;
		// LINE 3146:
			get_x_next = 0x0;
		// LINE 3148:
			__asm        jmp    _T5d8;
		// LINE 3150:
		_T59f:
			__asm        mov    eax, xi;
			__asm        add    eax, 0x20000000;
			__asm        sar    eax, 0x16;
			__asm        add    eax, x_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx], eax;
		// LINE 3151:
			__asm        mov    eax, 0x20000000;
			__asm        sub    eax, yi;
			__asm        sar    eax, 0x16;
			__asm        add    eax, y_cell_adj;
			__asm        movsx  eax, ax;
			__asm        mov    ecx, curr_cell;
			__asm        mov    [ecx+4], eax;
		// LINE 3152:
			get_y_next = 0x1;
		// LINE 3153:
			get_x_next = 0x1;
		// LINE 3161:
		_T5d8:
			__asm        mov    eax, G_grid_ulc.y;
			__asm        dec    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx+4];
			__asm        jg     _T62a;

			__asm        mov    eax, G_grid_ulc.y;
			__asm        add    eax, G_ViewSize;
			__asm        inc    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx+4];
			__asm        jl     _T62a;

			__asm        mov    eax, G_grid_ulc.x;
			__asm        dec    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx];
			__asm        jg     _T62a;

			__asm        mov    eax, G_grid_ulc.x;
			__asm        add    eax, G_ViewSize;
			__asm        inc    eax;
			__asm        mov    ecx, curr_cell;
			__asm        cmp    eax, [ecx];
			__asm        jge    _T62f;
		// LINE 3163:
		_T62a:
			__asm        jmp    _T7a4;
		// LINE 3166:
		_T62f:
			curr_cell += 0x8;
		// LINE 3172:
			__asm        mov    eax, reinterpret_cast<uint32_t>(get_x_next);
			__asm        and    eax, 0xFFFF;
			__asm        cmp    eax, 1;
			__asm        jne    _T6e9;
		// LINE 3174:
			xi += xstepi;
		// LINE 3175:
			y_bound += y_delta;
		// LINE 3177:
			__asm        mov    eax, y_bound;
			__asm        mov    [ebp-0xA8], eax;
			__asm        fild   dword ptr [ebp-0xA8];
			__asm        mov    eax, y_pos;
			__asm        mov    [ebp-0xAC], eax;
			__asm        fisub  dword ptr [ebp-0xAC];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        mov    eax, y_bound;
			__asm        mov    [ebp-0xB0], eax;
			__asm        fild   dword ptr [ebp-0xB0];
			__asm        mov    eax, y_pos;
			__asm        mov    [ebp-0xB4], eax;
			__asm        fisub  dword ptr [ebp-0xB4];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        fmulp;
			__asm        mov    eax, xi;
			__asm        mov    [ebp-0xB8], eax;
			__asm        fild   dword ptr [ebp-0xB8];
			__asm        mov    eax, x_pos;
			__asm        mov    [ebp-0xBC], eax;
			__asm        fisub  dword ptr [ebp-0xBC];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        mov    eax, xi;
			__asm        mov    [ebp-0xC0], eax;
			__asm        fild   dword ptr [ebp-0xC0];
			__asm        mov    eax, x_pos;
			__asm        mov    [ebp-0xC4], eax;
			__asm        fisub  dword ptr [ebp-0xC4];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        fmulp;
			__asm        faddp;
			__asm        fstp   xdist;
		// LINE 3180:
		_T6e9:
			__asm        mov    eax, reinterpret_cast<uint32_t>(get_y_next);
			__asm        and    eax, 0xFFFF;
			__asm        cmp    eax, 1;
			__asm        jne    _T79f;
		// LINE 3182:
			yi += ystepi;
		// LINE 3183:
			x_bound += x_delta;
		// LINE 3185:
			__asm        mov    eax, x_bound;
			__asm        mov    [ebp-0xC8], eax;
			__asm        fild   dword ptr [ebp-0xC8];
			__asm        mov    eax, x_pos;
			__asm        mov    [ebp-0xCC], eax;
			__asm        fisub  dword ptr [ebp-0xCC];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        mov    eax, x_bound;
			__asm        mov    [ebp-0xD0], eax;
			__asm        fild   dword ptr [ebp-0xD0];
			__asm        mov    eax, x_pos;
			__asm        mov    [ebp-0xD4], eax;
			__asm        fisub  dword ptr [ebp-0xD4];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        fmulp;
			__asm        mov    eax, yi;
			__asm        mov    [ebp-0xD8], eax;
			__asm        fild   dword ptr [ebp-0xD8];
			__asm        mov    eax, y_pos;
			__asm        mov    [ebp-0xDC], eax;
			__asm        fisub  dword ptr [ebp-0xDC];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        mov    eax, yi;
			__asm        mov    [ebp-0xE0], eax;
			__asm        fild   dword ptr [ebp-0xE0];
			__asm        mov    eax, y_pos;
			__asm        mov    [ebp-0xE4], eax;
			__asm        fisub  dword ptr [ebp-0xE4];
			__asm        fdiv   qword ptr ds:[0x592FD0];
			__asm        fmulp;
			__asm        faddp;
			__asm        fstp   ydist;
		// LINE 3187:
		_T79f:
			__asm        jmp    _LOOP_501;
	}
// LINE 3190:
_T7a4:
	cell_last-> = (curr_cell - 0x8);
// LINE 3191:
}

// FUNCTION: COPTER_D 0x0050fe32
void city_fovscan_horizedge() {
	/*bp-0x4*/   long x_pos;
	/*bp-0x8*/   long y_start;
	/*bp-0xc*/   /*packed*/ struct Point2d *rcell;
	/*bp-0x10*/  long x;
	/*bp-0x14*/  long y;
	/*bp-0x18*/  long y_pos;
	/*bp-0x1c*/  /*packed*/ struct _CELL_INFO *cptr;
	/*bp-0x20*/  long x_last;
	/*bp-0x24*/  /*packed*/ struct Point2d *rend;
	/*bp-0x28*/  /*packed*/ struct Point2d *lcell;
	/*bp-0x2c*/  long y_dir;
	/*bp-0x30*/  /*packed*/ struct Point2d *lend;
	/*bp-0x34*/  /*packed*/ struct Point2d *fovcell;

// LINE 3219:
	x_pos = ((ViewState.world_pos.x + 0x20000000) >> 0x16);
// LINE 3221:
	y_pos = ((0x20000000 - S_world_eye.z) >> 0x16);
// LINE 3223:
	y_start = S_llast->y;
// LINE 3226:
	__asm        mov    eax, S_llast;
	__asm        mov    ecx, y_pos;
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _T70;
// LINE 3228:
	y_dir = 0x1;
// LINE 3229:
	lcell = S_llast;
// LINE 3230:
	rcell = S_rlast;
// LINE 3231:
	lend = 0x609108;
// LINE 3232:
	rend = 0x629c50;
// LINE 3234:
	__asm        jmp    _T95;
// LINE 3236:
_T70:
	y_dir = 0xffffffff;
// LINE 3237:
	lcell = S_rlast;
// LINE 3238:
	rcell = S_llast;
// LINE 3239:
	rend = 0x609108;
// LINE 3240:
	lend = 0x629c50;
// LINE 3242:
_T95:
	fovcell = 0x609c50;
// LINE 3247:
_FOR_a7:
	for (y = y_start; ((y_dir + y_pos) != y); y += y_dir) {
		// LINE 3250:
		_FOR_c9:
			for (x = lcell->x; (x_pos > x); x++) {

					__asm        mov    eax, rcell;
					__asm        mov    ecx, x;
					__asm        cmp    [eax], ecx;
					__asm        jl     _FOR_25f;
				// LINE 3253:
					__asm        mov    eax, x;
					__asm        and    eax, 0xFF;
					__asm        shl    eax, 0xA;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    eax, G_omap[0][0][eax+ecx*4];
					__asm        mov    cptr, eax;
				// LINE 3254:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        and    eax, 0xFFF7;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 3259:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax+8];
					__asm        cmp    eax, 1;
					__asm        jle    _T20e;

					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        test   al, 1;
					__asm        je     _T20e;

					__asm        mov    eax, y;
					__asm        add    eax, y_dir;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
					__asm        jne    _T20e;
				// LINE 3262:
					x_last = x;
				// LINE 3263:
				__WHILE_160:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x_last;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
					__asm        jne    _T18c;
				// LINE 3264:
					x_last++;
					__asm        jmp    __WHILE_160;
				// LINE 3264:
					x_last++;
					__asm        jmp    __WHILE_160;
				// LINE 3265:
				_T18c:
					x_last--;
				// LINE 3267:
					__asm        mov    eax, x_last;
					__asm        cmp    x_pos, eax;
					__asm        jle    _T1be;
				// LINE 3269:
					city_subscan_horiz(fovcell, lend, lcell, y_dir, 0x1, x);
				// LINE 3271:
					__asm        jmp    _T1c4;
				// LINE 3273:
				_T1be:
					x_last = x;
				// LINE 3276:
				_T1c4:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3277:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3278:
					fovcell += 0x8;
				// LINE 3279:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T203;
				// LINE 3280:
					ERexit(0x5b5a7c);
				// LINE 3281:
				_T203:
					x = x_last;
				// LINE 3283:
					__asm        jmp    _T24d;
				// LINE 3285:
				_T20e:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3286:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3287:
					fovcell += 0x8;
				// LINE 3288:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T24d;
				// LINE 3289:
					ERexit(0x5b5a8c);
				// LINE 3291:
				_T24d:
			}
		// LINE 3293:
		_FOR_25f:
			for (x = rcell->x; (x_pos < x); x--) {

					__asm        mov    eax, lcell;
					__asm        mov    ecx, x;
					__asm        cmp    [eax], ecx;
					__asm        jg     _T3e8;
				// LINE 3296:
					__asm        mov    eax, x;
					__asm        and    eax, 0xFF;
					__asm        shl    eax, 0xA;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    eax, G_omap[0][0][eax+ecx*4];
					__asm        mov    cptr, eax;
				// LINE 3297:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        and    eax, 0xFFF7;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 3302:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax+8];
					__asm        cmp    eax, 1;
					__asm        jle    _T3a4;

					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        test   al, 1;
					__asm        je     _T3a4;

					__asm        mov    eax, y;
					__asm        add    eax, y_dir;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
					__asm        jne    _T3a4;
				// LINE 3305:
					x_last = x;
				// LINE 3306:
				__WHILE_2f6:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x_last;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
					__asm        jne    _T322;
				// LINE 3307:
					x_last--;
					__asm        jmp    __WHILE_2f6;
				// LINE 3307:
					x_last--;
					__asm        jmp    __WHILE_2f6;
				// LINE 3308:
				_T322:
					x_last++;
				// LINE 3310:
					__asm        mov    eax, x_last;
					__asm        cmp    x_pos, eax;
					__asm        jge    _T354;
				// LINE 3312:
					city_subscan_horiz(fovcell, rend, rcell, y_dir, -0x1, x);
				// LINE 3314:
					__asm        jmp    _T35a;
				// LINE 3316:
				_T354:
					x_last = x;
				// LINE 3319:
				_T35a:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3320:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3321:
					fovcell += 0x8;
				// LINE 3322:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T399;
				// LINE 3323:
					ERexit(0x5b5a9c);
				// LINE 3324:
				_T399:
					x = x_last;
				// LINE 3326:
					__asm        jmp    _T3e3;
				// LINE 3328:
				_T3a4:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3329:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3330:
					fovcell += 0x8;
				// LINE 3331:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T3e3;
				// LINE 3332:
					ERexit(0x5b5aac);
				// LINE 3334:
				_T3e3:
			}
		// LINE 3336:
		_T3e8:
			__asm        mov    eax, lcell;
			__asm        movsx  ecx, reinterpret_cast<uint16_t>(x_pos);
			__asm        cmp    [eax], ecx;
			__asm        jg     __WHILE_445;

			__asm        mov    eax, rcell;
			__asm        movsx  ecx, reinterpret_cast<uint16_t>(x_pos);
			__asm        cmp    [eax], ecx;
			__asm        jl     __WHILE_445;
		// LINE 3338:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x_pos));
		// LINE 3339:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3340:
			fovcell += 0x8;
		// LINE 3341:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     __WHILE_445;
		// LINE 3342:
			ERexit(0x5b5abc);
		// LINE 3346:
		__WHILE_445:
			while ((lcell->y == y)) {

					__asm        mov    eax, lcell;
					__asm        cmp    lend, eax;
					__asm        jae    __WHILE_469;
				// LINE 3347:
					lcell -= 0x8;
					__asm        jmp    __WHILE_445;
			}
		// LINE 3348:
		__WHILE_469:
			while ((rcell->y == y)) {

					__asm        mov    eax, rcell;
					__asm        cmp    rend, eax;
					__asm        jae    _T48d;
				// LINE 3349:
					rcell -= 0x8;
					__asm        jmp    __WHILE_469;
			}
		// LINE 3350:
		_T48d:
	}
// LINE 3352:
_T492:
	S_fovlast = (fovcell - 0x8);
// LINE 3353:
}

// FUNCTION: COPTER_D 0x005102d4
void city_fovscan_vertedge() {
	/*bp-0x4*/   /*packed*/ struct Point2d *tend;
	/*bp-0x8*/   long x_pos;
	/*bp-0xc*/   /*packed*/ struct Point2d *tcell;
	/*bp-0x10*/  long x_dir;
	/*bp-0x14*/  long x;
	/*bp-0x18*/  long y_last;
	/*bp-0x1c*/  long y;
	/*bp-0x20*/  long y_pos;
	/*bp-0x24*/  /*packed*/ struct _CELL_INFO *cptr;
	/*bp-0x28*/  long x_start;
	/*bp-0x2c*/  /*packed*/ struct Point2d *bend;
	/*bp-0x30*/  /*packed*/ struct Point2d *bcell;
	/*bp-0x34*/  /*packed*/ struct Point2d *fovcell;

// LINE 3369:
	y_pos = ((0x20000000 - ViewState.world_pos.z) >> 0x16);
// LINE 3371:
	x_pos = ((S_world_eye.x + 0x20000000) >> 0x16);
// LINE 3373:
	x_start = S_llast->x;
// LINE 3376:
	__asm        mov    eax, S_llast;
	__asm        mov    ecx, x_pos;
	__asm        cmp    [eax], ecx;
	__asm        jge    _T6e;
// LINE 3378:
	x_dir = 0x1;
// LINE 3379:
	bcell = S_llast;
// LINE 3380:
	tcell = S_rlast;
// LINE 3381:
	bend = 0x609108;
// LINE 3382:
	tend = 0x629c50;
// LINE 3384:
	__asm        jmp    _T93;
// LINE 3386:
_T6e:
	x_dir = 0xffffffff;
// LINE 3387:
	bcell = S_rlast;
// LINE 3388:
	tcell = S_llast;
// LINE 3389:
	tend = 0x609108;
// LINE 3390:
	bend = 0x629c50;
// LINE 3392:
_T93:
	fovcell = 0x609c50;
// LINE 3398:
_FOR_a5:
	for (x = x_start; ((x_dir + x_pos) != x); x += x_dir) {
		// LINE 3401:
		_FOR_c8:
			for (y = tcell->y; (y < y_pos); y++) {

					__asm        mov    eax, bcell;
					__asm        mov    ecx, y;
					__asm        cmp    [eax+4], ecx;
					__asm        jl     _FOR_260;
				// LINE 3404:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    eax, G_omap[0][0][ecx+eax*4];
					__asm        mov    cptr, eax;
				// LINE 3405:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        and    eax, 0xFFF7;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 3410:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax+8];
					__asm        cmp    eax, 1;
					__asm        jle    _T20e;

					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        test   al, 1;
					__asm        je     _T20e;

					__asm        mov    eax, x;
					__asm        add    eax, x_dir;
					__asm        and    eax, 0xFF;
					__asm        shl    eax, 0xA;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
					__asm        jne    _T20e;
				// LINE 3413:
					y_last = y;
				// LINE 3414:
				__WHILE_160:
					__asm        mov    eax, y_last;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
					__asm        jne    _T18c;

					y_last++;
					__asm        jmp    __WHILE_160;

					y_last++;
					__asm        jmp    __WHILE_160;
				// LINE 3415:
				_T18c:
					y_last--;
				// LINE 3417:
					__asm        mov    eax, y_pos;
					__asm        cmp    y_last, eax;
					__asm        jge    _T1be;
				// LINE 3419:
					city_subscan_vert(fovcell, tend, tcell, 0x1, x_dir, y);
				// LINE 3421:
					__asm        jmp    _T1c4;
				// LINE 3423:
				_T1be:
					y_last = y;
				// LINE 3426:
				_T1c4:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3427:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3428:
					fovcell += 0x8;
				// LINE 3429:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T203;

					ERexit(0x5b5acc);
				// LINE 3430:
				_T203:
					y = y_last;
				// LINE 3432:
					__asm        jmp    _T24d;
				// LINE 3434:
				_T20e:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3435:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3436:
					fovcell += 0x8;
				// LINE 3437:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T24d;

					ERexit(0x5b5adc);
				// LINE 3439:
				_T24d:
			}
		// LINE 3441:
		_FOR_260:
			for (y = bcell->y; (y > y_pos); y--) {

					__asm        mov    eax, tcell;
					__asm        mov    ecx, y;
					__asm        cmp    [eax+4], ecx;
					__asm        jg     _T3ea;
				// LINE 3444:
					__asm        mov    eax, y;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    eax, G_omap[0][0][ecx+eax*4];
					__asm        mov    cptr, eax;
				// LINE 3445:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        and    eax, 0xFFF7;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx], ax;
				// LINE 3450:
					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax+8];
					__asm        cmp    eax, 1;
					__asm        jle    _T3a6;

					__asm        mov    eax, cptr;
					__asm        movsx  eax, word ptr [eax];
					__asm        test   al, 1;
					__asm        je     _T3a6;

					__asm        mov    eax, x;
					__asm        add    eax, x_dir;
					__asm        and    eax, 0xFF;
					__asm        shl    eax, 0xA;
					__asm        mov    ecx, y;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
					__asm        jne    _T3a6;
				// LINE 3453:
					y_last = y;
				// LINE 3454:
				__WHILE_2f8:
					__asm        mov    eax, y_last;
					__asm        and    eax, 0xFF;
					__asm        mov    ecx, x;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, cptr;
					__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
					__asm        jne    _T324;

					y_last--;
					__asm        jmp    __WHILE_2f8;

					y_last--;
					__asm        jmp    __WHILE_2f8;
				// LINE 3455:
				_T324:
					y_last++;
				// LINE 3457:
					__asm        mov    eax, y_pos;
					__asm        cmp    y_last, eax;
					__asm        jle    _T356;
				// LINE 3459:
					city_subscan_vert(fovcell, bend, bcell, -0x1, x_dir, y);
				// LINE 3461:
					__asm        jmp    _T35c;
				// LINE 3463:
				_T356:
					y_last = y;
				// LINE 3466:
				_T35c:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3467:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3468:
					fovcell += 0x8;
				// LINE 3469:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T39b;

					ERexit(0x5b5aec);
				// LINE 3470:
				_T39b:
					y = y_last;
				// LINE 3472:
					__asm        jmp    _T3e5;
				// LINE 3474:
				_T3a6:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 3475:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 3476:
					fovcell += 0x8;
				// LINE 3477:
					__asm        mov    eax, fovcell;
					__asm        sub    eax, 0x609C50;
					__asm        and    eax, 0xFFFFFFF8;
					__asm        mov    ecx, 0x20000;
					__asm        and    ecx, 0xFFFFFFF8;
					__asm        cmp    eax, ecx;
					__asm        jl     _T3e5;

					ERexit(0x5b5afc);
				// LINE 3479:
				_T3e5:
			}
		// LINE 3481:
		_T3ea:
			__asm        mov    eax, tcell;
			__asm        mov    ecx, y_pos;
			__asm        cmp    [eax+4], ecx;
			__asm        jg     __WHILE_447;

			__asm        mov    eax, bcell;
			__asm        mov    ecx, y_pos;
			__asm        cmp    [eax+4], ecx;
			__asm        jl     __WHILE_447;
		// LINE 3483:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y_pos));
		// LINE 3484:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3485:
			fovcell += 0x8;
		// LINE 3486:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     __WHILE_447;

			ERexit(0x5b5b0c);
		// LINE 3490:
		__WHILE_447:
			while ((tcell->x == x)) {

					__asm        mov    eax, tcell;
					__asm        cmp    tend, eax;
					__asm        jae    __WHILE_46a;

					tcell -= 0x8;
					__asm        jmp    __WHILE_447;
			}
		// LINE 3491:
		__WHILE_46a:
			while ((bcell->x == x)) {

					__asm        mov    eax, bcell;
					__asm        cmp    bend, eax;
					__asm        jae    _T48d;

					bcell -= 0x8;
					__asm        jmp    __WHILE_46a;
			}
		// LINE 3492:
		_T48d:
	}
// LINE 3494:
_T492:
	S_fovlast = (fovcell - 0x8);
// LINE 3495:
}

// FUNCTION: COPTER_D 0x00510776
void city_subscan_horiz(long cellpos, long x_dir, long y_dir, /*packed*/ struct Point2d *edge, /*packed*/ struct Point2d *endedge, /*packed*/ struct Point2d **curr_fovcell) {
	/*bp-0x4*/   long x;
	/*bp-0x8*/   long y;
	/*bp-0xc*/   /*packed*/ struct _CELL_INFO *cptr;
	/*bp-0x10*/  /*packed*/ struct Point2d *fovcell;

// LINE 3523:
	fovcell = curr_fovcell->;
// LINE 3525:
	how_deep++;
// LINE 3526:
	__asm        cmp    how_deep, 0x1E;
	__asm        jle    _T2b;
// LINE 3527:
	y = 0x1;
// LINE 3531:
_T2b:
	y = edge->y;
// LINE 3532:
__WHILE_34:
	while ((edge->y == y)) {

			__asm        mov    eax, edge;
			__asm        cmp    endedge, eax;
			__asm        jae    _T58;

			edge -= 0x8;
			__asm        jmp    __WHILE_34;
	}
// LINE 3533:
_T58:
	__asm        mov    eax, edge;
	__asm        mov    ecx, y;
	__asm        cmp    [eax+4], ecx;
	__asm        jne    _T72;
// LINE 3535:
	how_deep--;
// LINE 3536:
	return;
// LINE 3539:
_T72:
	y = edge->y;
// LINE 3542:
	__asm        cmp    x_dir, 1;
	__asm        jne    _T209;
// LINE 3545:
	__asm        mov    eax, edge;
	__asm        movsx  ecx, reinterpret_cast<uint16_t>(cellpos);
	__asm        cmp    [eax], ecx;
	__asm        jle    _FOR_aa;

	edge->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(cellpos));
// LINE 3548:
_FOR_aa:
	for (x = edge->x; (x <= cellpos); x++) {
		// LINE 3550:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        mov    eax, G_omap[0][0][ecx+eax*4];
			__asm        mov    cptr, eax;
		// LINE 3551:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFF7;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx], ax;
		// LINE 3556:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax+8];
			__asm        cmp    eax, 1;
			__asm        jle    _T1c0;

			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        je     _T1c0;

			__asm        mov    eax, y;
			__asm        add    eax, y_dir;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
			__asm        jne    _T1c0;
		// LINE 3558:
			city_subscan_horiz(fovcell, endedge, edge, y_dir, x_dir, x);
		// LINE 3560:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3561:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3562:
			fovcell += 0x8;
		// LINE 3563:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     __WHILE_18c;

			ERexit(0x5b5b1c);
		// LINE 3565:
		__WHILE_18c:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
			__asm        jne    _T1b8;

			x++;
			__asm        jmp    __WHILE_18c;

			x++;
			__asm        jmp    __WHILE_18c;
		// LINE 3566:
		_T1b8:
			x--;
		// LINE 3568:
			__asm        jmp    _T1ff;
		// LINE 3570:
		_T1c0:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3571:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3572:
			fovcell += 0x8;
		// LINE 3573:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     _T1ff;

			ERexit(0x5b5b2c);
		// LINE 3575:
		_T1ff:
	}
// LINE 3577:
_T204:
	__asm        jmp    _T388;
// LINE 3581:
_T209:
	__asm        mov    eax, edge;
	__asm        movsx  ecx, reinterpret_cast<uint16_t>(cellpos);
	__asm        cmp    [eax], ecx;
	__asm        jge    _FOR_22e;

	edge->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(cellpos));
// LINE 3583:
_FOR_22e:
	for (x = edge->x; (x >= cellpos); x--) {
		// LINE 3585:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        mov    eax, G_omap[0][0][ecx+eax*4];
			__asm        mov    cptr, eax;
		// LINE 3586:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFF7;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx], ax;
		// LINE 3591:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax+8];
			__asm        cmp    eax, 1;
			__asm        jle    _T344;

			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        je     _T344;

			__asm        mov    eax, y;
			__asm        add    eax, y_dir;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
			__asm        jne    _T344;
		// LINE 3593:
			city_subscan_horiz(fovcell, endedge, edge, y_dir, x_dir, x);
		// LINE 3595:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3596:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3597:
			fovcell += 0x8;
		// LINE 3598:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     __WHILE_310;

			ERexit(0x5b5b3c);
		// LINE 3600:
		__WHILE_310:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
			__asm        jne    _T33c;

			x--;
			__asm        jmp    __WHILE_310;

			x--;
			__asm        jmp    __WHILE_310;
		// LINE 3601:
		_T33c:
			x++;
		// LINE 3603:
			__asm        jmp    _T383;
		// LINE 3605:
		_T344:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3606:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3607:
			fovcell += 0x8;
		// LINE 3608:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     _T383;

			ERexit(0x5b5b4c);
		// LINE 3610:
		_T383:
	}
// LINE 3617:
_T388:
	__asm        mov    eax, y;
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, cellpos;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    eax, G_omap[0][0][ecx+eax*4];
	__asm        mov    cptr, eax;
// LINE 3618:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        and    eax, 0xFFF7;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx], ax;
// LINE 3619:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+8];
	__asm        cmp    eax, 1;
	__asm        jle    _T41c;

	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        test   al, 1;
	__asm        je     _T41c;

	__asm        mov    eax, y;
	__asm        add    eax, y_dir;
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, cellpos;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, cptr;
	__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
	__asm        jne    _T41c;
// LINE 3621:
	city_subscan_horiz(fovcell, endedge, edge, y_dir, x_dir, cellpos);
// LINE 3624:
_T41c:
	curr_fovcell-> = fovcell;
// LINE 3627:
	edge->x = (reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x_dir)) + reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(cellpos)));
// LINE 3628:
__WHILE_433:
	__asm        mov    eax, edge;
	__asm        mov    eax, [eax+4];
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, edge;
	__asm        mov    ecx, [ecx];
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, cptr;
	__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
	__asm        jne    _T46a;

	edge->x += reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x_dir));
	__asm        jmp    __WHILE_433;

	edge->x += reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x_dir));
	__asm        jmp    __WHILE_433;
// LINE 3630:
_T46a:
	how_deep--;
// LINE 3632:
}

// FUNCTION: COPTER_D 0x00510beb
void city_subscan_vert(long cellpos, long x_dir, long y_dir, /*packed*/ struct Point2d *edge, /*packed*/ struct Point2d *endedge, /*packed*/ struct Point2d **curr_fovcell) {
	/*bp-0x4*/   long x;
	/*bp-0x8*/   long y;
	/*bp-0xc*/   /*packed*/ struct _CELL_INFO *cptr;
	/*bp-0x10*/  /*packed*/ struct Point2d *fovcell;

// LINE 3640:
	fovcell = curr_fovcell->;
// LINE 3643:
	x = edge->x;
// LINE 3644:
__WHILE_19:
	while ((edge->x == x)) {

			__asm        mov    eax, edge;
			__asm        cmp    endedge, eax;
			__asm        jae    _T3c;

			edge -= 0x8;
			__asm        jmp    __WHILE_19;
	}
// LINE 3645:
_T3c:
	__asm        mov    eax, edge;
	__asm        mov    ecx, x;
	__asm        cmp    [eax], ecx;
	__asm        jne    _T4f;
// LINE 3646:
	return;
// LINE 3648:
_T4f:
	x = edge->x;
// LINE 3650:
	__asm        cmp    y_dir, 1;
	__asm        jne    _T1e8;
// LINE 3653:
	__asm        mov    eax, edge;
	__asm        movsx  ecx, reinterpret_cast<uint16_t>(cellpos);
	__asm        cmp    [eax+4], ecx;
	__asm        jle    _FOR_89;

	edge->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(cellpos));
// LINE 3655:
_FOR_89:
	for (y = edge->y; (y <= cellpos); y++) {
		// LINE 3657:
			__asm        mov    eax, x;
			__asm        and    eax, 0xFF;
			__asm        shl    eax, 0xA;
			__asm        mov    ecx, y;
			__asm        and    ecx, 0xFF;
			__asm        mov    eax, G_omap[0][0][eax+ecx*4];
			__asm        mov    cptr, eax;
		// LINE 3658:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFF7;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx], ax;
		// LINE 3663:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax+8];
			__asm        cmp    eax, 1;
			__asm        jle    _T19f;

			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        je     _T19f;

			__asm        mov    eax, x;
			__asm        add    eax, x_dir;
			__asm        and    eax, 0xFF;
			__asm        shl    eax, 0xA;
			__asm        mov    ecx, y;
			__asm        and    ecx, 0xFF;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
			__asm        jne    _T19f;
		// LINE 3665:
			city_subscan_vert(fovcell, endedge, edge, y_dir, x_dir, y);
		// LINE 3667:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3668:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3669:
			fovcell += 0x8;
		// LINE 3670:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     __WHILE_16b;

			ERexit(0x5b5b5c);
		// LINE 3672:
		__WHILE_16b:
			__asm        mov    eax, x;
			__asm        and    eax, 0xFF;
			__asm        shl    eax, 0xA;
			__asm        mov    ecx, y;
			__asm        and    ecx, 0xFF;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
			__asm        jne    _T197;

			y++;
			__asm        jmp    __WHILE_16b;

			y++;
			__asm        jmp    __WHILE_16b;
		// LINE 3673:
		_T197:
			y--;
		// LINE 3675:
			__asm        jmp    _T1de;
		// LINE 3677:
		_T19f:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3678:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3679:
			fovcell += 0x8;
		// LINE 3680:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     _T1de;

			ERexit(0x5b5b6c);
		// LINE 3682:
		_T1de:
	}
// LINE 3684:
_T1e3:
	__asm        jmp    _T36a;
// LINE 3688:
_T1e8:
	__asm        mov    eax, edge;
	__asm        movsx  ecx, reinterpret_cast<uint16_t>(cellpos);
	__asm        cmp    [eax+4], ecx;
	__asm        jge    _FOR_210;

	edge->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(cellpos));
// LINE 3690:
_FOR_210:
	for (y = edge->y; (y >= cellpos); y--) {
		// LINE 3692:
			__asm        mov    eax, x;
			__asm        and    eax, 0xFF;
			__asm        shl    eax, 0xA;
			__asm        mov    ecx, y;
			__asm        and    ecx, 0xFF;
			__asm        mov    eax, G_omap[0][0][eax+ecx*4];
			__asm        mov    cptr, eax;
		// LINE 3693:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFF7;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx], ax;
		// LINE 3698:
			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax+8];
			__asm        cmp    eax, 1;
			__asm        jle    _T326;

			__asm        mov    eax, cptr;
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        je     _T326;

			__asm        mov    eax, x;
			__asm        add    eax, x_dir;
			__asm        and    eax, 0xFF;
			__asm        shl    eax, 0xA;
			__asm        mov    ecx, y;
			__asm        and    ecx, 0xFF;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
			__asm        jne    _T326;
		// LINE 3700:
			city_subscan_vert(fovcell, endedge, edge, y_dir, x_dir, y);
		// LINE 3702:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3703:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3704:
			fovcell += 0x8;
		// LINE 3705:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     __WHILE_2f2;

			ERexit(0x5b5b7c);
		// LINE 3707:
		__WHILE_2f2:
			__asm        mov    eax, x;
			__asm        and    eax, 0xFF;
			__asm        shl    eax, 0xA;
			__asm        mov    ecx, y;
			__asm        and    ecx, 0xFF;
			__asm        mov    edx, cptr;
			__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
			__asm        jne    _T31e;

			y--;
			__asm        jmp    __WHILE_2f2;

			y--;
			__asm        jmp    __WHILE_2f2;
		// LINE 3708:
		_T31e:
			y++;
		// LINE 3710:
			__asm        jmp    _T365;
		// LINE 3712:
		_T326:
			fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
		// LINE 3713:
			fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
		// LINE 3714:
			fovcell += 0x8;
		// LINE 3715:
			__asm        mov    eax, fovcell;
			__asm        sub    eax, 0x609C50;
			__asm        and    eax, 0xFFFFFFF8;
			__asm        mov    ecx, 0x20000;
			__asm        and    ecx, 0xFFFFFFF8;
			__asm        cmp    eax, ecx;
			__asm        jl     _T365;

			ERexit(0x5b5b8c);
		// LINE 3717:
		_T365:
	}
// LINE 3725:
_T36a:
	__asm        mov    eax, cellpos;
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, x;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    eax, G_omap[0][0][ecx+eax*4];
	__asm        mov    cptr, eax;
// LINE 3726:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        and    eax, 0xFFF7;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx], ax;
// LINE 3727:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+8];
	__asm        cmp    eax, 1;
	__asm        jle    _T3fe;

	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        test   al, 1;
	__asm        je     _T3fe;

	__asm        mov    eax, x;
	__asm        add    eax, x_dir;
	__asm        and    eax, 0xFF;
	__asm        shl    eax, 0xA;
	__asm        mov    ecx, cellpos;
	__asm        and    ecx, 0xFF;
	__asm        mov    edx, cptr;
	__asm        cmp    G_omap[0][0][eax+ecx*4], edx;
	__asm        jne    _T3fe;
// LINE 3729:
	city_subscan_vert(fovcell, endedge, edge, y_dir, x_dir, cellpos);
// LINE 3732:
_T3fe:
	curr_fovcell-> = fovcell;
// LINE 3735:
	edge->y = (reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y_dir)) + reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(cellpos)));
// LINE 3736:
__WHILE_416:
	__asm        mov    eax, edge;
	__asm        mov    eax, [eax+4];
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, edge;
	__asm        mov    ecx, [ecx];
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, cptr;
	__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
	__asm        jne    __RETURN;

	edge->y += reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y_dir));
	__asm        jmp    __WHILE_416;

	edge->y += reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y_dir));
	__asm        jmp    __WHILE_416;
// LINE 3738:
__RETURN:
}

// FUNCTION: COPTER_D 0x0051103e
void S3CityDrawGrid() {
	/*bp-0x4*/   short ydiff;
	/*bp-0x8*/   long coffset;
	/*bp-0xc*/   long * sface;
	/*bp-0x10*/  /*packed*/ struct _CELL_INFO ***caddr;
	/*bp-0x14*/  short dist;
	/*bp-0x18*/  /*packed*/ struct Point2d *cellptr;
	/*bp-0x1c*/  short xdiff;
	/*bp-0x20*/  long texid;
	/*bp-0x24*/  long gx;
	/*bp-0x28*/  long deltac;
	/*bp-0x2c*/  /*packed*/ struct _CELL_INFO **cptrptr;
	/*bp-0x30*/  long gy;

// LINE 3767:
	cptrptr = GridSortCells;
// LINE 3768:
	caddr = GridCellAddrs;
// LINE 3769:
	GridNSortCells = 0x0;
// LINE 3770:
	G_numcellsrej = 0x0;
// LINE 3771:
	S_tmpcell_ctr = 0x0;
// LINE 3774:
	cellptr = 0x609c50;
// LINE 3775:
	GridNSortFaces = 0x0;
// LINE 3776:
	sface = GridSortFaces;
// LINE 3778:
_FOR_55:
	for (; (S_fovlast >= cellptr); cellptr += 0x8) {
		// LINE 3781:
			gx = (cellptr->x - G_grid_ulc.x);
		// LINE 3782:
			gy = (cellptr->y - G_grid_ulc.y);
		// LINE 3785:
			__asm        cmp    gx, 0;
			__asm        jl     _Tb5;

			__asm        mov    eax, G_ViewSize;
			__asm        cmp    gx, eax;
			__asm        jge    _Tb5;

			__asm        cmp    gy, 0;
			__asm        jl     _Tb5;

			__asm        mov    eax, G_ViewSize;
			__asm        cmp    gy, eax;
			__asm        jl     _Tba;
		// LINE 3786:
		_Tb5:
			__asm        jmp    _FOR_NEXT_55;
		// LINE 3789:
		_Tba:
			__asm        mov    eax, cellptr;
			__asm        mov    eax, [eax+4];
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, cellptr;
			__asm        mov    ecx, [ecx];
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        lea    eax, [ecx+eax*4];
			__asm        add    eax, 0x67ED30;
			__asm        mov    ecx, caddr;
			__asm        mov    [ecx], eax;
		// LINE 3790:
			cptrptr-> = caddr->->;
		// LINE 3792:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        push   eax;
			__asm        call   S3CityCellViewReject;
			__asm        add    esp, 4;
			__asm        cmp    eax, 1;
			__asm        jne    _T10e;
		// LINE 3794:
			G_numcellsrej++;
		// LINE 3795:
			__asm        jmp    _FOR_NEXT_55;
		// LINE 3798:
		_T10e:
			__asm        mov    eax, cellptr;
			__asm        mov    eax, [eax+4];
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, cellptr;
			__asm        mov    ecx, [ecx];
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 8;
			__asm        xor    edx, edx;
			__asm        mov    dl, G_texmap[0][eax+ecx];
			__asm        mov    texid, edx;
		// LINE 3799:
			__asm        cmp    texid, 0;
			__asm        je     _T147;

			__asm        cmp    texid, 5;
			__asm        jne    _T14f;
		// LINE 3801:
		_T147:
			texid += S_water_cycle;
		// LINE 3803:
		_T14f:
			__asm        mov    eax, texid;
			__asm        mov    eax, G_terr2bmp[eax*4];
			__asm        mov    texid, eax;
		// LINE 3805:
			__asm        cmp    G_texterr, 1;
			__asm        jne    _T18a;
		// LINE 3807:
			texid = VRInt2BmpHdr(texid, G_restex);
		// LINE 3808:
			deltac = 0x0;
		// LINE 3810:
			__asm        jmp    _T1a0;
		// LINE 3812:
		_T18a:
			texid = VRGetTexColor(texid);
		// LINE 3813:
			deltac = 0x1;
		// LINE 3821:
		_T1a0:
			__asm        mov    eax, gy;
			__asm        mov    ecx, eax;
			__asm        lea    eax, [eax+eax*2];
			__asm        lea    eax, [eax+eax*8];
			__asm        lea    eax, [eax+eax*8];
			__asm        add    eax, ecx;
			__asm        mov    ecx, gx;
			__asm        mov    eax, GridCellOffsets[0][eax+ecx*4];
			__asm        mov    coffset, eax;
		// LINE 3823:
			sface[0] = coffset;
		// LINE 3824:
			__asm        mov    eax, texid;
			__asm        mov    ecx, sface;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], eax;
		// LINE 3826:
			sface += 0x4;
		// LINE 3827:
			sface[0] = (GridFaceSize + coffset);
		// LINE 3828:
			__asm        mov    eax, deltac;
			__asm        add    eax, texid;
			__asm        mov    ecx, sface;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], eax;
		// LINE 3830:
			sface += 0x4;
		// LINE 3832:
			GridNSortFaces += 0x2;
		// LINE 3836:
			__asm        mov    eax, cptrptr;
			__asm        cmp    dword ptr [eax], 0;
			__asm        je     _T3b0;
		// LINE 3839:
			cptrptr->->vwptr = 0x0;
		// LINE 3840:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFFB;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3842:
			__asm        mov    eax, cellptr;
			__asm        mov    eax, [eax];
			__asm        sub    eax, S_curr_pos.x;
			__asm        mov    xdiff, ax;
		// LINE 3843:
			__asm        mov    eax, cellptr;
			__asm        mov    eax, [eax+4];
			__asm        sub    eax, S_curr_pos.y;
			__asm        mov    ydiff, ax;
		// LINE 3844:
			__asm        movsx  eax, xdiff;
			__asm        test   eax, eax;
			__asm        jge    _T25a;

			__asm        movsx  eax, xdiff;
			__asm        neg    eax;
			__asm        mov    xdiff, ax;
		// LINE 3845:
		_T25a:
			__asm        movsx  eax, ydiff;
			__asm        test   eax, eax;
			__asm        jge    _T270;

			__asm        movsx  eax, ydiff;
			__asm        neg    eax;
			__asm        mov    ydiff, ax;
		// LINE 3846:
		_T270:
			__asm        movsx  eax, ydiff;
			__asm        movsx  ecx, xdiff;
			__asm        cmp    eax, ecx;
			__asm        jge    _T294;
		// LINE 3848:
			__asm        movsx  eax, xdiff;
			__asm        movsx  ecx, ydiff;
			__asm        lea    eax, [ecx+eax*2];
			__asm        mov    dist, ax;
		// LINE 3850:
			__asm        jmp    _T2a3;
		// LINE 3852:
		_T294:
			__asm        movsx  eax, ydiff;
			__asm        movsx  ecx, xdiff;
			__asm        lea    eax, [ecx+eax*2];
			__asm        mov    dist, ax;
		// LINE 3854:
		_T2a3:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+8];
			__asm        mov    [ebp-0x34], eax;
			__asm        jmp    _T38e;
		// LINE 3857:
		_T2b4:
			__asm        movsx  eax, S_lowres_dist;
			__asm        movsx  ecx, dist;
			__asm        cmp    eax, ecx;
			__asm        jge    _T2df;
		// LINE 3858:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        or     eax, 2;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3859:
			__asm        jmp    _T2f4;
		// LINE 3860:
		_T2df:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3861:
		_T2f4:
			__asm        jmp    _T3a7;
		// LINE 3863:
		_T2f9:
			__asm        movsx  eax, S_lowres_dist;
			__asm        add    eax, 9;
			__asm        movsx  ecx, dist;
			__asm        cmp    eax, ecx;
			__asm        jge    _T327;
		// LINE 3864:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        or     eax, 2;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3865:
			__asm        jmp    _T33c;
		// LINE 3866:
		_T327:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3867:
		_T33c:
			__asm        jmp    _T3a7;
		// LINE 3869:
		_T341:
			__asm        movsx  eax, S_lowres_dist;
			__asm        add    eax, 0xF;
			__asm        movsx  ecx, dist;
			__asm        cmp    eax, ecx;
			__asm        jge    _T36f;
		// LINE 3870:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        or     eax, 2;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3871:
			__asm        jmp    _T384;
		// LINE 3872:
		_T36f:
			__asm        mov    eax, cptrptr;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, cptrptr;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx], ax;
		// LINE 3873:
		_T384:
			__asm        jmp    _T3a7;
		// LINE 3874:
			__asm        jmp    _T3a7;
		_T38e:
			__asm        cmp    dword ptr [ebp-0x34], 1;
			__asm        je     _T2b4;

			__asm        cmp    dword ptr [ebp-0x34], 2;
			__asm        je     _T2f9;

			__asm        jmp    _T341;
		// LINE 3875:
		_T3a7:
			cptrptr->->ctr++;
		// LINE 3877:
		_T3b0:
			cptrptr += 0x4;
		// LINE 3878:
			caddr += 0x4;
		// LINE 3879:
			GridNSortCells++;
	}
// LINE 3883:
_T3c3:
	S_water_timer += LoopTime;
// LINE 3884:
	__asm        cmp    S_water_timer, 0xFA0;
	__asm        jle    _T405;
// LINE 3886:
	S_water_timer = 0x0;
// LINE 3887:
	S_water_cycle++;
// LINE 3888:
	__asm        cmp    S_water_cycle, 4;
	__asm        jle    _T405;
// LINE 3890:
	S_water_cycle = 0x0;
// LINE 3896:
_T405:
	__asm        cmp    GridNSortCells, 0;
	__asm        jne    _T417;
// LINE 3897:
	return;
// LINE 3904:
_T417:
	cptrptr -= 0x4;
// LINE 3905:
	caddr -= 0x4;
// LINE 3906:
	S3CityDyObjFixup(caddr, cptrptr);
// LINE 3911:
	__asm        call   0x004E2090;
// LINE 3912:
	__asm        call   0x004D6AFC;
// LINE 3913:
}

// FUNCTION: COPTER_D 0x0051147c
void S3CityDyObjFixup(/*packed*/ struct _CELL_INFO **endcptrptr, /*packed*/ struct _CELL_INFO ***endcaddr) {
	/*bp-0x4*/   /*packed*/ struct _CELL_INFO ***caddr1;
	/*bp-0x8*/   /*packed*/ struct _DYOBJ_INST *tmpdyobj;
	/*bp-0xc*/   /*packed*/ struct _DYOBJ_INST *dyobj;
	/*bp-0x10*/  /*packed*/ struct _CELL_INFO **cadd1;
	/*bp-0x14*/  /*packed*/ struct _CELL_INFO *cptr1;
	/*bp-0x18*/  /*packed*/ struct _CELL_INFO **cadd2;
	/*bp-0x1c*/  /*packed*/ struct _CELL_INFO *cptr2;
	/*bp-0x20*/  /*packed*/ struct _CELL_INFO **cadd3;
	/*bp-0x24*/  /*packed*/ struct _CELL_INFO *cptr3;
	/*bp-0x28*/  /*packed*/ struct _CELL_INFO **cadd4;
	/*bp-0x2c*/  /*packed*/ struct _CELL_INFO *cptr4;
	/*bp-0x30*/  /*packed*/ struct _CELL_INFO ***caddr2;
	/*bp-0x34*/  int32_t rad;
	/*bp-0x38*/  long x;
	/*bp-0x3c*/  /*packed*/ struct _CELL_INFO **cptrptr2;
	/*bp-0x40*/  long y;
	/*bp-0x44*/  long i;
	/*bp-0x9c*/  /*packed*/ struct VRview pos; // 0x58 bytes
	/*bp-0xa0*/  /*packed*/ struct _CELL_INFO **cptrptr1;

// LINE 3970:
_FOR_27:
	i = 0x0;
	cptrptr1 = endcptrptr;
	caddr1 = endcaddr;
	__asm        jmp    _FOR_COND_27;
_FOR_NEXT_27:
	i++;
	cptrptr1 -= 0x4;
	caddr1 -= 0x4;
_FOR_COND_27:
	__asm        mov    eax, GridNSortCells;
	__asm        cmp    i, eax;
	__asm        jge    __RETURN;
// LINE 3973:
	__asm        mov    eax, cptrptr1;
	__asm        mov    eax, [eax];
	__asm        movsx  eax, word ptr [eax];
	__asm        test   al, 4;
	__asm        je     _T5b;
// LINE 3974:
	__asm        jmp    _FOR_NEXT_27;
// LINE 3977:
_T5b:
	__asm        mov    eax, cptrptr1;
	__asm        mov    eax, [eax];
	__asm        movsx  eax, word ptr [eax];
	__asm        or     eax, 4;
	__asm        mov    ecx, cptrptr1;
	__asm        mov    ecx, [ecx];
	__asm        mov    [ecx], ax;
// LINE 3980:
	__asm        mov    eax, cptrptr1;
	__asm        mov    eax, [eax];
	__asm        cmp    dword ptr [eax+0x10], 0;
	__asm        jne    _T8b;
// LINE 3981:
	__asm        jmp    _FOR_NEXT_27;
// LINE 3987:
_T8b:
	dyobj = cptrptr1->->dyptr;
// LINE 3988:
__WHILE_99:
	while ((dyobj != 0x0)) {
		// LINE 3991:
			dyobj->vnext = 0x0;
		// LINE 3992:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    [ecx+0xC], ax;
		// LINE 4044:
			__asm        cmp    S_used_spiralscan, 1;
			__asm        jne    _T144;

			__asm        mov    eax, G_uheli;
			__asm        mov    ecx, dyobj;
			__asm        cmp    [eax+0xA4], ecx;
			__asm        jne    _T144;
		// LINE 4047:
			cptr1 = endcptrptr->;
		// LINE 4048:
			__asm        mov    eax, cptr1;
			__asm        mov    ecx, dyobj;
			__asm        cmp    [eax+0x14], ecx;
			__asm        jne    _T114;

			_assert(0xfd0, 0x5b5b9c, 0x5b5bbc);
			__asm        jmp    _T119;
		_T114:
			__asm        jmp    _T119;
		// LINE 4049:
		_T119:
			dyobj->vnext = cptr1->vwptr;
		// LINE 4050:
			cptr1->vwptr = dyobj;
		// LINE 4051:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    [ecx+0xC], ax;
		// LINE 4052:
			__asm        jmp    next_dyobj;
		// LINE 4056:
		_T144:
			rad = dyobj->radius;
		// LINE 4057:
			x = (((dyobj->loc.x - rad) + 0x20000000) >> 0x16);
		// LINE 4058:
			y = (((0x20000000 - dyobj->loc.z) - rad) >> 0x16);
		// LINE 4059:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        lea    eax, [ecx+eax*4];
			__asm        add    eax, 0x67ED30;
			__asm        mov    cadd1, eax;
		// LINE 4060:
			cptr1 = cadd1->;
		// LINE 4061:
			x = (((dyobj->loc.x + rad) + 0x20000000) >> 0x16);
		// LINE 4062:
			y = (((0x20000000 - dyobj->loc.z) - rad) >> 0x16);
		// LINE 4063:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        lea    eax, [ecx+eax*4];
			__asm        add    eax, 0x67ED30;
			__asm        mov    cadd2, eax;
		// LINE 4064:
			cptr2 = cadd2->;
		// LINE 4065:
			x = (((dyobj->loc.x - rad) + 0x20000000) >> 0x16);
		// LINE 4066:
			y = (((0x20000000 - dyobj->loc.z) + rad) >> 0x16);
		// LINE 4067:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        lea    eax, [ecx+eax*4];
			__asm        add    eax, 0x67ED30;
			__asm        mov    cadd3, eax;
		// LINE 4068:
			cptr3 = cadd3->;
		// LINE 4069:
			x = (((dyobj->loc.x + rad) + 0x20000000) >> 0x16);
		// LINE 4070:
			y = (((0x20000000 - dyobj->loc.z) + rad) >> 0x16);
		// LINE 4071:
			__asm        mov    eax, y;
			__asm        and    eax, 0xFF;
			__asm        mov    ecx, x;
			__asm        and    ecx, 0xFF;
			__asm        shl    ecx, 0xA;
			__asm        lea    eax, [ecx+eax*4];
			__asm        add    eax, 0x67ED30;
			__asm        mov    cadd4, eax;
		// LINE 4072:
			cptr4 = cadd4->;
		// LINE 4075:
			__asm        mov    eax, cptr1;
			__asm        cmp    cptr2, eax;
			__asm        jne    _FOR_2c3;

			__asm        mov    eax, cptr2;
			__asm        cmp    cptr3, eax;
			__asm        jne    _FOR_2c3;

			__asm        mov    eax, cptr3;
			__asm        cmp    cptr4, eax;
			__asm        jne    _FOR_2c3;
		// LINE 4079:
			__asm        jmp    next_dyobj;
		// LINE 4086:
		_FOR_2c3:
			cptrptr2 = endcptrptr;
			caddr2 = endcaddr;
			__asm        jmp    _FOR_COND_2c3;
		_FOR_NEXT_2c3:
			cptrptr2 -= 0x4;
			caddr2 -= 0x4;
		_FOR_COND_2c3:
			__asm        mov    eax, cptrptr1;
			__asm        cmp    cptrptr2, eax;
			__asm        jbe    next_dyobj;
		// LINE 4088:
			__asm        mov    eax, cptrptr2;
			__asm        mov    ecx, cptrptr1;
			__asm        mov    ecx, [ecx];
			__asm        cmp    [eax], ecx;
			__asm        je     _T5d8;
		// LINE 4090:
			__asm        mov    eax, cptrptr2;
			__asm        mov    ecx, cptr1;
			__asm        cmp    [eax], ecx;
			__asm        jne    _T3a9;
		// LINE 4097:
			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xA];
			__asm        cmp    eax, 1;
			__asm        jle    _T349;

			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        jne    _T349;

			__asm        lea    eax, cptr1;
			__asm        push   eax;
			__asm        mov    eax, cadd1;
			__asm        push   eax;
			__asm        mov    eax, caddr1;
			__asm        push   eax;
			__asm        mov    eax, caddr2;
			__asm        push   eax;
			__asm        call   S3CityCellInFront;
			__asm        add    esp, 0x10;
			__asm        test   eax, eax;
			__asm        jne    _T349;
		// LINE 4099:
			cptr1 = 0x0;
		// LINE 4100:
			__asm        jmp    _FOR_NEXT_2c3;
		// LINE 4104:
		_T349:
			__asm        mov    eax, cptr1;
			__asm        mov    ecx, dyobj;
			__asm        cmp    [eax+0x14], ecx;
			__asm        jne    _T374;

			_assert(0x1008, 0x5b5bd4, 0x5b5bf4);
			__asm        jmp    _T379;
		_T374:
			__asm        jmp    _T379;
		// LINE 4105:
		_T379:
			dyobj->vnext = cptr1->vwptr;
		// LINE 4106:
			cptr1->vwptr = dyobj;
		// LINE 4107:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    [ecx+0xC], ax;
		// LINE 4108:
			__asm        jmp    next_dyobj;
		// LINE 4110:
			__asm        jmp    _T5d8;
		_T3a9:
			__asm        mov    eax, cptrptr2;
			__asm        mov    ecx, cptr2;
			__asm        cmp    [eax], ecx;
			__asm        jne    _T465;
		// LINE 4117:
			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xA];
			__asm        cmp    eax, 1;
			__asm        jle    _T405;

			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        jne    _T405;

			__asm        lea    eax, cptr2;
			__asm        push   eax;
			__asm        mov    eax, cadd2;
			__asm        push   eax;
			__asm        mov    eax, caddr1;
			__asm        push   eax;
			__asm        mov    eax, caddr2;
			__asm        push   eax;
			__asm        call   S3CityCellInFront;
			__asm        add    esp, 0x10;
			__asm        test   eax, eax;
			__asm        jne    _T405;
		// LINE 4119:
			cptr2 = 0x0;
		// LINE 4120:
			__asm        jmp    _FOR_NEXT_2c3;
		// LINE 4124:
		_T405:
			__asm        mov    eax, cptr2;
			__asm        mov    ecx, dyobj;
			__asm        cmp    [eax+0x14], ecx;
			__asm        jne    _T430;

			_assert(0x101c, 0x5b5c0c, 0x5b5c2c);
			__asm        jmp    _T435;
		_T430:
			__asm        jmp    _T435;
		// LINE 4125:
		_T435:
			dyobj->vnext = cptr2->vwptr;
		// LINE 4126:
			cptr2->vwptr = dyobj;
		// LINE 4127:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    [ecx+0xC], ax;
		// LINE 4128:
			__asm        jmp    next_dyobj;
		// LINE 4130:
			__asm        jmp    _T5d8;
		_T465:
			__asm        mov    eax, cptrptr2;
			__asm        mov    ecx, cptr3;
			__asm        cmp    [eax], ecx;
			__asm        jne    _T521;
		// LINE 4137:
			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xA];
			__asm        cmp    eax, 1;
			__asm        jle    _T4c1;

			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        jne    _T4c1;

			__asm        lea    eax, cptr3;
			__asm        push   eax;
			__asm        mov    eax, cadd3;
			__asm        push   eax;
			__asm        mov    eax, caddr1;
			__asm        push   eax;
			__asm        mov    eax, caddr2;
			__asm        push   eax;
			__asm        call   S3CityCellInFront;
			__asm        add    esp, 0x10;
			__asm        test   eax, eax;
			__asm        jne    _T4c1;
		// LINE 4139:
			cptr3 = 0x0;
		// LINE 4140:
			__asm        jmp    _FOR_NEXT_2c3;
		// LINE 4144:
		_T4c1:
			__asm        mov    eax, cptr3;
			__asm        mov    ecx, dyobj;
			__asm        cmp    [eax+0x14], ecx;
			__asm        jne    _T4ec;

			_assert(0x1030, 0x5b5c44, 0x5b5c64);
			__asm        jmp    _T4f1;
		_T4ec:
			__asm        jmp    _T4f1;
		// LINE 4145:
		_T4f1:
			dyobj->vnext = cptr3->vwptr;
		// LINE 4146:
			cptr3->vwptr = dyobj;
		// LINE 4147:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    [ecx+0xC], ax;
		// LINE 4148:
			__asm        jmp    next_dyobj;
		// LINE 4150:
			__asm        jmp    _T5d8;
		_T521:
			__asm        mov    eax, cptrptr2;
			__asm        mov    ecx, cptr4;
			__asm        cmp    [eax], ecx;
			__asm        jne    _T5d8;
		// LINE 4157:
			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xA];
			__asm        cmp    eax, 1;
			__asm        jle    _T57d;

			__asm        mov    eax, cptrptr2;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax];
			__asm        test   al, 1;
			__asm        jne    _T57d;

			__asm        lea    eax, cptr4;
			__asm        push   eax;
			__asm        mov    eax, cadd4;
			__asm        push   eax;
			__asm        mov    eax, caddr1;
			__asm        push   eax;
			__asm        mov    eax, caddr2;
			__asm        push   eax;
			__asm        call   S3CityCellInFront;
			__asm        add    esp, 0x10;
			__asm        test   eax, eax;
			__asm        jne    _T57d;
		// LINE 4159:
			cptr4 = 0x0;
		// LINE 4160:
			__asm        jmp    _FOR_NEXT_2c3;
		// LINE 4164:
		_T57d:
			__asm        mov    eax, cptr4;
			__asm        mov    ecx, dyobj;
			__asm        cmp    [eax+0x14], ecx;
			__asm        jne    _T5a8;

			_assert(0x1044, 0x5b5c7c, 0x5b5c9c);
			__asm        jmp    _T5ad;
		_T5a8:
			__asm        jmp    _T5ad;
		// LINE 4165:
		_T5ad:
			dyobj->vnext = cptr4->vwptr;
		// LINE 4166:
			cptr4->vwptr = dyobj;
		// LINE 4167:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    [ecx+0xC], ax;
		// LINE 4168:
			__asm        jmp    next_dyobj;
		// LINE 4171:
		_T5d8:
			__asm        jmp    _FOR_NEXT_2c3;
		// LINE 4181:
		next_dyobj:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        test   al, 4;
			__asm        je     _Tc77;
		// LINE 4185:
			__asm        cmp    S_inmapmode, 1;
			__asm        jne    _T9cd;
		// LINE 4187:
			__asm        mov    eax, dyobj;
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4188:
			__asm        mov    esi, dyobj;
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4189:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4190:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4191:
			__asm        mov    eax, dyobj;
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4192:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4193:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4194:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4195:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4196:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4197:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4198:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4199:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4200:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4201:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4202:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4203:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4204:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4205:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4206:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4207:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4208:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4209:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4210:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4211:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4212:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4213:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4214:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4215:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    esi, [eax];
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4216:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax];
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4224:
		_T9cd:
			tmpdyobj = dyobj->vnext;
		// LINE 4226:
			__asm        mov    eax, dyobj;
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        test   al, 2;
			__asm        je     _Tb5b;
		// LINE 4228:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4229:
			dyobj->vnext = dyobj->next;
		// LINE 4231:
			dyobj = dyobj->next;
		// LINE 4232:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4233:
			dyobj->vnext = dyobj->next;
		// LINE 4235:
			dyobj = dyobj->next;
		// LINE 4236:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4237:
			dyobj->vnext = dyobj->next;
		// LINE 4239:
			dyobj = dyobj->next;
		// LINE 4240:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4241:
			dyobj->vnext = dyobj->next;
		// LINE 4243:
			dyobj = dyobj->next;
		// LINE 4244:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4245:
			dyobj->vnext = dyobj->next;
		// LINE 4247:
			dyobj = dyobj->next;
		// LINE 4248:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4249:
			dyobj->vnext = dyobj->next;
		// LINE 4251:
			dyobj = dyobj->next;
		// LINE 4252:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4253:
			dyobj->vnext = dyobj->next;
		// LINE 4255:
			dyobj = dyobj->next;
		// LINE 4256:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4257:
			dyobj->vnext = dyobj->next;
		// LINE 4259:
			dyobj = dyobj->next;
		// LINE 4260:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        or     eax, 2;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4261:
			dyobj->vnext = dyobj->next;
		// LINE 4263:
			dyobj = dyobj->next;
		// LINE 4264:
			dyobj->vnext = tmpdyobj;
		// LINE 4266:
			__asm        jmp    _Tc72;
		// LINE 4268:
		_Tb5b:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4269:
			dyobj = dyobj->next;
		// LINE 4270:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4271:
			dyobj = dyobj->next;
		// LINE 4272:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4273:
			dyobj = dyobj->next;
		// LINE 4274:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4275:
			dyobj = dyobj->next;
		// LINE 4276:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4277:
			dyobj = dyobj->next;
		// LINE 4278:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4279:
			dyobj = dyobj->next;
		// LINE 4280:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4281:
			dyobj = dyobj->next;
		// LINE 4282:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4283:
			dyobj = dyobj->next;
		// LINE 4284:
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax];
			__asm        movsx  eax, word ptr [eax+0xC];
			__asm        and    eax, 0xFFFD;
			__asm        mov    ecx, dyobj;
			__asm        mov    ecx, [ecx];
			__asm        mov    [ecx+0xC], ax;
		// LINE 4285:
			dyobj = dyobj->next;
		// LINE 4291:
		_Tc72:
			__asm        jmp    _Tccb;
		_Tc77:
			__asm        cmp    S_inmapmode, 1;
			__asm        jne    _Tccb;
		// LINE 4293:
			__asm        mov    eax, dyobj;
			__asm        add    eax, 0x18;
			__asm        lea    ecx, pos.loc.x;
			__asm        mov    edx, [eax];
			__asm        mov    [ecx], edx;
			__asm        mov    edx, [eax+4];
			__asm        mov    [ecx+4], edx;
			__asm        mov    eax, [eax+8];
			__asm        mov    [ecx+8], eax;
		// LINE 4294:
			__asm        mov    esi, dyobj;
			__asm        lea    edi, pos.matrix[0][0];
			__asm        add    esi, 0x24;
			__asm        mov    ecx, 0x10;
			__asm        rep movsd;
		// LINE 4295:
			__asm        push   3;
			__asm        lea    eax, pos.loc.x;
			__asm        push   eax;
			__asm        mov    eax, dyobj;
			__asm        mov    eax, [eax+8];
			__asm        push   eax;
			__asm        call   0x004D8781;
			__asm        add    esp, 0xC;
		// LINE 4298:
		_Tccb:
			dyobj = dyobj->next;
		// LINE 4299:
			__asm        jmp    __WHILE_99;
	}
// LINE 4300:
_Tcd8:
	__asm        jmp    _FOR_NEXT_27;
// LINE 4301:
__RETURN:
}

// FUNCTION: COPTER_D 0x0051215e
int32_t S3CityCellInFront(/*packed*/ struct _CELL_INFO ***caddr2, /*packed*/ struct _CELL_INFO ***caddr1, /*packed*/ struct _CELL_INFO **caddrtest, /*packed*/ struct _CELL_INFO **cptrreplace) {
	/*bp-0x4*/   /*packed*/ struct _CELL_INFO ***caddr;
	/*bp-0x8*/   long i;

// LINE 4318:
	caddr = caddr2;
// LINE 4320:
__WHILE_0f:
	while ((caddr > caddr1)) {
		// LINE 4322:
			__asm        mov    eax, caddr;
			__asm        mov    ecx, caddrtest;
			__asm        cmp    [eax], ecx;
			__asm        jne    _Tab;
		// LINE 4324:
			__asm        cmp    S_tmpcell_ctr, 0x1E;
			__asm        jge    _Ta1;
		// LINE 4326:
			__asm        mov    eax, S_tmpcell_ctr;
			__asm        lea    eax, [eax+eax*2];
			__asm        lea    eax, S_tmp_cells[0].flags[eax*8];
			__asm        mov    ecx, cptrreplace;
			__asm        mov    [ecx], eax;
			__asm        inc    S_tmpcell_ctr;
		// LINE 4327:
			cptrreplace->->vwptr = 0x0;
		// LINE 4328:
			cptrreplace->->ctr = 0x1;
		// LINE 4329:
			caddrtest->->ctr--;
		// LINE 4330:
			i = ((caddr - GridCellAddrs) >> 0x2);
		// LINE 4331:
			GridSortCells-> = cptrreplace->;
		// LINE 4332:
			caddr-> = ((i << 0x2) + GridSortCells);
		// LINE 4334:
		_Ta1:
			return 0x1;
		// LINE 4336:
		_Tab:
			caddr -= 0x4;
		// LINE 4337:
			__asm        jmp    __WHILE_0f;
	}
// LINE 4339:
_Tb4:
	return 0x0;
// LINE 4340:
}

// FUNCTION: COPTER_D 0x0051221e
void S3CityCheckGridPos() {
	/*bp-0x4*/   long ydiff;
	/*bp-0x8*/   long gsize;
	/*bp-0xc*/   long xdiff;
	/*bp-0x10*/  long altdiff;

// LINE 4360:
	S_curr_pos.x = ((ViewState.world_pos.x + 0x20000000) >> 0x16);
// LINE 4361:
	S_curr_pos.y = ((0x20000000 - ViewState.world_pos.z) >> 0x16);
// LINE 4364:
	__asm        mov    eax, ViewState.world_pos.y;
	__asm        sar    eax, 0x10;
	__asm        mov    edx, S_curr_pos.y;
	__asm        and    edx, G_tmask;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    edx, cl;
	__asm        mov    ecx, S_curr_pos.x;
	__asm        and    ecx, G_tmask;
	__asm        add    ecx, ecx;
	__asm        lea    edx, [ecx+edx*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    ebx, ebx;
	__asm        mov    bx, [edx+ecx];
	__asm        sub    eax, ebx;
	__asm        mov    altdiff, eax;
// LINE 4365:
	__asm        xor    eax, eax;
	__asm        sub    eax, G_alt;
	__asm        neg    eax;
	__asm        sub    altdiff, eax;
// LINE 4366:
	G_alt += altdiff;
// LINE 4368:
	__asm        cmp    G_alt, 0x64;
	__asm        jge    _T9d;
// LINE 4369:
	S_lowres_dist = 0xa;
// LINE 4370:
	__asm        jmp    _Tc4;
_T9d:
	__asm        cmp    G_alt, 0xA0;
	__asm        jge    _Tbb;
// LINE 4371:
	S_lowres_dist = 0xe;
// LINE 4372:
	__asm        jmp    _Tc4;
// LINE 4373:
_Tbb:
	S_lowres_dist = 0x10;
// LINE 4375:
_Tc4:
	__asm        cmp    altdiff, 0;
	__asm        jge    _Te3;
// LINE 4377:
	S_down_trend++;
// LINE 4378:
	S_up_trend = 0x0;
// LINE 4380:
	__asm        jmp    _T116;
_Te3:
	__asm        cmp    altdiff, 0;
	__asm        jle    _T102;
// LINE 4382:
	S_up_trend++;
// LINE 4383:
	S_down_trend = 0x0;
// LINE 4385:
	__asm        jmp    _T116;
// LINE 4387:
_T102:
	S_down_trend = 0x0;
// LINE 4388:
	S_up_trend = 0x0;
// LINE 4392:
_T116:
	__asm        mov    ecx, 0x28;
	__asm        mov    eax, G_alt;
	__asm        cdq;
	__asm        idiv   ecx;
	__asm        add    eax, eax;
	__asm        add    eax, 0x11;
	__asm        mov    gsize, eax;
// LINE 4393:
	__asm        cmp    gsize, 0x11;
	__asm        jge    _T13c;

	gsize = 0x11;
// LINE 4394:
_T13c:
	__asm        cmp    gsize, 0x3D;
	__asm        jle    _T14d;

	gsize = 0x3d;
// LINE 4398:
_T14d:
	__asm        cmp    G_use_height_backplane, 0;
	__asm        jne    _T162;
// LINE 4399:
	gsize = G_last_grid_size;
// LINE 4405:
_T162:
	xdiff = (S_curr_pos.x - S_last_pos.x);
// LINE 4406:
	ydiff = (S_curr_pos.y - S_last_pos.y);
// LINE 4412:
	__asm        cmp    G_water_anim, 1;
	__asm        jne    _T195;
// LINE 4413:
	S_watermorph = S3TerrMorphWater();
// LINE 4415:
_T195:
	__asm        mov    eax, G_last_grid_size;
	__asm        cmp    gsize, eax;
	__asm        je     _T26d;

	__asm        cmp    S_up_trend, 0xA;
	__asm        jg     _T1bd;

	__asm        cmp    S_down_trend, 0xA;
	__asm        jle    _T26d;
// LINE 4417:
_T1bd:
	S_down_trend = 0x0;
// LINE 4418:
	S_up_trend = 0x0;
// LINE 4419:
	VRInitGridObj(gsize);
// LINE 4420:
	__asm        mov    eax, G_ViewSize;
	__asm        cdq;
	__asm        sub    eax, edx;
	__asm        sar    eax, 1;
	__asm        sub    eax, 3;
	__asm        shl    eax, 0x16;
	__asm        push   eax;
	__asm        call   VRSetBackPlane;
	__asm        add    esp, 4;
// LINE 4421:
	__asm        mov    eax, S_curr_pos.x;
	__asm        mov    ecx, G_ViewSize;
	__asm        sar    ecx, 1;
	__asm        sub    eax, ecx;
	__asm        movsx  eax, ax;
	__asm        mov    G_grid_ulc.x, eax;
// LINE 4422:
	__asm        mov    eax, S_curr_pos.y;
	__asm        mov    ecx, G_ViewSize;
	__asm        sar    ecx, 1;
	__asm        sub    eax, ecx;
	__asm        movsx  eax, ax;
	__asm        mov    G_grid_ulc.y, eax;
// LINE 4423:
	S3TerrSetGridObj();
// LINE 4424:
	__asm        mov    eax, S_curr_pos.x;
	__asm        mov    ecx, S_curr_pos.y;
	__asm        mov    S_last_pos.x, eax;
	__asm        mov    S_last_pos.y, ecx;
// LINE 4425:
	G_last_grid_size = gsize;
// LINE 4427:
	GridPos.loc.x += (xdiff << 0x16);
// LINE 4428:
	__asm        xor    eax, eax;
	__asm        mov    ecx, ydiff;
	__asm        shl    ecx, 0x16;
	__asm        sub    eax, ecx;
	__asm        neg    eax;
	__asm        sub    GridPos.loc.z, eax;
// LINE 4430:
	return;
_T26d:
	__asm        cmp    xdiff, 0;
	__asm        jne    _T28e;

	__asm        cmp    ydiff, 0;
	__asm        jne    _T28e;

	__asm        cmp    S_watermorph, 1;
	__asm        jne    __RETURN;
// LINE 4432:
_T28e:
	__asm        mov    eax, S_curr_pos.x;
	__asm        mov    ecx, S_curr_pos.y;
	__asm        mov    S_last_pos.x, eax;
	__asm        mov    S_last_pos.y, ecx;
// LINE 4433:
	G_grid_ulc.x += reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(xdiff));
// LINE 4434:
	G_grid_ulc.y += reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(ydiff));
// LINE 4435:
	S3TerrSetGridObj();
// LINE 4437:
	GridPos.loc.x += (xdiff << 0x16);
// LINE 4438:
	__asm        xor    eax, eax;
	__asm        mov    ecx, ydiff;
	__asm        shl    ecx, 0x16;
	__asm        sub    eax, ecx;
	__asm        neg    eax;
	__asm        sub    GridPos.loc.z, eax;
// LINE 4440:
__RETURN:
}

// FUNCTION: COPTER_D 0x005124fe
void S3CitySpiralScan(long x, long y, long spiral_dist) {
	/*bp-0x4*/   long xdir;
	/*bp-0x8*/   long ydir;
	/*bp-0xc*/   long curr_dist;
	/*bp-0x10*/  long i;
	/*bp-0x14*/  long curr_dir;
	/*bp-0x18*/  int32_t stop_now;
	/*bp-0x1c*/  /*packed*/ struct Point2d *fovcell;

// LINE 4456:
	curr_dist = 0x0;
// LINE 4457:
	curr_dir = 0xffffffff;
// LINE 4459:
	stop_now = 0x0;
// LINE 4465:
	__asm        mov    eax, spiral_dist;
	__asm        imul   eax, spiral_dist;
	__asm        lea    eax, S_fov_cells[0].x[eax*8];
	__asm        sub    eax, 8;
	__asm        mov    S_fovlast, eax;
	__asm        mov    eax, S_fovlast;
	__asm        mov    fovcell, eax;
// LINE 4470:
	fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
// LINE 4471:
	fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
// LINE 4472:
	fovcell -= 0x8;
// LINE 4478:
_LOOP_53:
	for (;;) {
		// LINE 4478:
		_LOOP_53:
			curr_dir++;
		// LINE 4479:
			__asm        mov    eax, curr_dir;
			__asm        mov    [ebp-0x20], eax;
			__asm        jmp    _Tbf;
		// LINE 4483:
		_T61:
			curr_dir = 0x0;
		// LINE 4484:
			curr_dist++;
		// LINE 4485:
			xdir = 0x0;
		// LINE 4486:
			ydir = 0xffffffff;
		// LINE 4487:
			__asm        jmp    _Te7;
		// LINE 4489:
		_T7e:
			xdir = 0x1;
		// LINE 4490:
			ydir = 0x0;
		// LINE 4491:
			__asm        jmp    _Te7;
		// LINE 4493:
		_T91:
			curr_dist++;
		// LINE 4494:
			xdir = 0x0;
		// LINE 4495:
			ydir = 0x1;
		// LINE 4496:
			__asm        jmp    _Te7;
		// LINE 4498:
		_Ta7:
			xdir = 0xffffffff;
		// LINE 4499:
			ydir = 0x0;
		// LINE 4500:
			__asm        jmp    _Te7;
		// LINE 4501:
			__asm        jmp    _Te7;
		_Tbf:
			__asm        cmp    dword ptr [ebp-0x20], 4;
			__asm        ja     _Te7;

			__asm        mov    eax, [ebp-0x20];
			__asm        jmp    _Switch_d3[0][eax*4];
		// Switch pointers:
		//   _T61
		//   _T7e
		//   _T91
		//   _Ta7
		//   _T61
		// LINE 4505:
		_Te7:
			__asm        mov    eax, spiral_dist;
			__asm        cmp    curr_dist, eax;
			__asm        jne    _FOR_109;
		// LINE 4507:
			curr_dist--;
		// LINE 4508:
			stop_now = 0x1;
		// LINE 4512:
		_FOR_109:
			for (i = 0x0; (curr_dist > i); i++) {
				// LINE 4514:
					x += xdir;
				// LINE 4515:
					y += ydir;
				// LINE 4516:
					fovcell->x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
				// LINE 4517:
					fovcell->y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
				// LINE 4518:
					fovcell -= 0x8;
				// LINE 4520:
					__asm        cmp    fovcell, 0x609C50;
					__asm        jae    _T154;
				// LINE 4522:
					stop_now = 0x1;
				// LINE 4523:
					__asm        jmp    _T159;
				// LINE 4525:
				_T154:
			}
		// LINE 4527:
		_T159:
			__asm        cmp    stop_now, 1;
			__asm        jne    _T168;
		// LINE 4528:
			return;
		// LINE 4529:
		_T168:
			__asm        jmp    _LOOP_53;
	}
// LINE 4530:
}

// FUNCTION: COPTER_D 0x00512670
int32_t S3CityCellViewReject(/*packed*/ struct _CELL_INFO *cptr) {
	/*bp-0x4*/   int32_t wradius;
	/*bp-0x8*/   int32_t maxobjy;
	/*bp-0xc*/   /*packed*/ struct _DYOBJ_INST *dyobj;
	/*bp-0x10*/  long sradius;
	/*bp-0x14*/  int32_t farz;
	/*bp-0x18*/  int32_t oradius;
	/*bp-0x1c*/  int32_t dotp;
	/*bp-0x28*/  /*packed*/ struct Point3d vpos; // 0xc bytes
	/*bp-0x34*/  /*packed*/ struct Point3d pos; // 0xc bytes

// LINE 4745:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+8];
	__asm        cmp    eax, 0x10;
	__asm        jne    _T2d;

	__asm        cmp    S_used_spiralscan, 0;
	__asm        jne    _T2d;
// LINE 4746:
	return 0x0;
// LINE 4749:
_T2d:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        test   al, 8;
	__asm        je     _T5f;
// LINE 4752:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        test   al, 0x10;
	__asm        je     _T58;
// LINE 4753:
	return 0x1;
// LINE 4754:
	__asm        jmp    _T5f;
// LINE 4755:
_T58:
	return 0x0;
// LINE 4759:
_T5f:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax];
	__asm        and    eax, 0xFFEF;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx], ax;
// LINE 4763:
	__asm        cmp    G_uheli, 0;
	__asm        je     _Tb3;
// LINE 4765:
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0x1C];
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, G_uheli;
	__asm        mov    ecx, [ecx+0x18];
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, cptr;
	__asm        cmp    G_omap[0][0][ecx+eax*4], edx;
	__asm        jne    _Tb3;
// LINE 4766:
	return 0x0;
// LINE 4769:
_Tb3:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+2];
	__asm        shl    eax, 0x10;
	__asm        mov    pos.x, eax;
// LINE 4770:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+4];
	__asm        shl    eax, 0x10;
	__asm        mov    pos.y, eax;
// LINE 4771:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+6];
	__asm        shl    eax, 0x10;
	__asm        mov    pos.z, eax;
// LINE 4774:
	__asm        mov    eax, 0x59D220;
	__asm        add    eax, 0x18;
	__asm        push   eax;
	__asm        lea    eax, vpos.x;
	__asm        push   eax;
	__asm        lea    eax, pos.x;
	__asm        push   eax;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 4786:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+8];
	__asm        lea    eax, [eax+eax*4];
	__asm        lea    eax, [eax+eax*4];
	__asm        shl    eax, 0x11;
	__asm        mov    wradius, eax;
// LINE 4789:
	__asm        call   0x004D7B7D;
	__asm        mov    farz, eax;
// LINE 4790:
	__asm        mov    eax, vpos.z;
	__asm        sub    eax, wradius;
	__asm        cmp    eax, farz;
	__asm        jle    _T127;
// LINE 4791:
	return 0x1;
// LINE 4795:
_T127:
	__asm        mov    eax, vpos.x;
	__asm        add    eax, wradius;
	__asm        push   eax;
	__asm        mov    eax, VRFrusLeftNorm.x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, vpos.z;
	__asm        push   eax;
	__asm        mov    eax, VRFrusLeftNorm.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    dotp, ebx;
// LINE 4799:
	__asm        cmp    dotp, 0xFFFFFF9C;
	__asm        jge    _T169;
// LINE 4800:
	return 0x1;
// LINE 4804:
_T169:
	__asm        mov    eax, vpos.x;
	__asm        sub    eax, wradius;
	__asm        push   eax;
	__asm        mov    eax, VRFrusRiteNorm.x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, vpos.z;
	__asm        push   eax;
	__asm        mov    eax, VRFrusRiteNorm.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    dotp, ebx;
// LINE 4808:
	__asm        cmp    dotp, 0xFFFFFF9C;
	__asm        jge    _T1ab;
// LINE 4809:
	return 0x1;
// LINE 4813:
_T1ab:
	__asm        mov    eax, vpos.y;
	__asm        sub    eax, wradius;
	__asm        push   eax;
	__asm        mov    eax, VRFrusTopNorm.y;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, vpos.z;
	__asm        push   eax;
	__asm        mov    eax, VRFrusTopNorm.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    dotp, ebx;
// LINE 4817:
	__asm        cmp    dotp, 0xFFFFFF9C;
	__asm        jge    _T1ed;
// LINE 4818:
	return 0x1;
// LINE 4828:
_T1ed:
	__asm        cmp    G_alt, 0x28;
	__asm        jge    _T201;
// LINE 4829:
	return 0x0;
// LINE 4832:
_T201:
	dyobj = cptr->dyptr;
// LINE 4833:
	maxobjy = 0x0;
// LINE 4834:
__WHILE_211:
	while ((dyobj != 0x0)) {
		// LINE 4836:
			__asm        mov    eax, dyobj;
			__asm        mov    ecx, maxobjy;
			__asm        cmp    [eax+0x1C], ecx;
			__asm        jle    _T233;
		// LINE 4837:
			maxobjy = dyobj->loc.y;
		// LINE 4839:
		_T233:
			dyobj = dyobj->next;
		// LINE 4840:
			__asm        jmp    __WHILE_211;
	}
// LINE 4843:
_T240:
	oradius = (maxobjy - pos.y);
// LINE 4848:
	sradius = S3HeliHighestBuildAlt(cptr);
// LINE 4849:
	__asm        mov    eax, sradius;
	__asm        cmp    wradius, eax;
	__asm        jge    _T26f;
// LINE 4850:
	wradius = sradius;
// LINE 4851:
	__asm        jmp    _T276;
// LINE 4854:
_T26f:
	wradius += 0x180000;
// LINE 4856:
_T276:
	__asm        mov    eax, oradius;
	__asm        cmp    wradius, eax;
	__asm        jge    _T288;
// LINE 4857:
	wradius = oradius;
// LINE 4860:
_T288:
	__asm        mov    eax, vpos.z;
	__asm        add    eax, wradius;
	__asm        cmp    eax, 0x10000;
	__asm        jge    _T2a3;
// LINE 4861:
	return 0x1;
// LINE 4867:
_T2a3:
	__asm        mov    eax, vpos.y;
	__asm        add    eax, wradius;
	__asm        push   eax;
	__asm        mov    eax, VRFrusBotNorm.y;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, vpos.z;
	__asm        push   eax;
	__asm        mov    eax, VRFrusBotNorm.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    dotp, ebx;
// LINE 4871:
	__asm        cmp    dotp, 0xFFFFFF9C;
	__asm        jge    _T2e5;
// LINE 4872:
	return 0x1;
// LINE 4876:
_T2e5:
	return 0x0;
// LINE 4878:
}

// FUNCTION: COPTER_D 0x00512961
void S3CityDrawOverHeadGrid() {
	/*bp-0x40*/  int32_t mat1[4][4]; // 0x40 bytes
	/*bp-0x80*/  int32_t mat2[4][4]; // 0x40 bytes
	/*bp-0x84*/  long x;
	/*bp-0x88*/  long y;

// LINE 4892:
	S_inmapmode = 0x1;
// LINE 4895:
	S3MapSet3dRender();
// LINE 4900:
	__asm        lea    eax, mat1[0][0];
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 4901:
	__asm        lea    eax, mat1[0][0];
	__asm        push   eax;
	__asm        push   0xFC7C0000;
	__asm        call   0x004D2004;
	__asm        add    esp, 8;
// LINE 4902:
	__asm        lea    eax, mat2[0][0];
	__asm        push   eax;
	__asm        lea    eax, mat1[0][0];
	__asm        push   eax;
	__asm        push   0x6C1330;
	__asm        call   0x004D8900;
	__asm        add    esp, 0xC;
// LINE 4906:
	__asm        mov    eax, 0x6C12A0;
	__asm        add    eax, 0x38;
	__asm        push   eax;
	__asm        lea    eax, mat2[0][0];
	__asm        push   eax;
	__asm        call   0x004D8C2E;
	__asm        add    esp, 8;
// LINE 4908:
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0xA4];
	__asm        add    eax, 0x18;
	__asm        mov    ecx, 0x6C12A0;
	__asm        add    ecx, 0x78;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 4911:
	S3ViewerSetView();
// LINE 4913:
	x = ((Viewer.pos.x + 0x20000000) >> 0x16);
// LINE 4914:
	y = ((0x20000000 - Viewer.pos.z) >> 0x16);
// LINE 4917:
	S3CitySpiralScan(0x5, y, x);
// LINE 4920:
	S3CityDrawGrid();
// LINE 4923:
	S3MapRestore3dRender();
// LINE 4925:
	S_inmapmode = 0x0;
// LINE 4926:
}

// FUNCTION: COPTER_D 0x00512a46
short S3CityLowestTerrAlt(long startx, long starty, long size) {
	/*bp-0x4*/   unsigned short minalt;
	/*bp-0x8*/   long x;
	/*bp-0xc*/   long y;
	/*bp-0x10*/  unsigned short alt;

// LINE 4944:
	minalt = 0xffff;
// LINE 4947:
_FOR_1a:
	for (x = startx; ((size + startx) >= x); x++) {
		// LINE 4948:
		_FOR_37:
			for (y = starty; ((starty + size) >= y); y++) {
				// LINE 4950:
					__asm        mov    eax, y;
					__asm        and    eax, G_tmask;
					__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
					__asm        shl    eax, cl;
					__asm        mov    ecx, x;
					__asm        and    ecx, G_tmask;
					__asm        add    ecx, ecx;
					__asm        lea    eax, [ecx+eax*2];
					__asm        mov    ecx, G_tmap;
					__asm        mov    ax, [eax+ecx];
					__asm        mov    alt, ax;
				// LINE 4951:
					__asm        mov    eax, reinterpret_cast<uint32_t>(alt);
					__asm        and    eax, 0xFFFF;
					__asm        mov    ecx, reinterpret_cast<uint32_t>(minalt);
					__asm        and    ecx, 0xFFFF;
					__asm        cmp    eax, ecx;
					__asm        jge    _T97;
				// LINE 4952:
					__asm        mov    ax, alt;
					__asm        mov    minalt, ax;
				// LINE 4953:
				_T97:
			}
		_T9c:
	}
// LINE 4955:
_Ta1:
	return minalt;
// LINE 4956:
}

// FUNCTION: COPTER_D 0x00512af5
int32_t S3CityIsCellFlat(long x, long y) {
// LINE 4968:
	__asm        mov    eax, G_tmask;
	__asm        and    eax, y;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, x;
	__asm        inc    ecx;
	__asm        and    ecx, G_tmask;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    edx, edx;
	__asm        mov    dx, [eax+ecx];
	__asm        mov    eax, G_tmask;
	__asm        and    eax, y;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, G_tmask;
	__asm        and    ecx, x;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    ebx, ebx;
	__asm        mov    bx, [eax+ecx];
	__asm        cmp    edx, ebx;
	__asm        jne    _T12a;

	__asm        mov    eax, y;
	__asm        inc    eax;
	__asm        and    eax, G_tmask;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, G_tmask;
	__asm        and    ecx, x;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    edx, edx;
	__asm        mov    dx, [eax+ecx];
	__asm        mov    eax, G_tmask;
	__asm        and    eax, y;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, G_tmask;
	__asm        and    ecx, x;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    ebx, ebx;
	__asm        mov    bx, [eax+ecx];
	__asm        cmp    edx, ebx;
	__asm        jne    _T12a;

	__asm        mov    eax, y;
	__asm        inc    eax;
	__asm        and    eax, G_tmask;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, x;
	__asm        inc    ecx;
	__asm        and    ecx, G_tmask;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    edx, edx;
	__asm        mov    dx, [eax+ecx];
	__asm        mov    eax, G_tmask;
	__asm        and    eax, y;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, G_tmask;
	__asm        and    ecx, x;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        xor    ebx, ebx;
	__asm        mov    bx, [eax+ecx];
	__asm        cmp    edx, ebx;
	__asm        jne    _T12a;
// LINE 4970:
	return 0x1;
// LINE 4973:
_T12a:
	return 0x0;
// LINE 4974:
}

// FUNCTION: COPTER_D 0x00512c2b
int32_t S3CityGetBase(long x, long y, long size) {
	/*bp-0x4*/   long zone;

// LINE 4987:
	__asm        cmp    x, 0;
	__asm        jl     _T31;

	__asm        cmp    x, 0x7F;
	__asm        jg     _T31;

	__asm        cmp    y, 0;
	__asm        jl     _T31;

	__asm        cmp    y, 0x7F;
	__asm        jle    _T3d;
// LINE 4988:
_T31:
	zone = 0x5;
// LINE 4989:
	__asm        jmp    _T55;
// LINE 4990:
_T3d:
	__asm        mov    eax, x;
	__asm        mov    eax, ZoneMap[eax*4];
	__asm        mov    ecx, y;
	__asm        xor    edx, edx;
	__asm        mov    dl, [eax+ecx];
	__asm        and    edx, 0xF;
	__asm        mov    zone, edx;
// LINE 4992:
_T55:
	__asm        cmp    zone, 1;
	__asm        je     _T69;

	__asm        cmp    zone, 2;
	__asm        jne    _Te1;
// LINE 4994:
_T69:
	__asm        mov    eax, size;
	__asm        mov    [ebp-8], eax;
	__asm        jmp    _Tb5;
// LINE 4997:
_T74:
	__asm        push   1;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 4999:
_T83:
	__asm        push   2;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5001:
_T92:
	__asm        push   3;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5003:
_Ta1:
	__asm        push   4;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5004:
	__asm        jmp    _Tdc;
_Tb5:
	__asm        dec    dword ptr [ebp-8];
	__asm        cmp    dword ptr [ebp-8], 3;
	__asm        ja     _Tdc;

	__asm        mov    eax, [ebp-8];
	__asm        jmp    _Switch_cc[0][eax*4];
// Switch pointers:
//   _T74
//   _T83
//   _T92
//   _Ta1
// LINE 5006:
_Tdc:
	__asm        jmp    _T1f8;
_Te1:
	__asm        cmp    zone, 3;
	__asm        je     _Tf5;

	__asm        cmp    zone, 4;
	__asm        jne    _T179;
// LINE 5008:
_Tf5:
	__asm        mov    eax, size;
	__asm        mov    [ebp-0xC], eax;
	__asm        jmp    _T14d;
// LINE 5011:
_T100:
	__asm        push   0x168;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5013:
_T112:
	__asm        push   0x169;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5015:
_T124:
	__asm        push   0x16A;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5017:
_T136:
	__asm        push   0x16B;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5018:
	__asm        jmp    _T174;
_T14d:
	__asm        dec    dword ptr [ebp-0xC];
	__asm        cmp    dword ptr [ebp-0xC], 3;
	__asm        ja     _T174;

	__asm        mov    eax, [ebp-0xC];
	__asm        jmp    _Switch_164[0][eax*4];
// Switch pointers:
//   _T100
//   _T112
//   _T124
//   _T136
// LINE 5020:
_T174:
	__asm        jmp    _T1f8;
// LINE 5022:
_T179:
	__asm        mov    eax, size;
	__asm        mov    [ebp-0x10], eax;
	__asm        jmp    _T1d1;
// LINE 5025:
_T184:
	__asm        push   0x164;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5027:
_T196:
	__asm        push   0x165;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5029:
_T1a8:
	__asm        push   0x166;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5031:
_T1ba:
	__asm        push   0x167;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5032:
	__asm        jmp    _T1f8;
_T1d1:
	__asm        dec    dword ptr [ebp-0x10];
	__asm        cmp    dword ptr [ebp-0x10], 3;
	__asm        ja     _T1f8;

	__asm        mov    eax, [ebp-0x10];
	__asm        jmp    _Switch_1e8[0][eax*4];
// Switch pointers:
//   _T184
//   _T196
//   _T1a8
//   _T1ba
// LINE 5036:
_T1f8:
	__asm        push   0x164;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        jmp    __RETURN;
// LINE 5037:
__RETURN:
}

// FUNCTION: COPTER_D 0x00512e3a
void S3CityCreateHeliBase(long x, long y) {
	/*bp-0x4*/   long py;
	/*bp-0x8*/   int32_t incity;
	/*bp-0xc*/   short i;
	/*bp-0x10*/  short alt;
	/*bp-0x14*/  /*packed*/ struct _CELL_INFO *cptr;
	/*bp-0x18*/  /*packed*/ struct _STOBJ_INST *sptr;
	/*bp-0x1c*/  long px;

// LINE 5057:
	incity = 0x0;
// LINE 5061:
	__asm        cmp    x, 0x80;
	__asm        jge    _T1e8;

	__asm        cmp    y, 0x80;
	__asm        jge    _T1e8;
// LINE 5063:
	incity = 0x1;
// LINE 5066:
_FOR_3c:
	for (px = x; ((x + 0x4) > px); px++) {
		// LINE 5068:
		_FOR_59:
			for (py = y; ((y + 0x4) > py); py++) {
				// LINE 5071:
					__asm        cmp    px, 0x7F;
					__asm        jg     _T7f;

					__asm        cmp    py, 0x7F;
					__asm        jle    _T84;
				// LINE 5072:
				_T7f:
					return;
				// LINE 5075:
				_T84:
					__asm        mov    eax, px;
					__asm        mov    eax, ZoneMap[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        and    dl, 0xF;
					__asm        cmp    dl, 8;
					__asm        je     _Ta7;
				// LINE 5076:
					return;
				// LINE 5079:
				_Ta7:
					__asm        mov    eax, px;
					__asm        sub    eax, x;
					__asm        cmp    eax, 3;
					__asm        jne    _T141;
				// LINE 5081:
					__asm        mov    eax, px;
					__asm        mov    eax, BuildMap[eax*4];
					__asm        mov    ecx, py;
					__asm        movzx  ax, byte ptr [eax+ecx];
					__asm        mov    i, ax;
				// LINE 5082:
					__asm        movsx  eax, i;
					__asm        push   eax;
					__asm        call   S2TileSize;
					__asm        add    esp, 4;
					__asm        cmp    eax, 2;
					__asm        jne    _T141;
				// LINE 5085:
					__asm        mov    eax, px;
					__asm        mov    eax, NeighborFame[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        movsx  eax, i;
					__asm        cmp    edx, eax;
					__asm        jne    _T13c;

					__asm        mov    eax, px;
					__asm        mov    eax, reinterpret_cast<uint32_t>(SaveSpeed)[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        movsx  eax, i;
					__asm        cmp    edx, eax;
					__asm        jne    _T141;

					__asm        mov    eax, px;
					__asm        mov    eax, HealthRatio[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx];
					__asm        movsx  eax, i;
					__asm        cmp    edx, eax;
					__asm        je     _T141;
				// LINE 5087:
				_T13c:
					return;
				// LINE 5091:
				_T141:
					__asm        mov    eax, py;
					__asm        sub    eax, y;
					__asm        cmp    eax, 3;
					__asm        jne    _T1de;
				// LINE 5093:
					__asm        mov    eax, px;
					__asm        mov    eax, BuildMap[eax*4];
					__asm        mov    ecx, py;
					__asm        movzx  ax, byte ptr [eax+ecx];
					__asm        mov    i, ax;
				// LINE 5094:
					__asm        movsx  eax, i;
					__asm        push   eax;
					__asm        call   S2TileSize;
					__asm        add    esp, 4;
					__asm        cmp    eax, 2;
					__asm        jne    _T1de;
				// LINE 5097:
					__asm        mov    eax, px;
					__asm        mov    eax, BuildMap[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx-1];
					__asm        movsx  eax, i;
					__asm        cmp    edx, eax;
					__asm        jne    _T1d9;

					__asm        mov    eax, px;
					__asm        mov    eax, BuildMap[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx-2];
					__asm        movsx  eax, i;
					__asm        cmp    edx, eax;
					__asm        jne    _T1de;

					__asm        mov    eax, px;
					__asm        mov    eax, BuildMap[eax*4];
					__asm        mov    ecx, py;
					__asm        xor    edx, edx;
					__asm        mov    dl, [eax+ecx-3];
					__asm        movsx  eax, i;
					__asm        cmp    edx, eax;
					__asm        je     _T1de;
				// LINE 5099:
				_T1d9:
					return;
				// LINE 5103:
				_T1de:
			}
		// LINE 5104:
		_T1e3:
	}
// LINE 5108:
_T1e8:
	__asm        mov    eax, y;
	__asm        and    eax, G_tmask;
	__asm        mov    cl, reinterpret_cast<uint8_t>(G_tshift);
	__asm        shl    eax, cl;
	__asm        mov    ecx, x;
	__asm        and    ecx, G_tmask;
	__asm        add    ecx, ecx;
	__asm        lea    eax, [ecx+eax*2];
	__asm        mov    ecx, G_tmap;
	__asm        mov    ax, [eax+ecx];
	__asm        mov    alt, ax;
// LINE 5111:
	cptr = S2Alloc(0x18, G_citymempool);
// LINE 5112:
	sptr = S2Alloc(0x10, G_citymempool);
// LINE 5113:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, x;
	__asm        inc    ecx;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, y;
	__asm        inc    edx;
	__asm        and    edx, 0xFF;
	__asm        mov    G_omap[0][0][ecx+edx*4], eax;
// LINE 5114:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, x;
	__asm        add    ecx, 2;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, y;
	__asm        inc    edx;
	__asm        and    edx, 0xFF;
	__asm        mov    G_omap[0][0][ecx+edx*4], eax;
// LINE 5115:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, y;
	__asm        add    ecx, 2;
	__asm        and    ecx, 0xFF;
	__asm        mov    edx, x;
	__asm        inc    edx;
	__asm        and    edx, 0xFF;
	__asm        shl    edx, 0xA;
	__asm        mov    G_omap[0][0][edx+ecx*4], eax;
// LINE 5116:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, x;
	__asm        add    ecx, 2;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    edx, y;
	__asm        add    edx, 2;
	__asm        and    edx, 0xFF;
	__asm        mov    G_omap[0][0][ecx+edx*4], eax;
// LINE 5119:
	__asm        cmp    incity, 1;
	__asm        jne    _T319;
// LINE 5121:
	__asm        mov    eax, x;
	__asm        mov    eax, BuildMap[1][eax*4];
	__asm        mov    ecx, y;
	__asm        mov    byte ptr [eax+ecx+1], 0xF6;
// LINE 5122:
	__asm        mov    eax, x;
	__asm        mov    eax, BuildMap[2][eax*4];
	__asm        mov    ecx, y;
	__asm        mov    byte ptr [eax+ecx+1], 0xF6;
// LINE 5123:
	__asm        mov    eax, x;
	__asm        mov    eax, BuildMap[1][eax*4];
	__asm        mov    ecx, y;
	__asm        mov    byte ptr [eax+ecx+2], 0xF6;
// LINE 5124:
	__asm        mov    eax, x;
	__asm        mov    eax, BuildMap[2][eax*4];
	__asm        mov    ecx, y;
	__asm        mov    byte ptr [eax+ecx+2], 0xF6;
// LINE 5128:
_T319:
	__asm        mov    eax, x;
	__asm        inc    eax;
	__asm        shl    eax, 6;
	__asm        sub    eax, 0x1FC0;
	__asm        mov    i, ax;
// LINE 5129:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+2], ax;
// LINE 5130:
	__asm        mov    eax, 0x2000;
	__asm        mov    ecx, y;
	__asm        inc    ecx;
	__asm        shl    ecx, 6;
	__asm        sub    eax, ecx;
	__asm        sub    eax, 0x40;
	__asm        mov    i, ax;
// LINE 5131:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+6], ax;
// LINE 5134:
	__asm        mov    ax, alt;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+4], ax;
// LINE 5135:
	cptr->size = 0x2;
// LINE 5136:
	cptr->flags = 0x1;
// LINE 5137:
	cptr->ctr = 0x0;
// LINE 5138:
	cptr->stptr = sptr;
// LINE 5139:
	cptr->dyptr = 0x0;
// LINE 5141:
	sptr->next = 0x0;
// LINE 5142:
	__asm        push   0x96;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        mov    ecx, sptr;
	__asm        mov    [ecx+4], eax;
// LINE 5143:
	sptr->user1 = 0x4;
// LINE 5144:
	sptr->user2 = 0x0;
// LINE 5146:
	sptr->next = S2Alloc(0x10, G_citymempool);
// LINE 5147:
	sptr = sptr->next;
// LINE 5148:
	sptr->next = 0x0;
// LINE 5149:
	__asm        push   0x165;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        mov    ecx, sptr;
	__asm        mov    [ecx+4], eax;
// LINE 5150:
	sptr->user1 = 0x10;
// LINE 5151:
	sptr->user2 = 0x0;
// LINE 5156:
_FOR_41a:
	px = x;
	py = y;
	__asm        jmp    _FOR_COND_41a;
_FOR_NEXT_41a:
	for (; ((x + 0x4) > px); px++) {
		// LINE 5158:
			cptr = S2Alloc(0x18, G_citymempool);
		// LINE 5159:
			sptr = S2Alloc(0x10, G_citymempool);
		// LINE 5160:
			__asm        mov    eax, cptr;
			__asm        mov    ecx, py;
			__asm        and    ecx, 0xFF;
			__asm        mov    edx, px;
			__asm        and    edx, 0xFF;
			__asm        shl    edx, 0xA;
			__asm        mov    G_omap[0][0][edx+ecx*4], eax;
		// LINE 5162:
			__asm        mov    eax, px;
			__asm        shl    eax, 6;
			__asm        sub    eax, 0x1FE0;
			__asm        mov    i, ax;
		// LINE 5163:
			__asm        mov    ax, i;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx+2], ax;
		// LINE 5164:
			__asm        mov    eax, 0x2000;
			__asm        mov    ecx, py;
			__asm        shl    ecx, 6;
			__asm        sub    eax, ecx;
			__asm        sub    eax, 0x20;
			__asm        mov    i, ax;
		// LINE 5165:
			__asm        mov    ax, i;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx+6], ax;
		// LINE 5167:
			__asm        mov    ax, alt;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx+4], ax;
		// LINE 5168:
			cptr->size = 0x1;
		// LINE 5169:
			cptr->flags = 0x1;
		// LINE 5170:
			cptr->ctr = 0x0;
		// LINE 5171:
			cptr->stptr = sptr;
		// LINE 5172:
			cptr->dyptr = 0x0;
		// LINE 5174:
			sptr->next = 0x0;
		// LINE 5175:
			__asm        push   0x8B;
			__asm        call   0x004D8821;
			__asm        add    esp, 4;
			__asm        mov    ecx, sptr;
			__asm        mov    [ecx+4], eax;
		// LINE 5176:
			sptr->user1 = 0x10;
		// LINE 5177:
			sptr->user2 = 0x0;
		// LINE 5179:
			__asm        cmp    incity, 1;
			__asm        jne    _T52d;
		// LINE 5181:
			__asm        mov    eax, px;
			__asm        mov    eax, BuildMap[eax*4];
			__asm        mov    ecx, py;
			__asm        mov    byte ptr [eax+ecx], 0xDE;
		// LINE 5183:
		_T52d:
	}
// LINE 5186:
_FOR_546:
	px = x;
	py = (y + 0x3);
	__asm        jmp    _FOR_COND_546;
_FOR_NEXT_546:
	for (; ((x + 0x4) > px); px++) {
		// LINE 5188:
			cptr = S2Alloc(0x18, G_citymempool);
		// LINE 5189:
			sptr = S2Alloc(0x10, G_citymempool);
		// LINE 5190:
			__asm        mov    eax, cptr;
			__asm        mov    ecx, py;
			__asm        and    ecx, 0xFF;
			__asm        mov    edx, px;
			__asm        and    edx, 0xFF;
			__asm        shl    edx, 0xA;
			__asm        mov    G_omap[0][0][edx+ecx*4], eax;
		// LINE 5192:
			__asm        mov    eax, px;
			__asm        shl    eax, 6;
			__asm        sub    eax, 0x1FE0;
			__asm        mov    i, ax;
		// LINE 5193:
			__asm        mov    ax, i;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx+2], ax;
		// LINE 5194:
			__asm        mov    eax, 0x2000;
			__asm        mov    ecx, py;
			__asm        shl    ecx, 6;
			__asm        sub    eax, ecx;
			__asm        sub    eax, 0x20;
			__asm        mov    i, ax;
		// LINE 5195:
			__asm        mov    ax, i;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx+6], ax;
		// LINE 5197:
			__asm        mov    ax, alt;
			__asm        mov    ecx, cptr;
			__asm        mov    [ecx+4], ax;
		// LINE 5198:
			cptr->size = 0x1;
		// LINE 5199:
			cptr->flags = 0x1;
		// LINE 5200:
			cptr->ctr = 0x0;
		// LINE 5201:
			cptr->stptr = sptr;
		// LINE 5202:
			cptr->dyptr = 0x0;
		// LINE 5204:
			sptr->next = 0x0;
		// LINE 5205:
			__asm        push   0x8B;
			__asm        call   0x004D8821;
			__asm        add    esp, 4;
			__asm        mov    ecx, sptr;
			__asm        mov    [ecx+4], eax;
		// LINE 5206:
			sptr->user1 = 0x10;
		// LINE 5207:
			sptr->user2 = 0x0;
		// LINE 5209:
			__asm        cmp    incity, 1;
			__asm        jne    _T659;
		// LINE 5211:
			__asm        mov    eax, px;
			__asm        mov    eax, BuildMap[eax*4];
			__asm        mov    ecx, py;
			__asm        mov    byte ptr [eax+ecx], 0xDE;
		// LINE 5213:
		_T659:
	}
// LINE 5216:
_T65e:
	px = x;
// LINE 5217:
	__asm        mov    eax, y;
	__asm        inc    eax;
	__asm        mov    py, eax;
// LINE 5218:
	cptr = S2Alloc(0x18, G_citymempool);
// LINE 5219:
	sptr = S2Alloc(0x10, G_citymempool);
// LINE 5220:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, py;
	__asm        and    ecx, 0xFF;
	__asm        mov    edx, px;
	__asm        and    edx, 0xFF;
	__asm        shl    edx, 0xA;
	__asm        mov    G_omap[0][0][edx+ecx*4], eax;
// LINE 5222:
	__asm        mov    eax, px;
	__asm        shl    eax, 6;
	__asm        sub    eax, 0x1FE0;
	__asm        mov    i, ax;
// LINE 5223:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+2], ax;
// LINE 5224:
	__asm        mov    eax, 0x2000;
	__asm        mov    ecx, py;
	__asm        shl    ecx, 6;
	__asm        sub    eax, ecx;
	__asm        sub    eax, 0x20;
	__asm        mov    i, ax;
// LINE 5225:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+6], ax;
// LINE 5227:
	__asm        mov    ax, alt;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+4], ax;
// LINE 5228:
	cptr->size = 0x1;
// LINE 5229:
	cptr->flags = 0x1;
// LINE 5230:
	cptr->ctr = 0x0;
// LINE 5231:
	cptr->stptr = sptr;
// LINE 5232:
	cptr->dyptr = 0x0;
// LINE 5234:
	sptr->next = 0x0;
// LINE 5235:
	__asm        push   0x8B;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        mov    ecx, sptr;
	__asm        mov    [ecx+4], eax;
// LINE 5236:
	sptr->user1 = 0x10;
// LINE 5237:
	sptr->user2 = 0x0;
// LINE 5239:
	__asm        cmp    incity, 1;
	__asm        jne    _T76c;
// LINE 5241:
	__asm        mov    eax, px;
	__asm        mov    eax, BuildMap[eax*4];
	__asm        mov    ecx, py;
	__asm        mov    byte ptr [eax+ecx], 0xDE;
// LINE 5244:
_T76c:
	px = x;
// LINE 5245:
	py = (y + 0x2);
// LINE 5246:
	cptr = S2Alloc(0x18, G_citymempool);
// LINE 5247:
	sptr = S2Alloc(0x10, G_citymempool);
// LINE 5248:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, py;
	__asm        and    ecx, 0xFF;
	__asm        mov    edx, px;
	__asm        and    edx, 0xFF;
	__asm        shl    edx, 0xA;
	__asm        mov    G_omap[0][0][edx+ecx*4], eax;
// LINE 5250:
	__asm        mov    eax, px;
	__asm        shl    eax, 6;
	__asm        sub    eax, 0x1FE0;
	__asm        mov    i, ax;
// LINE 5251:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+2], ax;
// LINE 5252:
	__asm        mov    eax, 0x2000;
	__asm        mov    ecx, py;
	__asm        shl    ecx, 6;
	__asm        sub    eax, ecx;
	__asm        sub    eax, 0x20;
	__asm        mov    i, ax;
// LINE 5253:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+6], ax;
// LINE 5255:
	__asm        mov    ax, alt;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+4], ax;
// LINE 5256:
	cptr->size = 0x1;
// LINE 5257:
	cptr->flags = 0x1;
// LINE 5258:
	cptr->ctr = 0x0;
// LINE 5259:
	cptr->stptr = sptr;
// LINE 5260:
	cptr->dyptr = 0x0;
// LINE 5262:
	sptr->next = 0x0;
// LINE 5263:
	__asm        push   0x8B;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        mov    ecx, sptr;
	__asm        mov    [ecx+4], eax;
// LINE 5264:
	sptr->user1 = 0x10;
// LINE 5265:
	sptr->user2 = 0x0;
// LINE 5267:
	__asm        cmp    incity, 1;
	__asm        jne    _T87c;
// LINE 5269:
	__asm        mov    eax, px;
	__asm        mov    eax, BuildMap[eax*4];
	__asm        mov    ecx, py;
	__asm        mov    byte ptr [eax+ecx], 0xDE;
// LINE 5272:
_T87c:
	px = (x + 0x3);
// LINE 5273:
	__asm        mov    eax, y;
	__asm        inc    eax;
	__asm        mov    py, eax;
// LINE 5274:
	cptr = S2Alloc(0x18, G_citymempool);
// LINE 5275:
	sptr = S2Alloc(0x10, G_citymempool);
// LINE 5276:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, py;
	__asm        and    ecx, 0xFF;
	__asm        mov    edx, px;
	__asm        and    edx, 0xFF;
	__asm        shl    edx, 0xA;
	__asm        mov    G_omap[0][0][edx+ecx*4], eax;
// LINE 5278:
	__asm        mov    eax, px;
	__asm        shl    eax, 6;
	__asm        sub    eax, 0x1FE0;
	__asm        mov    i, ax;
// LINE 5279:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+2], ax;
// LINE 5280:
	__asm        mov    eax, 0x2000;
	__asm        mov    ecx, py;
	__asm        shl    ecx, 6;
	__asm        sub    eax, ecx;
	__asm        sub    eax, 0x20;
	__asm        mov    i, ax;
// LINE 5281:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+6], ax;
// LINE 5283:
	__asm        mov    ax, alt;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+4], ax;
// LINE 5284:
	cptr->size = 0x1;
// LINE 5285:
	cptr->flags = 0x1;
// LINE 5286:
	cptr->ctr = 0x0;
// LINE 5287:
	cptr->stptr = sptr;
// LINE 5288:
	cptr->dyptr = 0x0;
// LINE 5290:
	sptr->next = 0x0;
// LINE 5291:
	__asm        push   0x8B;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        mov    ecx, sptr;
	__asm        mov    [ecx+4], eax;
// LINE 5292:
	sptr->user1 = 0x10;
// LINE 5293:
	sptr->user2 = 0x0;
// LINE 5295:
	__asm        cmp    incity, 1;
	__asm        jne    _T98d;
// LINE 5297:
	__asm        mov    eax, px;
	__asm        mov    eax, BuildMap[eax*4];
	__asm        mov    ecx, py;
	__asm        mov    byte ptr [eax+ecx], 0xDE;
// LINE 5300:
_T98d:
	px = (x + 0x3);
// LINE 5301:
	py = (y + 0x2);
// LINE 5302:
	cptr = S2Alloc(0x18, G_citymempool);
// LINE 5303:
	sptr = S2Alloc(0x10, G_citymempool);
// LINE 5304:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, py;
	__asm        and    ecx, 0xFF;
	__asm        mov    edx, px;
	__asm        and    edx, 0xFF;
	__asm        shl    edx, 0xA;
	__asm        mov    G_omap[0][0][edx+ecx*4], eax;
// LINE 5306:
	__asm        mov    eax, px;
	__asm        shl    eax, 6;
	__asm        sub    eax, 0x1FE0;
	__asm        mov    i, ax;
// LINE 5307:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+2], ax;
// LINE 5308:
	__asm        mov    eax, 0x2000;
	__asm        mov    ecx, py;
	__asm        shl    ecx, 6;
	__asm        sub    eax, ecx;
	__asm        sub    eax, 0x20;
	__asm        mov    i, ax;
// LINE 5309:
	__asm        mov    ax, i;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+6], ax;
// LINE 5311:
	__asm        mov    ax, alt;
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+4], ax;
// LINE 5312:
	cptr->size = 0x1;
// LINE 5313:
	cptr->flags = 0x1;
// LINE 5314:
	cptr->ctr = 0x0;
// LINE 5315:
	cptr->stptr = sptr;
// LINE 5316:
	cptr->dyptr = 0x0;
// LINE 5318:
	sptr->next = 0x0;
// LINE 5319:
	__asm        push   0x8B;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        mov    ecx, sptr;
	__asm        mov    [ecx+4], eax;
// LINE 5320:
	sptr->user1 = 0x10;
// LINE 5321:
	sptr->user2 = 0x0;
// LINE 5323:
	__asm        cmp    incity, 1;
	__asm        jne    _Taa0;
// LINE 5325:
	__asm        mov    eax, px;
	__asm        mov    eax, BuildMap[eax*4];
	__asm        mov    ecx, py;
	__asm        mov    byte ptr [eax+ecx], 0xDE;
// LINE 5330:
_Taa0:
	__asm        cmp    x, 0x7F;
	__asm        jle    _Tdc6;

	__asm        cmp    y, 0x7F;
	__asm        jle    _Tdc6;
// LINE 5332:
_FOR_abf:
	for (px = x; ((x + 0x10) > px); px += 0x4) {
		// LINE 5334:
		_FOR_add:
			for (py = y; ((y + 0x10) > py); py += 0x4) {
				// LINE 5336:
					__asm        mov    eax, px;
					__asm        cmp    x, eax;
					__asm        jne    _Tb0d;

					__asm        mov    eax, py;
					__asm        cmp    y, eax;
					__asm        jne    _Tb0d;

					__asm        jmp    _FOR_NEXT_add;
				// LINE 5338:
				_Tb0d:
					cptr = S2Alloc(0x18, G_citymempool);
				// LINE 5339:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5340:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, px;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, py;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 5341:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, px;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, py;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 5342:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, px;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        shl    ecx, 0xA;
					__asm        mov    edx, py;
					__asm        and    edx, 0xFF;
					__asm        mov    G_omap[0][0][ecx+edx*4], eax;
				// LINE 5343:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5344:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5345:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5346:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        inc    ecx;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5347:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5348:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5349:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5350:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 2;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5351:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5352:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        inc    edx;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5353:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        add    edx, 2;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5354:
					__asm        mov    eax, cptr;
					__asm        mov    ecx, py;
					__asm        add    ecx, 3;
					__asm        and    ecx, 0xFF;
					__asm        mov    edx, px;
					__asm        add    edx, 3;
					__asm        and    edx, 0xFF;
					__asm        shl    edx, 0xA;
					__asm        mov    G_omap[0][0][edx+ecx*4], eax;
				// LINE 5356:
					__asm        mov    eax, px;
					__asm        shl    eax, 6;
					__asm        sub    eax, 0x1F80;
					__asm        mov    i, ax;
				// LINE 5357:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+2], ax;
				// LINE 5358:
					__asm        mov    eax, 0x2000;
					__asm        mov    ecx, py;
					__asm        shl    ecx, 6;
					__asm        sub    eax, ecx;
					__asm        sub    eax, 0x80;
					__asm        mov    i, ax;
				// LINE 5359:
					__asm        mov    ax, i;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+6], ax;
				// LINE 5360:
					__asm        mov    ax, alt;
					__asm        mov    ecx, cptr;
					__asm        mov    [ecx+4], ax;
				// LINE 5363:
					cptr->size = 0x4;
				// LINE 5364:
					cptr->flags = 0x0;
				// LINE 5365:
					cptr->ctr = 0x0;
				// LINE 5366:
					cptr->stptr = 0x0;
				// LINE 5367:
					cptr->dyptr = 0x0;
			}
		// LINE 5369:
		_Tdc1:
	}
// LINE 5374:
_Tdc6:
	__asm        movsx  eax, reinterpret_cast<uint16_t>(x);
	__asm        inc    eax;
	__asm        mov    G_helibase.hangar.x, eax;
// LINE 5375:
	__asm        movsx  eax, reinterpret_cast<uint16_t>(y);
	__asm        inc    eax;
	__asm        mov    G_helibase.hangar.y, eax;
// LINE 5378:
	G_helibase.pad1.x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
// LINE 5379:
	G_helibase.pad1.y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
// LINE 5380:
	__asm        mov    eax, x;
	__asm        inc    eax;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad2.x, eax;
// LINE 5381:
	G_helibase.pad2.y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
// LINE 5382:
	__asm        mov    eax, x;
	__asm        add    eax, 2;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad3.x, eax;
// LINE 5383:
	G_helibase.pad3.y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
// LINE 5384:
	__asm        mov    eax, x;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad4.x, eax;
// LINE 5385:
	G_helibase.pad4.y = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(y));
// LINE 5388:
	__asm        mov    eax, x;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad5.x, eax;
// LINE 5389:
	__asm        mov    eax, y;
	__asm        inc    eax;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad5.y, eax;
// LINE 5390:
	__asm        mov    eax, x;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad6.x, eax;
// LINE 5391:
	__asm        mov    eax, y;
	__asm        add    eax, 2;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad6.y, eax;
// LINE 5394:
	__asm        mov    eax, x;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad7.x, eax;
// LINE 5395:
	__asm        mov    eax, y;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad7.y, eax;
// LINE 5396:
	__asm        mov    eax, x;
	__asm        add    eax, 2;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad8.x, eax;
// LINE 5397:
	__asm        mov    eax, y;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad8.y, eax;
// LINE 5398:
	__asm        mov    eax, x;
	__asm        inc    eax;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad9.x, eax;
// LINE 5399:
	__asm        mov    eax, y;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad9.y, eax;
// LINE 5400:
	G_helibase.pad10.x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
// LINE 5401:
	__asm        mov    eax, y;
	__asm        add    eax, 3;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad10.y, eax;
// LINE 5404:
	G_helibase.pad11.x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
// LINE 5405:
	__asm        mov    eax, y;
	__asm        add    eax, 2;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad11.y, eax;
// LINE 5406:
	G_helibase.pad12.x = reinterpret_cast<int16_t>(reinterpret_cast<uint16_t>(x));
// LINE 5407:
	__asm        mov    eax, y;
	__asm        inc    eax;
	__asm        movsx  eax, ax;
	__asm        mov    G_helibase.pad12.y, eax;
// LINE 5409:
	G_helibase_found = 0x1;
// LINE 5410:
}



// Contribution: 2:00003dc0-00003fd7 Module: 170, 8 byte alignment, initialized_data, read, 
// GLOBAL: COPTER_D 0x00592dc0
static const int32_t TurnTable3[4][8] = {{0, 1, 2, 3, 4, 5, 6, 7}, {2, 3, 4, 5, 6, 7, 0, 1}, {6, 7, 0, 1, 2, 3, 4, 5}, {4, 5, 6, 7, 0, 1, 2, 3}};

// GLOBAL: COPTER_D 0x00592e40
static const int32_t TurnTable2[4][4] = {{0, 1, 2, 3}, {1, 2, 3, 0}, {3, 0, 1, 2}, {2, 3, 0, 1}};

// GLOBAL: COPTER_D 0x00592e80
static const int32_t IndexToType[4] = {1, 2, 4, 8};

// GLOBAL: COPTER_D 0x00592e90
static const int32_t TypeToIndex2[16] = {-1, 0, 1, -1, 2, -1, -1, -1, 3, -1, -1, -1, -1, -1, -1, -1};

// GLOBAL: COPTER_D 0x00592ed0
static const int32_t TILUT[4][4] = {{0, 1, 3, 2}, {2, 0, 1, 3}, {3, 2, 0, 1}, {1, 3, 2, 0}};

// GLOBAL: COPTER_D 0x00592f10
static const /*packed*/ struct _dPoint2d OT[4] = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x00592f50
static const /*packed*/ struct _dPoint2d RRT[4] = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x00592f90
static const /*packed*/ struct _dPoint2d LRT[4] = { 0 /* todo */ };



// Contribution: 3:0001e9d0-0001ecb1 Module: 170, 4 byte alignment, initialized_data, read, write, 
// GLOBAL: COPTER_D 0x005b59d0
long G_alt = 64;

// GLOBAL: COPTER_D 0x005b59d4
long G_last_grid_size = 17;

// GLOBAL: COPTER_D 0x005b59d8
long S_down_trend = 0;

// GLOBAL: COPTER_D 0x005b59dc
long S_up_trend = 0;

// GLOBAL: COPTER_D 0x005b59e0
static long S_S2CityAlloc_Count = 0;

// GLOBAL: COPTER_D 0x005b59e4
static int32_t S_inmapmode = 0;

// GLOBAL: COPTER_D 0x005b59e8
static int32_t S_watermorph = 0;

// GLOBAL: COPTER_D 0x005b59ec
static int32_t how_deep = 0;

// GLOBAL: COPTER_D 0x005b59f0
static long S_water_cycle = 0;

// GLOBAL: COPTER_D 0x005b59f4
static long S_water_timer = 0;



// Contribution: 3:00072098-000934ff Module: 170, 8 byte alignment, uninitialized_data, read, write, 
// GLOBAL: COPTER_D 0x00609098
static /*packed*/ struct Point3d S_local_lstart;

// GLOBAL: COPTER_D 0x006090a4
static int32_t S_used_spiralscan;

// GLOBAL: COPTER_D 0x006090a8
static /*packed*/ struct VRview S_terr_pos;

// GLOBAL: COPTER_D 0x00609100
static long * S_facesort;

// GLOBAL: COPTER_D 0x00609104
static /*packed*/ struct Point2d *S_rlast;

// GLOBAL: COPTER_D 0x00609108
static /*packed*/ struct Point2d S_lcells[256];

// GLOBAL: COPTER_D 0x00609908
static long S_XposZneg[4];

// GLOBAL: COPTER_D 0x00609918
static /*packed*/ struct _CELL_INFO S_tmp_cells[30];

// GLOBAL: COPTER_D 0x00609be8
static /*packed*/ struct Point2d *S_fovlast;

// GLOBAL: COPTER_D 0x00609bf0
static /*packed*/ struct Point3d S_world_lstart;

// GLOBAL: COPTER_D 0x00609c00
static int32_t S_rrotmat[4][4];

// GLOBAL: COPTER_D 0x00609c40
static long S_XposZpos[4];

// GLOBAL: COPTER_D 0x00609c50
static /*packed*/ struct Point2d S_fov_cells[16384];

// GLOBAL: COPTER_D 0x00629c50
static /*packed*/ struct Point2d S_rcells[256];

// GLOBAL: COPTER_D 0x0062a450
static long S_tmpcell_ctr;

// GLOBAL: COPTER_D 0x0062a458
static int32_t S_lrotmat[4][4];

// GLOBAL: COPTER_D 0x0062a498
static /*packed*/ struct Point2d S_pos;

// GLOBAL: COPTER_D 0x0062a4a0
static /*packed*/ struct Point2d *S_llast;

// GLOBAL: COPTER_D 0x0062a4a8
static /*packed*/ struct Point3d S_local_rstart;

// GLOBAL: COPTER_D 0x0062a4b8
static long S_XnegZneg[4];

// GLOBAL: COPTER_D 0x0062a4c8
static /*packed*/ struct Point3d S_world_rstart;

// GLOBAL: COPTER_D 0x0062a4d4
static short S_lowres_dist;

// GLOBAL: COPTER_D 0x0062a4d8
static long S_XnegZpos[4];

// GLOBAL: COPTER_D 0x0062a4e8
static /*packed*/ struct Point3d S_world_eye;

// GLOBAL: COPTER_D 0x0062a4f8
static /*packed*/ struct Point2d S_last_pos;



// Unknown globals:
// The PDB was slightly corrupted and we aren't sure which file these globals belong to.

// WARNING: this global might actually belong to: C:\Copter\source\sparkal\Globals.cpp
// GLOBAL: COPTER_D 0x00662870
long GridNSortFaces; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\sparkal\Globals.cpp
// GLOBAL: COPTER_D 0x0066635c
long G_opolys; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\sparkal\Globals.cpp
// GLOBAL: COPTER_D 0x0066282c
long G_gdpolys; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\sparkal\Globals.cpp
// GLOBAL: COPTER_D 0x0066636c
long G_odpolys; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\sparkal\Globals.cpp
// GLOBAL: COPTER_D 0x006663a0
long G_ViewSize; // Contrib missing

// GLOBAL: COPTER_D 0x006bed30
/*packed*/ struct Point2d S_curr_pos; // Contrib missing

// GLOBAL: COPTER_D 0x006c1190
/*packed*/ struct _HELIBASE_DATA G_helibase; // Contrib missing

// GLOBAL: COPTER_D 0x006c1370
int32_t ViewRot[4][4]; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\game\S3auto.cpp
// GLOBAL: COPTER_D 0x006c1370
int32_t ViewRot[4][4]; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\game\S3auto.cpp
// GLOBAL: COPTER_D 0x006c1330
int32_t ViewYRot[4][4]; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\game\S3auto.cpp
// GLOBAL: COPTER_D 0x006bed30
/*packed*/ struct Point2d S_curr_pos; // Contrib missing

// GLOBAL: COPTER_D 0x006bed38
char * G_smokey; // Contrib missing

