// Module: S3render.obj
// Source: C:\Copter\source\game\S3render.c
// autogenerated by simcopter_tool from PDB file

// Type: /*packed*/ struct VRResource (forward reference);
struct VRResource{ // packed(0x10 bytes) TI: 0x18ae
	char * mem;
	int32_t mempoolid;
	int32_t type;
	int32_t entry;
};

// Type: long;

// Type: /*packed*/ struct VRMemPool (forward reference);
struct VRMemPool{ // packed(0x20 bytes) TI: 0x2453
	int32_t ObjCount;
	int32_t entry;
	char * Reset_Xf;
	char * Reset_2d;
	char * Current_Xf;
	char * Current_2d;
	char * End_Xf;
	char * End_2d;
};

// Type: int32_t;

// Type: char *;

// Type: /*packed*/ struct _dPoint2d (forward reference);
struct _dPoint2d{ // packed(0x10 bytes) TI: 0x2766
	double x;
	double z;
};

// Type: /*unpacked*/ struct VRResource (forward reference);
struct VRResource{ // not packed(0x10 bytes) TI: 0x34b5
	char * mem;
	int32_t mempoolid;
	int32_t type;
	int32_t entry;
};

// Type: /*unpacked*/ struct VRMemPool (forward reference);
struct VRMemPool{ // not packed(0x20 bytes) TI: 0x3e14
	int32_t ObjCount;
	int32_t entry;
	char * Reset_Xf;
	char * Reset_2d;
	char * Current_Xf;
	char * Current_2d;
	char * End_Xf;
	char * End_2d;
};

// Type: char;

// Type: /*packed*/ struct tagUserPersonalInfo (forward reference);
struct tagUserPersonalInfo{ // packed(0x58 bytes) TI: 0x1a2a
	char szUserName[64];
	long lMoney;
	long lHelicopters;
	long lEquipment;
	long lTrophies;
	long lPoints;
	long lTeargasCount;
};

// Type: /*packed*/ struct Point2d (forward reference);
struct Point2d{ // packed(0x8 bytes) TI: 0x18b2
	int32_t x;
	int32_t y;
};

// Type: void * __ptr32;

// Type: void;

// Type: int32_t *;



// Contribution: 1:000e9c40-000eabb1 Module: 179, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x004eac40
int32_t VRAppInit() {
	int32_t obj;
	int32_t j;
	long mem2d;
	int32_t i;
	long memxf;
	long maxval;
	int32_t instanceID;
	int32_t totalVehicles;
	char szFilePath[260];

// LINE 175:
	G_InitializationProgress = 0x1;
// LINE 179:
	__asm        call   S3HeliTweakInit;
// LINE 180:
	__asm        call   S3FireTweakInit;
// LINE 181:
	__asm        call   S3CameraTweakInit;
// LINE 182:
	__asm        call   S3PersonTweakInit;
// LINE 183:
	__asm        call   S3MissionTweakInit;
// LINE 184:
	__asm        call   CareerCityTweakInit;
// LINE 185:
	__asm        push   0x5B4798;
	__asm        call   TWKReadAllFiles;
	__asm        add    esp, 4;
// LINE 186:
	__asm        call   UpdateFigureVals;
// LINE 188:
	__asm        or     G_InitializationProgress, 2;
// LINE 189:
	__asm        call   VREngineInit;
// LINE 190:
	__asm        cmp    G_run_old, 0;
	__asm        jne    _T64;
// LINE 191:
	__asm        call   0x004D7300;
// LINE 195:
_T64:
	i = 0x3a3a3a3a;
// LINE 196:
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   0x004D682B;
	__asm        add    esp, 4;
// LINE 199:
	__asm        mov    eax, i;
	__asm        and    eax, 0xFF;
	__asm        mov    G_ClearColor, eax;
// LINE 243:
	__asm        push   0x598EE0;
	__asm        call   0x004D6A69;
	__asm        add    esp, 4;
// LINE 244:
	G_video_mode = 0x10;
// LINE 247:
	__asm        push   0x10000;
	__asm        call   0x004D6610;
	__asm        add    esp, 4;
// LINE 248:
	__asm        call   VRFrustSetNormals;
// LINE 271:
	__asm        or     G_InitializationProgress, 4;
// LINE 276:
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        push   0x5B47A4;
	__asm        push   0;
	__asm        push   6;
	__asm        call   GetPathForFile;
	__asm        add    esp, 0x10;
// LINE 277:
	__asm        push   0x5B47B0;
	__asm        push   3;
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        call   VRLoadResource;
	__asm        add    esp, 0xC;
	__asm        mov    G_restex, eax;
// LINE 279:
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        push   0x5B47B4;
	__asm        push   0;
	__asm        push   7;
	__asm        call   GetPathForFile;
	__asm        add    esp, 0x10;
// LINE 280:
	__asm        push   0x5B47C0;
	__asm        push   1;
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        call   VRLoadResource;
	__asm        add    esp, 0xC;
	__asm        mov    G_resgeo1, eax;
// LINE 282:
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        push   0x5B47C8;
	__asm        push   0;
	__asm        push   7;
	__asm        call   GetPathForFile;
	__asm        add    esp, 0x10;
// LINE 283:
	__asm        push   0x5B47D4;
	__asm        push   1;
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        call   VRLoadResource;
	__asm        add    esp, 0xC;
	__asm        mov    G_resgeo2, eax;
// LINE 285:
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        push   0x5B47DC;
	__asm        push   0;
	__asm        push   7;
	__asm        call   GetPathForFile;
	__asm        add    esp, 0x10;
// LINE 286:
	__asm        push   0x5B47E8;
	__asm        push   1;
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        call   VRLoadResource;
	__asm        add    esp, 0xC;
	__asm        mov    G_resgeo3, eax;
// LINE 305:
	__asm        cmp    G_restex, 0;
	__asm        je     _T1bd;

	__asm        cmp    G_resgeo1, 0;
	__asm        je     _T1bd;

	__asm        cmp    G_resgeo2, 0;
	__asm        je     _T1bd;

	__asm        cmp    G_resgeo3, 0;
	__asm        jne    _T1ca;
// LINE 306:
_T1bd:
	__asm        push   0x5B47F0;
	__asm        call   ERexit;
	__asm        add    esp, 4;
// LINE 311:
_T1ca:
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        push   0x5B480C;
	__asm        push   0;
	__asm        push   6;
	__asm        call   GetPathForFile;
	__asm        add    esp, 0x10;
// LINE 312:
	__asm        push   0x14;
	__asm        push   0x1F1F;
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        lea    eax, szFilePath[0];
	__asm        push   eax;
	__asm        call   VRLoadAlignedBmp;
	__asm        add    esp, 0x10;
	__asm        cmp    eax, 1;
	__asm        je     _T214;
// LINE 313:
	__asm        push   0x5B4818;
	__asm        call   ERexit;
	__asm        add    esp, 4;
// LINE 319:
_T214:
	__asm        push   0;
	__asm        push   2;
	__asm        push   0x1F1F;
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        call   VRSetBmpToTiled;
	__asm        add    esp, 0x10;
// LINE 320:
	__asm        push   0;
	__asm        push   0x27;
	__asm        push   0x1F1F;
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        call   VRSetBmpToTiled;
	__asm        add    esp, 0x10;
// LINE 321:
	__asm        push   0;
	__asm        push   0x28;
	__asm        push   0x1F1F;
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        call   VRSetBmpToTiled;
	__asm        add    esp, 0x10;
// LINE 322:
	__asm        push   0;
	__asm        push   0xD;
	__asm        push   0x1F1F;
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        call   VRSetBmpToTiled;
	__asm        add    esp, 0x10;
// LINE 324:
	__asm        or     G_InitializationProgress, 8;
// LINE 326:
	__asm        push   1;
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        call   VRCreateTexColors;
	__asm        add    esp, 8;
	__asm        test   eax, eax;
	__asm        je     _T29c;
// LINE 327:
	__asm        push   0x5B4834;
	__asm        call   ERexit;
	__asm        add    esp, 4;
// LINE 337:
_T29c:
	__asm        mov    mem2d, 0;
	__asm        mov    eax, mem2d;
	__asm        mov    memxf, eax;
// LINE 339:
	__asm        mov    eax, G_resgeo1;
	__asm        push   eax;
	__asm        call   VRGetResObjectCnt;
	__asm        add    esp, 4;
	__asm        mov    i, eax;
// LINE 340:
	__asm        mov    j, 0;
	__asm        jmp    _T2db;
_T2d5:
	__asm        inc    j;
_T2db:
	__asm        mov    eax, i;
	__asm        cmp    j, eax;
	__asm        jge    _T373;
// LINE 342:
	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo1;
	__asm        push   eax;
	__asm        call   VRGetResObject;
	__asm        add    esp, 8;
	__asm        mov    obj, eax;
// LINE 343:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D84F8;
	__asm        add    esp, 4;
	__asm        mov    maxval, eax;
// LINE 344:
	__asm        mov    eax, maxval;
	__asm        cmp    memxf, eax;
	__asm        jge    _T33b;

	memxf = maxval;
// LINE 345:
_T33b:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D8506;
	__asm        add    esp, 4;
	__asm        mov    maxval, eax;
// LINE 346:
	__asm        mov    eax, maxval;
	__asm        cmp    mem2d, eax;
	__asm        jge    _T36e;

	mem2d = maxval;
// LINE 347:
_T36e:
	__asm        jmp    _T2d5;
// LINE 349:
_T373:
	__asm        mov    eax, G_resgeo2;
	__asm        push   eax;
	__asm        call   VRGetResObjectCnt;
	__asm        add    esp, 4;
	__asm        mov    i, eax;
// LINE 350:
	__asm        mov    j, 0;
	__asm        jmp    _T39c;
_T396:
	__asm        inc    j;
_T39c:
	__asm        mov    eax, i;
	__asm        cmp    j, eax;
	__asm        jge    _T434;
// LINE 352:
	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo2;
	__asm        push   eax;
	__asm        call   VRGetResObject;
	__asm        add    esp, 8;
	__asm        mov    obj, eax;
// LINE 353:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D84F8;
	__asm        add    esp, 4;
	__asm        mov    maxval, eax;
// LINE 354:
	__asm        mov    eax, maxval;
	__asm        cmp    memxf, eax;
	__asm        jge    _T3fc;

	memxf = maxval;
// LINE 355:
_T3fc:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D8506;
	__asm        add    esp, 4;
	__asm        mov    maxval, eax;
// LINE 356:
	__asm        mov    eax, maxval;
	__asm        cmp    mem2d, eax;
	__asm        jge    _T42f;

	mem2d = maxval;
// LINE 357:
_T42f:
	__asm        jmp    _T396;
// LINE 360:
_T434:
	__asm        mov    eax, G_resgeo3;
	__asm        push   eax;
	__asm        call   VRGetResObjectCnt;
	__asm        add    esp, 4;
	__asm        mov    i, eax;
// LINE 361:
	__asm        mov    j, 0;
	__asm        jmp    _T45d;
_T457:
	__asm        inc    j;
_T45d:
	__asm        mov    eax, i;
	__asm        cmp    j, eax;
	__asm        jge    _T4f5;
// LINE 363:
	__asm        mov    eax, j;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo3;
	__asm        push   eax;
	__asm        call   VRGetResObject;
	__asm        add    esp, 8;
	__asm        mov    obj, eax;
// LINE 364:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D84F8;
	__asm        add    esp, 4;
	__asm        mov    maxval, eax;
// LINE 365:
	__asm        mov    eax, maxval;
	__asm        cmp    memxf, eax;
	__asm        jge    _T4bd;

	memxf = maxval;
// LINE 366:
_T4bd:
	__asm        mov    eax, obj;
	__asm        push   eax;
	__asm        call   0x004D8506;
	__asm        add    esp, 4;
	__asm        mov    maxval, eax;
// LINE 367:
	__asm        mov    eax, maxval;
	__asm        cmp    mem2d, eax;
	__asm        jge    _T4f0;

	mem2d = maxval;
// LINE 368:
_T4f0:
	__asm        jmp    _T457;
// LINE 372:
_T4f5:
	__asm        shl    mem2d, 3;
// LINE 374:
	__asm        mov    eax, mem2d;
	__asm        push   eax;
	__asm        mov    eax, memxf;
	__asm        push   eax;
	__asm        call   VRCreateMemPool;
	__asm        add    esp, 8;
	__asm        mov    G_main_mp, eax;
// LINE 375:
	__asm        cmp    G_main_mp, 0;
	__asm        jne    _T531;
// LINE 376:
	__asm        push   0x5B485C;
	__asm        call   ERexit;
	__asm        add    esp, 4;
// LINE 379:
_T531:
	__asm        mov    eax, G_main_mp;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo1;
	__asm        push   eax;
	__asm        call   VRAssignMemPoolToRes;
	__asm        add    esp, 8;
// LINE 380:
	__asm        mov    eax, G_main_mp;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo2;
	__asm        push   eax;
	__asm        call   VRAssignMemPoolToRes;
	__asm        add    esp, 8;
// LINE 381:
	__asm        mov    eax, G_main_mp;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo3;
	__asm        push   eax;
	__asm        call   VRAssignMemPoolToRes;
	__asm        add    esp, 8;
// LINE 383:
	__asm        or     G_InitializationProgress, 0x10;
// LINE 384:
	__asm        call   S3TerrainInit;
// LINE 386:
	__asm        or     G_InitializationProgress, 0x20;
// LINE 387:
	__asm        call   S3ObjInit;
// LINE 393:
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo1;
	__asm        push   eax;
	__asm        call   VRAssignTextureResToGroup;
	__asm        add    esp, 8;
// LINE 394:
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo2;
	__asm        push   eax;
	__asm        call   VRAssignTextureResToGroup;
	__asm        add    esp, 8;
// LINE 395:
	__asm        mov    eax, G_restex;
	__asm        push   eax;
	__asm        mov    eax, G_resgeo3;
	__asm        push   eax;
	__asm        call   VRAssignTextureResToGroup;
	__asm        add    esp, 8;
// LINE 398:
	__asm        mov    eax, G_resgeo1;
	__asm        push   eax;
	__asm        call   VRResFreeBarrys;
	__asm        add    esp, 4;
// LINE 399:
	__asm        mov    eax, G_resgeo2;
	__asm        push   eax;
	__asm        call   VRResFreeBarrys;
	__asm        add    esp, 4;
// LINE 400:
	__asm        mov    eax, G_resgeo3;
	__asm        push   eax;
	__asm        call   VRResFreeBarrys;
	__asm        add    esp, 4;
// LINE 403:
	__asm        or     G_InitializationProgress, 0x40;
// LINE 404:
	__asm        call   S3MapInit;
// LINE 408:
	__asm        call   S3ObjLinkLowRes;
// LINE 413:
	__asm        push   0x10000;
	__asm        call   S2AllocPool;
	__asm        add    esp, 4;
	__asm        mov    G_dyobjmempool, eax;
// LINE 416:
	__asm        or     G_InitializationProgress, 0x80;
// LINE 417:
	G_helidata[3].type = 0x3;
// LINE 418:
	G_helidata[1].type = 0x1;
// LINE 419:
	G_helidata[2].type = 0x2;
// LINE 420:
	G_helidata[5].type = 0x5;
// LINE 421:
	G_helidata[0].type = 0x0;
// LINE 422:
	G_helidata[4].type = 0x4;
// LINE 423:
	G_helidata[6].type = 0x6;
// LINE 424:
	G_helidata[7].type = 0x7;
// LINE 425:
	G_helidata[8].type = 0x8;
// LINE 426:
	__asm        push   0x6BF1D0;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 427:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0x32C;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 428:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0x658;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 429:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0x984;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 430:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0xCB0;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 431:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0xFDC;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 432:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0x1308;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 433:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0x1634;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 434:
	__asm        mov    eax, 0x6BF1D0;
	__asm        add    eax, 0x1960;
	__asm        push   eax;
	__asm        call   S3HeliInitInstance;
	__asm        add    esp, 4;
// LINE 436:
	__asm        or     G_InitializationProgress, 0x100;
// LINE 439:
	__asm        mov    instanceID, 0;
	__asm        jmp    _T736;
_T730:
	__asm        inc    instanceID;
_T736:
	__asm        cmp    instanceID, 0x32;
	__asm        jge    _T764;
// LINE 441:
	__asm        mov    eax, instanceID;
	__asm        push   eax;
	__asm        call   CreateAutomobileInstance;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T75f;
// LINE 442:
	__asm        jmp    _T764;
// LINE 443:
_T75f:
	__asm        jmp    _T730;
// LINE 445:
_T764:
	__asm        mov    eax, instanceID;
	__asm        add    eax, 5;
	__asm        mov    totalVehicles, eax;
// LINE 446:
	__asm        jmp    _T77e;
_T778:
	__asm        inc    instanceID;
_T77e:
	__asm        mov    eax, instanceID;
	__asm        cmp    totalVehicles, eax;
	__asm        jle    _T7b1;
// LINE 448:
	__asm        mov    eax, instanceID;
	__asm        push   eax;
	__asm        call   CreatePoliceCarInstance;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T7ac;
// LINE 449:
	__asm        jmp    _T7b1;
// LINE 450:
_T7ac:
	__asm        jmp    _T778;
// LINE 452:
_T7b1:
	__asm        mov    eax, instanceID;
	__asm        add    eax, 5;
	__asm        mov    totalVehicles, eax;
// LINE 453:
	__asm        jmp    _T7cb;
_T7c5:
	__asm        inc    instanceID;
_T7cb:
	__asm        mov    eax, instanceID;
	__asm        cmp    totalVehicles, eax;
	__asm        jle    _T7fe;
// LINE 455:
	__asm        mov    eax, instanceID;
	__asm        push   eax;
	__asm        call   CreateFireTruckInstance;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T7f9;
// LINE 456:
	__asm        jmp    _T7fe;
// LINE 457:
_T7f9:
	__asm        jmp    _T7c5;
// LINE 459:
_T7fe:
	__asm        mov    eax, instanceID;
	__asm        add    eax, 5;
	__asm        mov    totalVehicles, eax;
// LINE 460:
	__asm        jmp    _T818;
_T812:
	__asm        inc    instanceID;
_T818:
	__asm        mov    eax, instanceID;
	__asm        cmp    totalVehicles, eax;
	__asm        jle    _T84b;
// LINE 462:
	__asm        mov    eax, instanceID;
	__asm        push   eax;
	__asm        call   CreateAmbulanceInstance;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T846;
// LINE 463:
	__asm        jmp    _T84b;
// LINE 464:
_T846:
	__asm        jmp    _T812;
// LINE 467:
_T84b:
	__asm        or     G_InitializationProgress, 0x200;
// LINE 468:
	__asm        mov    eax, instanceID;
	__asm        add    eax, 5;
	__asm        mov    totalVehicles, eax;
// LINE 469:
	__asm        jmp    _T86f;
_T869:
	__asm        inc    instanceID;
_T86f:
	__asm        mov    eax, instanceID;
	__asm        cmp    totalVehicles, eax;
	__asm        jle    _T8a2;
// LINE 471:
	__asm        mov    eax, instanceID;
	__asm        push   eax;
	__asm        call   CreateCriminalCarInstance;
	__asm        add    esp, 4;
	__asm        test   eax, eax;
	__asm        jne    _T89d;
// LINE 472:
	__asm        jmp    _T8a2;
// LINE 473:
_T89d:
	__asm        jmp    _T869;
// LINE 476:
_T8a2:
	__asm        mov    i, 0;
	__asm        jmp    _T8b7;
_T8b1:
	__asm        inc    i;
_T8b7:
	__asm        cmp    i, 1;
	__asm        jge    _T8d8;
// LINE 483:
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   CreateTrainInstance;
	__asm        add    esp, 4;
// LINE 484:
	__asm        jmp    _T8b1;
// LINE 488:
_T8d8:
	__asm        mov    i, 0;
	__asm        jmp    _T8ed;
_T8e7:
	__asm        inc    i;
_T8ed:
	__asm        cmp    i, 2;
	__asm        jge    _T90e;
// LINE 495:
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   CreatePlaneInstance;
	__asm        add    esp, 4;
// LINE 496:
	__asm        jmp    _T8e7;
// LINE 499:
_T90e:
	__asm        mov    i, 0;
	__asm        jmp    _T923;
_T91d:
	__asm        inc    i;
_T923:
	__asm        cmp    i, 3;
	__asm        jge    _T944;
// LINE 506:
	__asm        mov    eax, i;
	__asm        push   eax;
	__asm        call   CreateBoatInstance;
	__asm        add    esp, 4;
// LINE 507:
	__asm        jmp    _T91d;
// LINE 510:
_T944:
	__asm        or     G_InitializationProgress, 0x400;
// LINE 511:
	__asm        call   S3FireInit;
// LINE 514:
	__asm        call   S3ExplosionInit;
// LINE 517:
	__asm        call   S3MissileInit;
// LINE 520:
	__asm        or     G_InitializationProgress, 0x800;
// LINE 521:
	__asm        call   S3PersonInit;
// LINE 527:
	G_VRAppInitCalled = 0x1;
// LINE 529:
	__asm        push   0;
	__asm        call   VRAppCityInit;
	__asm        add    esp, 4;
	__asm        jmp    near ptr 0x004EB5C5;
// LINE 530:
}

// FUNCTION: COPTER_D 0x004eb5ca
int32_t VRAppCityInit(int32_t reload) {
	/*packed*/ struct tagUserPersonalInfo *up;
	long i;
	/*packed*/ struct Point2d *pad;

// LINE 553:
	__asm        cmp    reload, 1;
	__asm        jne    _T1d;
// LINE 554:
	G_InitializationProgress = 0x0;
// LINE 555:
_T1d:
	__asm        or     G_InitializationProgress, 0x1000;
// LINE 558:
	G_camera_mode = 0x3;
// LINE 562:
	__asm        cmp    reload, 1;
	__asm        jne    _T7b;
// LINE 564:
	__asm        call   S3HeliReset;
// LINE 565:
	__asm        call   S3FireReset;
// LINE 566:
	__asm        call   S3ExplosionReset;
// LINE 567:
	__asm        call   S3MissileReset;
// LINE 568:
	__asm        call   S3PersonReset;
// LINE 569:
	__asm        call   S3StationReset;
// LINE 570:
	__asm        call   ResetAllAutomobiles;
// LINE 571:
	__asm        call   ResetAllTrains;
// LINE 572:
	__asm        call   ResetAllPlanes;
// LINE 573:
	__asm        call   ResetAllBoats;
// LINE 574:
	__asm        mov    eax, G_citymempool;
	__asm        push   eax;
	__asm        call   S2AllocFreePool;
	__asm        add    esp, 4;
// LINE 576:
_T7b:
	__asm        call   S3MissionReset;
// LINE 579:
	__asm        call   S3CityInit;
// LINE 581:
	__asm        or     G_InitializationProgress, 0x2000;
// LINE 583:
	__asm        call   S3RoadGraphInit;
// LINE 586:
	__asm        call   S3StationInit;
// LINE 589:
	__asm        call   S3RoadDataInit;
// LINE 597:
	__asm        cmp    G_daynight, 1;
	__asm        jne    _Tba;
// LINE 599:
	__asm        push   1;
	__asm        call   AutoSetAllHeadlights;
	__asm        add    esp, 4;
// LINE 601:
	__asm        jmp    _Tc4;
// LINE 603:
_Tba:
	__asm        push   0;
	__asm        call   AutoSetAllHeadlights;
	__asm        add    esp, 4;
// LINE 606:
_Tc4:
	__asm        call   S3ObjSetFlatShading;
// LINE 609:
	G_uheli = 0x6bf1d0;
// LINE 613:
	G_testheli = 0x0;
// LINE 618:
	__asm        cmp    G_testmode, 1;
	__asm        jne    _T12b;
// LINE 620:
	G_camera_mode = 0x0;
// LINE 622:
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0xA4];
	__asm        add    eax, 0x18;
	__asm        mov    ecx, 0x6BF1C0;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 623:
	__asm        sub    G_testloc.x, 0x6400000;
// LINE 624:
	__asm        add    G_testloc.z, 0x76C0000;
// LINE 627:
_T12b:
	__asm        or     G_InitializationProgress, 0x4000;
// LINE 629:
	__asm        call   S3ViewerInit;
// LINE 632:
	__asm        push   0x140000;
	__asm        push   0x140000;
	__asm        mov    eax, G_helibase.pad1.y;
	__asm        push   eax;
	__asm        mov    eax, G_helibase.pad1.x;
	__asm        push   eax;
	__asm        call   S3PersonUserStart;
	__asm        add    esp, 0x10;
// LINE 633:
	__asm        cmp    G_camera_mode, 3;
	__asm        jne    _T194;
// LINE 635:
	G_uheli->flags = 0x0;
// LINE 638:
	__asm        push   0x140000;
	__asm        push   0x140000;
	__asm        mov    eax, G_helibase.pad1.y;
	__asm        push   eax;
	__asm        mov    eax, G_helibase.pad1.x;
	__asm        push   eax;
	__asm        call   S3PersonUserAppear;
	__asm        add    esp, 0x10;
// LINE 640:
	__asm        jmp    _T1a0;
// LINE 643:
_T194:
	G_uheli->flags = 0x1;
// LINE 647:
_T1a0:
	__asm        call   GetCurrentUserPersonalInfo;
	__asm        mov    up, eax;
// LINE 648:
	__asm        mov    i, 0;
	__asm        jmp    _T1b7;
_T1b4:
	__asm        inc    i;
_T1b7:
	__asm        cmp    i, 9;
	__asm        jge    _T29e;
// LINE 651:
	__asm        mov    eax, i;
	__asm        mov    ecx, eax;
	__asm        lea    eax, [eax+eax*4];
	__asm        lea    eax, [eax+eax*8];
	__asm        lea    eax, [eax+eax*8];
	__asm        add    eax, ecx;
	__asm        lea    eax, G_helidata[0].type[eax*2];
	__asm        cmp    eax, G_uheli;
	__asm        je     _T1ff;
// LINE 653:
	__asm        mov    eax, i;
	__asm        mov    ecx, eax;
	__asm        lea    eax, [eax+eax*4];
	__asm        lea    eax, [eax+eax*8];
	__asm        lea    eax, [eax+eax*8];
	__asm        add    eax, ecx;
	__asm        mov    G_helidata[0].flags[eax*2], 0;
// LINE 658:
_T1ff:
	__asm        cmp    i, 2;
	__asm        jne    _T24e;
// LINE 660:
	__asm        cmp    G_apachebase_found, 1;
	__asm        jne    _T24e;
// LINE 664:
	__asm        mov    eax, G_helibase.apache_pad.y;
	__asm        push   eax;
	__asm        mov    eax, G_helibase.apache_pad.x;
	__asm        push   eax;
	__asm        mov    eax, i;
	__asm        mov    ecx, eax;
	__asm        lea    eax, [eax+eax*4];
	__asm        lea    eax, [eax+eax*8];
	__asm        lea    eax, [eax+eax*8];
	__asm        add    eax, ecx;
	__asm        lea    eax, G_helidata[0].type[eax*2];
	__asm        push   eax;
	__asm        call   S3HeliGenInit;
	__asm        add    esp, 0xC;
// LINE 665:
	__asm        mov    eax, up;
	__asm        or     dword ptr [eax+0x44], 4;
// LINE 666:
	__asm        jmp    _T1b4;
// LINE 670:
_T24e:
	__asm        mov    eax, up;
	__asm        mov    edx, 1;
	__asm        mov    cl, reinterpret_cast<uint8_t>(i);
	__asm        shl    edx, cl;
	__asm        test   [eax+0x44], edx;
	__asm        je     _T299;
// LINE 672:
	__asm        call   S3HeliGetFreePad;
	__asm        mov    pad, eax;
// LINE 673:
	__asm        mov    eax, pad;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        mov    eax, pad;
	__asm        mov    eax, [eax];
	__asm        push   eax;
	__asm        mov    eax, i;
	__asm        mov    ecx, eax;
	__asm        lea    eax, [eax+eax*4];
	__asm        lea    eax, [eax+eax*8];
	__asm        lea    eax, [eax+eax*8];
	__asm        add    eax, ecx;
	__asm        lea    eax, G_helidata[0].type[eax*2];
	__asm        push   eax;
	__asm        call   S3HeliGenInit;
	__asm        add    esp, 0xC;
// LINE 675:
_T299:
	__asm        jmp    _T1b4;
// LINE 692:
_T29e:
	__asm        mov    eax, 1;
	__asm        jmp    near ptr 0x004EB872;
// LINE 693:
}

// FUNCTION: COPTER_D 0x004eb877
int32_t VRAppGameInit(void * __ptr32 miffReader) {
// LINE 706:
	__asm        cmp    miffReader, 0;
	__asm        je     _T75;
// LINE 711:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3HeliMIFFLoad;
	__asm        add    esp, 4;
// LINE 712:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3MissileMIFFLoad;
	__asm        add    esp, 4;
// LINE 713:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3FireMIFFLoad;
	__asm        add    esp, 4;
// LINE 714:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3MissionMIFFLoad;
	__asm        add    esp, 4;
// LINE 715:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3BoatMIFFLoad;
	__asm        add    esp, 4;
// LINE 716:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3PlaneMIFFLoad;
	__asm        add    esp, 4;
// LINE 717:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3TrainMIFFLoad;
	__asm        add    esp, 4;
// LINE 718:
	__asm        mov    eax, miffReader;
	__asm        push   eax;
	__asm        call   S3AutoMIFFLoad;
	__asm        add    esp, 4;
// LINE 720:
	__asm        jmp    _T75;
// LINE 724:
_T75:
	__asm        mov    eax, G_daynight;
	__asm        push   eax;
	__asm        call   S3SetDayNight;
	__asm        add    esp, 4;
// LINE 725:
	__asm        mov    eax, 1;
	__asm        jmp    near ptr 0x004EB904;
// LINE 726:
}

// FUNCTION: COPTER_D 0x004eb909
int32_t VRAppGameSave(void * __ptr32 miffWriter) {
// LINE 742:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3HeliMIFFSave;
	__asm        add    esp, 4;
// LINE 743:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3MissileMIFFSave;
	__asm        add    esp, 4;
// LINE 744:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3FireMIFFSave;
	__asm        add    esp, 4;
// LINE 745:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3MissionMIFFSave;
	__asm        add    esp, 4;
// LINE 746:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3BoatMIFFSave;
	__asm        add    esp, 4;
// LINE 747:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3PlaneMIFFSave;
	__asm        add    esp, 4;
// LINE 748:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3TrainMIFFSave;
	__asm        add    esp, 4;
// LINE 749:
	__asm        mov    eax, miffWriter;
	__asm        push   eax;
	__asm        call   S3AutoMIFFSave;
	__asm        add    esp, 4;
// LINE 751:
	__asm        mov    eax, 1;
	__asm        jmp    near ptr 0x004EB979;
// LINE 752:
}

// FUNCTION: COPTER_D 0x004eb97e
void VRAppDeInit() {
// LINE 770:
	__asm        call   S3PersonDelete;
// LINE 771:
	__asm        mov    eax, G_citymempool;
	__asm        push   eax;
	__asm        call   S2AllocFreePool;
	__asm        add    esp, 4;
// LINE 772:
	__asm        mov    eax, G_dyobjmempool;
	__asm        push   eax;
	__asm        call   S2AllocFreePool;
	__asm        add    esp, 4;
// LINE 773:
}

// FUNCTION: COPTER_D 0x004eb9aa
void VRAppNextFrame() {
// LINE 791:
	__asm        mov    eax, G_AvLoopTime;
	__asm        shl    eax, 3;
	__asm        sub    eax, G_AvLoopTime;
	__asm        add    eax, LoopTime;
	__asm        sar    eax, 3;
	__asm        mov    G_AvLoopTime, eax;
// LINE 792:
	__asm        inc    G_framectr;
// LINE 805:
	__asm        inc    G_maptics;
// LINE 806:
	__asm        test   reinterpret_cast<uint8_t>(G_maptics), 1;
	__asm        je     _Tb4;
// LINE 807:
	__asm        cmp    G_camera_mode, 3;
	__asm        je     _T98;
// LINE 808:
	__asm        cmp    G_mapmode, 1;
	__asm        jne    _T79;
// LINE 809:
	__asm        call   S3CityDrawOverHeadGrid;
// LINE 810:
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0x18];
	__asm        push   eax;
	__asm        call   S3MapDrawPosLines;
	__asm        add    esp, 8;
// LINE 812:
	__asm        jmp    _T93;
// LINE 813:
_T79:
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        mov    eax, G_uheli;
	__asm        mov    eax, [eax+0x18];
	__asm        push   eax;
	__asm        call   S3MapRender;
	__asm        add    esp, 8;
// LINE 815:
_T93:
	__asm        jmp    _Tb4;
// LINE 816:
_T98:
	__asm        call   GetAvatarCellY;
	__asm        xor    ecx, ecx;
	__asm        mov    cl, al;
	__asm        push   ecx;
	__asm        call   GetAvatarCellX;
	__asm        xor    ecx, ecx;
	__asm        mov    cl, al;
	__asm        push   ecx;
	__asm        call   S3MapRender;
	__asm        add    esp, 8;
// LINE 837:
_Tb4:
	__asm        cmp    G_camera_mode, 3;
	__asm        je     _Td9;
// LINE 838:
	__asm        mov    eax, G_uheli;
	__asm        push   eax;
	__asm        call   S3HeliNextFrame;
	__asm        add    esp, 4;
// LINE 839:
	__asm        call   S3PersonUserNextFrame;
// LINE 841:
	__asm        jmp    _Tde;
// LINE 842:
_Td9:
	__asm        call   S3PersonUserNextFrame;
// LINE 845:
_Tde:
	__asm        call   S3MissionGenerator;
// LINE 851:
	__asm        call   S3FireDriver;
// LINE 855:
	__asm        call   S3AutoSoundDistReset;
// LINE 856:
	__asm        call   ItterateAllAutomobiles;
// LINE 857:
	__asm        call   S3AutoSoundDriver;
// LINE 862:
	__asm        call   ItterateAllTrains;
// LINE 865:
	__asm        call   ItterateAllPlanes;
// LINE 868:
	__asm        call   ItterateAllBoats;
// LINE 872:
	__asm        mov    eax, G_testheli;
	__asm        push   eax;
	__asm        call   S3HeliTestCopter;
	__asm        add    esp, 4;
// LINE 875:
	__asm        call   S3HeliNextFrameDriver;
// LINE 877:
	__asm        call   S3MissileDriver;
// LINE 879:
	__asm        call   S3PersonNextFrame;
// LINE 882:
	__asm        call   S3ExplosionDriver;
// LINE 884:
	__asm        call   S3CityGrid;
// LINE 905:
	__asm        jmp    near ptr 0x004EBADC;
// LINE 906:
}

// FUNCTION: COPTER_D 0x004ebae1
void VRAppNewTextures() {
// LINE 924:
}

// FUNCTION: COPTER_D 0x004ebaec
void SetUserVars(int32_t * user) {
// LINE 941:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax];
	__asm        mov    rFriction, eax;
// LINE 942:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+4];
	__asm        mov    rForce, eax;
// LINE 943:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+8];
	__asm        mov    rVmax, eax;
// LINE 945:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    tFrictionAir, eax;
// LINE 946:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x10];
	__asm        mov    tFrictionGnd, eax;
// LINE 947:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x14];
	__asm        mov    tVmax, eax;
// LINE 949:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x38];
	__asm        sar    eax, 0x10;
	__asm        mov    keyRotateXp, eax;
// LINE 950:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x3C];
	__asm        sar    eax, 0x10;
	__asm        mov    keyRotateXm, eax;
// LINE 951:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x48];
	__asm        sar    eax, 0x10;
	__asm        mov    keyRotateZp, eax;
// LINE 952:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x4C];
	__asm        sar    eax, 0x10;
	__asm        mov    keyRotateZm, eax;
// LINE 954:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x28];
	__asm        mov    thetaspeed, eax;
// LINE 955:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x2C];
	__asm        mov    phispeed, eax;
// LINE 956:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x30];
	__asm        mov    radius, eax;
// LINE 957:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x34];
	__asm        mov    circley, eax;
// LINE 958:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x38];
	__asm        mov    yposcilate, eax;
// LINE 959:
	__asm        mov    eax, user;
	__asm        mov    eax, [eax+0x3C];
	__asm        mov    ynoscilate, eax;
// LINE 962:
}



// Contribution: 2:00003470-0000367f Module: 179, 8 byte alignment, initialized_data, read, 
// GLOBAL: COPTER_D 0x00592470
static const int32_t TurnTable3[4][8] = {{0, 1, 2, 3, 4, 5, 6, 7}, {2, 3, 4, 5, 6, 7, 0, 1}, {6, 7, 0, 1, 2, 3, 4, 5}, {4, 5, 6, 7, 0, 1, 2, 3}};

// GLOBAL: COPTER_D 0x005924f0
static const int32_t TurnTable2[4][4] = {{0, 1, 2, 3}, {1, 2, 3, 0}, {3, 0, 1, 2}, {2, 3, 0, 1}};

// GLOBAL: COPTER_D 0x00592530
static const int32_t IndexToType[4] = {1, 2, 4, 8};

// GLOBAL: COPTER_D 0x00592540
static const int32_t TypeToIndex2[16] = {-1, 0, 1, -1, 2, -1, -1, -1, 3, -1, -1, -1, -1, -1, -1, -1};

// GLOBAL: COPTER_D 0x00592580
static const int32_t TILUT[4][4] = {{0, 1, 3, 2}, {2, 0, 1, 3}, {3, 2, 0, 1}, {1, 3, 2, 0}};

// GLOBAL: COPTER_D 0x005925c0
static const /*packed*/ struct _dPoint2d OT[4] = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x00592600
static const /*packed*/ struct _dPoint2d RRT[4] = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x00592640
static const /*packed*/ struct _dPoint2d LRT[4] = { 0 /* todo */ };



// Contribution: 3:0001d744-0001d876 Module: 179, 4 byte alignment, initialized_data, read, write, 
// GLOBAL: COPTER_D 0x005b4744
int32_t keyRotateXp = 0;

// GLOBAL: COPTER_D 0x005b4748
int32_t keyRotateXm = 0;

// GLOBAL: COPTER_D 0x005b474c
int32_t keyRotateYp = 0;

// GLOBAL: COPTER_D 0x005b4750
int32_t keyRotateYm = 0;

// GLOBAL: COPTER_D 0x005b4754
int32_t keyRotateZp = 0;

// GLOBAL: COPTER_D 0x005b4758
int32_t keyRotateZm = 0;

// GLOBAL: COPTER_D 0x005b475c
int32_t LoopTimer = 0;

// GLOBAL: COPTER_D 0x005b4760
int32_t LoopTime = 0;

// GLOBAL: COPTER_D 0x005b4764
int32_t AlwaysTimer = 0;

// GLOBAL: COPTER_D 0x005b4768
int32_t G_AvLoopTime = 0;

// GLOBAL: COPTER_D 0x005b476c
/*packed*/ struct VRResource *G_restex = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b4770
/*packed*/ struct VRResource *G_respal = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b4774
/*packed*/ struct VRResource *G_resgeo1 = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b4778
/*packed*/ struct VRResource *G_resgeo2 = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b477c
/*packed*/ struct VRResource *G_resgeo3 = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b4780
/*packed*/ struct VRMemPool *G_main_mp = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b4784
char * buffer = { 0 /* todo */ };

// GLOBAL: COPTER_D 0x005b4788
long G_framectr = 0;

// GLOBAL: COPTER_D 0x005b478c
long G_maptics = 0;

// GLOBAL: COPTER_D 0x005b4790
long G_InitializationProgress = 0;

// GLOBAL: COPTER_D 0x005b4794
long G_VRAppInitCalled = 0;



// Unknown globals:
// The PDB was slightly corrupted and we aren't sure which file these globals belong to.

// WARNING: this global might actually belong to: C:\Copter\source\sparkal\gameapp1.cpp
// GLOBAL: COPTER_D 0x0063a858
int32_t MainPoolIndex; // Contrib missing


// WARNING: this global might actually belong to: C:\Copter\source\sparkal\gameapp1.cpp
// GLOBAL: COPTER_D 0x0063a854
int32_t ScratchPoolIndex; // Contrib missing

// GLOBAL: COPTER_D 0x006bf1d0
/*packed*/ struct _HELI_DATA G_helidata[10]; // Contrib missing

