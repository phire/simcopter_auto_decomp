// Module: S3explod.obj
// Source: C:\Copter\source\game\S3explod.c
// autogenerated by simcopter_tool from PDB file

// Type: struct _EXPLODE_DATA (forward reference);

// Type: long;

// Type: struct _SMOKE_DATA (forward reference);

// Type: void;

// Type: char *;

// Type: struct Point3d;
struct Point3d{
	int32_t x;
	int32_t y;
	int32_t z;
};

// Type: int32_t[4][4];

// Type: struct _CELL_INFO (forward reference);

// Type: int32_t;

// Type: struct VRFaceInfo;
struct VRFaceInfo{
	int32_t Face;
	int32_t Verts;
	int32_t Attribute;
	int32_t Plotter;
	struct VRBmpHdr* Bitmap;
	int32_t * VertList;
	struct MapVert* MapVList;
	struct MapVert* BarryPtr;
};

// Type: struct Point3d (forward reference);

// Type: struct VRview;
struct VRview{
	struct Point3d loc;
	struct Point3d scale;
	int32_t matrix[4][4];
};

// Type: struct _DYOBJ_INST (forward reference);

// Type: struct Point2d;
struct Point2d{
	int32_t x;
	int32_t y;
};



// Contribution: 1:00122910-001235ed Module: 166, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x00523910
void S3ExplosionReset() {
	struct _EXPLODE_DATA* ed;
	long i;
	struct _SMOKE_DATA* sd;

// LINE 59:
	__asm        mov    dword ptr ds:[0x5B7380], 0;
// LINE 60:
	__asm        mov    dword ptr ds:[0x5B7384], 0;
// LINE 63:
	__asm        mov    i, 0;
	__asm        mov    ed, 0x62A578;
	__asm        jmp    _T37;

_T30:
	__asm        inc    i;
	__asm        add    ed, 0x34;
_T37:
	__asm        cmp    i, 0x14;
	__asm        jge    _T4f;
// LINE 66:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax], 0;
// LINE 67:
	__asm        jmp    _T30;
// LINE 70:
_T4f:
	__asm        mov    i, 0;
	__asm        mov    sd, 0x62AA58;
	__asm        jmp    _T69;

_T62:
	__asm        inc    i;
	__asm        add    sd, 0x1C;
_T69:
	__asm        cmp    i, 0x64;
	__asm        jge    _T81;
// LINE 73:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax], 0;
// LINE 75:
	__asm        jmp    _T62;
// LINE 77:
}

// FUNCTION: COPTER_D 0x00523996
void S3ExplosionInit() {
	struct _EXPLODE_DATA* ed;
	char * mem;
	long i;
	struct _SMOKE_DATA* sd;
	struct Point3d vec;
	long size;
	int32_t mat[4][4];

// LINE 96:
	__asm        push   0x7F;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        push   eax;
	__asm        call   VRGetObjDupMemReq;
	__asm        add    esp, 4;
	__asm        mov    size, eax;
// LINE 103:
	__asm        mov    i, 0;
	__asm        mov    ed, 0x62A578;
	__asm        jmp    _T39;

_T32:
	__asm        inc    i;
	__asm        add    ed, 0x34;
_T39:
	__asm        cmp    i, 0x14;
	__asm        jge    _T14a;
// LINE 106:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax], 0;
// LINE 107:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+4], 0;
// LINE 108:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+8], 0;
// LINE 109:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+0xC], 0;
// LINE 110:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+0x10], 0;
// LINE 111:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+0x14], 0;
// LINE 112:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+0x18], 0;
// LINE 115:
	__asm        push   0x7F;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        push   eax;
	__asm        call   VRGetObjDupMemReq;
	__asm        add    esp, 4;
	__asm        mov    size, eax;
// LINE 117:
	__asm        push   0x64;
	__asm        mov    eax, ds:[0x5B5E78];
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x20], eax;
// LINE 118:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    word ptr [eax+0xC], 0x61;
// LINE 120:
	__asm        mov    eax, size;
	__asm        push   eax;
	__asm        mov    eax, ds:[0x5B5E78];
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    mem, eax;
// LINE 121:
	__asm        mov    eax, mem;
	__asm        push   eax;
	__asm        push   0x7F;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        push   eax;
	__asm        call   VRCreateObjDuplicate;
	__asm        add    esp, 8;
	__asm        mov    ecx, ed;
	__asm        mov    ecx, [ecx+0x20];
	__asm        mov    [ecx+8], eax;
// LINE 122:
	__asm        mov    eax, ds:[0x5B4780];
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D84DB;
	__asm        add    esp, 8;
// LINE 125:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D85CD;
	__asm        add    esp, 4;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x1C], eax;
// LINE 126:
	__asm        push   2;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D6970;
	__asm        add    esp, 8;
// LINE 129:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    dword ptr [eax], 0;
// LINE 130:
	__asm        jmp    _T32;
// LINE 133:
_T14a:
	__asm        push   0x148;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        push   eax;
	__asm        call   VRGetObjDupMemReq;
	__asm        add    esp, 4;
	__asm        mov    size, eax;
// LINE 140:
	__asm        mov    i, 0;
	__asm        mov    sd, 0x62AA58;
	__asm        jmp    _T17d;

_T176:
	__asm        inc    i;
	__asm        add    sd, 0x1C;
_T17d:
	__asm        cmp    i, 0x64;
	__asm        jge    _T236;
// LINE 143:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax], 0;
// LINE 144:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+8], 0;
// LINE 147:
	__asm        push   0x64;
	__asm        mov    eax, ds:[0x5B5E78];
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    ecx, sd;
	__asm        mov    [ecx+4], eax;
// LINE 148:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    word ptr [eax+0xC], 0x61;
// LINE 149:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    dword ptr [eax+0x10], 0x200000;
// LINE 152:
	__asm        mov    eax, size;
	__asm        push   eax;
	__asm        mov    eax, ds:[0x5B5E78];
	__asm        push   eax;
	__asm        call   S2Alloc;
	__asm        add    esp, 8;
	__asm        mov    mem, eax;
// LINE 153:
	__asm        mov    eax, mem;
	__asm        push   eax;
	__asm        push   0x148;
	__asm        call   0x004D8821;
	__asm        add    esp, 4;
	__asm        push   eax;
	__asm        call   VRCreateObjDuplicate;
	__asm        add    esp, 8;
	__asm        mov    ecx, sd;
	__asm        mov    ecx, [ecx+4];
	__asm        mov    [ecx+8], eax;
// LINE 156:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D85CD;
	__asm        add    esp, 4;
	__asm        mov    ecx, sd;
	__asm        mov    [ecx+0x10], eax;
// LINE 157:
	__asm        mov    eax, ds:[0x5B4780];
	__asm        push   eax;
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D84DB;
	__asm        add    esp, 8;
// LINE 159:
	__asm        jmp    _T176;
// LINE 162:
_T236:
	__asm        push   0xF;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA30], eax;
// LINE 163:
	__asm        push   0x10;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA34], eax;
// LINE 164:
	__asm        push   0x11;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA38], eax;
// LINE 165:
	__asm        push   0x12;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA3C], eax;
// LINE 166:
	__asm        push   0x19;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA40], eax;
// LINE 167:
	__asm        push   0x1A;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA44], eax;
// LINE 168:
	__asm        push   0x1B;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA48], eax;
// LINE 169:
	__asm        push   0x1C;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA4C], eax;
// LINE 170:
	__asm        push   0x1D;
	__asm        mov    eax, ds:[0x5B476C];
	__asm        push   eax;
	__asm        call   VRInt2BmpHdr;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x62AA50], eax;
// LINE 173:
	__asm        mov    eax, 0x59B4F8;
	__asm        mov    ecx, 0x62A988;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 174:
	__asm        mov    eax, 0x59B508;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0xC;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 175:
	__asm        mov    eax, 0x59B518;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x18;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 176:
	__asm        mov    eax, 0x59B4F8;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x24;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 177:
	__asm        mov    eax, 0x59B508;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x30;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 178:
	__asm        mov    eax, 0x59B518;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x3C;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 179:
	__asm        mov    eax, ds:[0x59B4F8];
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9AC], eax;
// LINE 180:
	__asm        mov    eax, ds:[0x59B50C];
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9BC], eax;
// LINE 181:
	__asm        mov    eax, ds:[0x59B520];
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9CC], eax;
// LINE 183:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 184:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0x1C20000;
	__asm        call   0x004D2034;
	__asm        add    esp, 8;
// LINE 185:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0x1C20000;
	__asm        call   0x004D2004;
	__asm        add    esp, 8;
// LINE 186:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        lea    eax, vec.x;
	__asm        push   eax;
	__asm        push   0x59B508;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 187:
	__asm        lea    eax, vec.x;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x48;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 188:
	__asm        mov    eax, vec.x;
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9DC], eax;
// LINE 189:
	__asm        mov    eax, vec.y;
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9E0], eax;
// LINE 190:
	__asm        mov    eax, vec.z;
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9E4], eax;
// LINE 192:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 193:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0xFE3E0000;
	__asm        call   0x004D2034;
	__asm        add    esp, 8;
// LINE 194:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0x1C20000;
	__asm        call   0x004D2004;
	__asm        add    esp, 8;
// LINE 195:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        lea    eax, vec.x;
	__asm        push   eax;
	__asm        push   0x59B508;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 196:
	__asm        lea    eax, vec.x;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x60;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 197:
	__asm        mov    eax, vec.x;
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9F4], eax;
// LINE 198:
	__asm        mov    eax, vec.y;
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9F8], eax;
// LINE 199:
	__asm        mov    eax, vec.z;
	__asm        neg    eax;
	__asm        mov    ds:[0x62A9FC], eax;
// LINE 201:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 202:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0x1C20000;
	__asm        call   0x004D2034;
	__asm        add    esp, 8;
// LINE 203:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0xFE3E0000;
	__asm        call   0x004D2004;
	__asm        add    esp, 8;
// LINE 204:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        lea    eax, vec.x;
	__asm        push   eax;
	__asm        push   0x59B508;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 205:
	__asm        lea    eax, vec.x;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x78;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 206:
	__asm        mov    eax, vec.x;
	__asm        neg    eax;
	__asm        mov    ds:[0x62AA0C], eax;
// LINE 207:
	__asm        mov    eax, vec.y;
	__asm        neg    eax;
	__asm        mov    ds:[0x62AA10], eax;
// LINE 208:
	__asm        mov    eax, vec.z;
	__asm        neg    eax;
	__asm        mov    ds:[0x62AA14], eax;
// LINE 210:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 211:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0xFE3E0000;
	__asm        call   0x004D2034;
	__asm        add    esp, 8;
// LINE 212:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        push   0xFE3E0000;
	__asm        call   0x004D2004;
	__asm        add    esp, 8;
// LINE 213:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        lea    eax, vec.x;
	__asm        push   eax;
	__asm        push   0x59B508;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 214:
	__asm        lea    eax, vec.x;
	__asm        mov    ecx, 0x62A988;
	__asm        add    ecx, 0x90;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 215:
	__asm        mov    eax, vec.x;
	__asm        neg    eax;
	__asm        mov    ds:[0x62AA24], eax;
// LINE 216:
	__asm        mov    eax, vec.y;
	__asm        neg    eax;
	__asm        mov    ds:[0x62AA28], eax;
// LINE 217:
	__asm        mov    eax, vec.z;
	__asm        neg    eax;
	__asm        mov    ds:[0x62AA2C], eax;
// LINE 220:
}

// FUNCTION: COPTER_D 0x00523f50
void S3ExplosionStart(struct _CELL_INFO* cptr, int32_t x, int32_t y, int32_t z, long scale, long mission_id) {
	struct _EXPLODE_DATA* ed;
	long i;
	struct VRFaceInfo finfo;
	long dim;

// LINE 240:
	__asm        mov    i, 0;
	__asm        mov    ed, 0x62A578;
	__asm        jmp    _T23;

_T1c:
	__asm        inc    i;
	__asm        add    ed, 0x34;
_T23:
	__asm        cmp    i, 0x14;
	__asm        jge    _T43;
// LINE 242:
	__asm        mov    eax, ed;
	__asm        test   byte ptr [eax], 1;
	__asm        jne    _T3e;
// LINE 243:
	__asm        jmp    _T43;
// LINE 244:
_T3e:
	__asm        jmp    _T1c;
// LINE 248:
_T43:
	__asm        cmp    i, 0x14;
	__asm        jne    _T52;
// LINE 249:
	__asm        jmp    _T187;
// LINE 254:
_T52:
	__asm        cmp    cptr, 0;
	__asm        jne    _T61;
// LINE 255:
	__asm        jmp    _T187;
// LINE 258:
_T61:
	__asm        mov    eax, 4;
	__asm        mov    cl, reinterpret_cast<uint8_t>(scale);
	__asm        shl    eax, cl;
	__asm        mov    dim, eax;
// LINE 261:
	__asm        mov    eax, ed;
	__asm        or     dword ptr [eax], 1;
// LINE 264:
	__asm        lea    eax, finfo.Face;
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        call   0x004D6905;
	__asm        add    esp, 8;
// LINE 265:
	__asm        mov    eax, ds:[0x62AA30];
	__asm        mov    finfo.Bitmap, eax;
// LINE 266:
	__asm        lea    eax, finfo.Face;
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        call   0x004D6941;
	__asm        add    esp, 8;
// LINE 268:
	__asm        mov    eax, ed;
	__asm        mov    dword ptr [eax+0x18], 0xFFFFFFFF;
// LINE 269:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x2C], eax;
// LINE 270:
	__asm        mov    eax, mission_id;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x30], eax;
// LINE 271:
	__asm        mov    eax, scale;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x28], eax;
// LINE 274:
	__asm        mov    eax, dim;
	__asm        push   eax;
	__asm        mov    eax, dim;
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   VRObjResize2dFace;
	__asm        add    esp, 0xC;
// LINE 283:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+2];
	__asm        shl    eax, 0x10;
	__asm        add    eax, x;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0xC], eax;
// LINE 284:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+4];
	__asm        shl    eax, 0x10;
	__asm        add    eax, y;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x10], eax;
// LINE 285:
	__asm        mov    eax, cptr;
	__asm        movsx  eax, word ptr [eax+6];
	__asm        shl    eax, 0x10;
	__asm        add    eax, z;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx+0x14], eax;
// LINE 288:
	__asm        mov    eax, ed;
	__asm        add    eax, 0xC;
	__asm        mov    ecx, ed;
	__asm        mov    ecx, [ecx+0x20];
	__asm        add    ecx, 0x18;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 290:
	__asm        mov    eax, dim;
	__asm        shl    eax, 0x10;
	__asm        mov    ecx, ed;
	__asm        mov    ecx, [ecx+0x20];
	__asm        mov    [ecx+0x10], eax;
// LINE 294:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        sub    dword ptr [eax+0x1C], 0x200000;
// LINE 297:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        add    eax, 0x24;
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 300:
	__asm        mov    eax, cptr;
	__asm        mov    eax, [eax+0x10];
	__asm        mov    ecx, ed;
	__asm        mov    ecx, [ecx+0x20];
	__asm        mov    [ecx], eax;
// LINE 301:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+0x10], eax;
// LINE 303:
	__asm        inc    dword ptr ds:[0x5B7380];
// LINE 304:
}

// FUNCTION: COPTER_D 0x005240dc
void S3ExplosionSmokeStart(struct _CELL_INFO* cptr, struct Point3d* loc, long smoke_size) {
	long i;
	struct VRFaceInfo finfo;
	struct _SMOKE_DATA* sd;

// LINE 319:
	__asm        mov    i, 0;
	__asm        mov    sd, 0x62AA58;
	__asm        jmp    _T23;

_T1c:
	__asm        inc    i;
	__asm        add    sd, 0x1C;
_T23:
	__asm        cmp    i, 0x64;
	__asm        jge    _T43;
// LINE 321:
	__asm        mov    eax, sd;
	__asm        test   byte ptr [eax], 1;
	__asm        jne    _T3e;
// LINE 322:
	__asm        jmp    _T43;
// LINE 323:
_T3e:
	__asm        jmp    _T1c;
// LINE 327:
_T43:
	__asm        cmp    i, 0x64;
	__asm        jne    _T52;
// LINE 328:
	__asm        jmp    _T1bc;
// LINE 333:
_T52:
	__asm        cmp    cptr, 0;
	__asm        jne    _T61;
// LINE 334:
	__asm        jmp    _T1bc;
// LINE 337:
_T61:
	__asm        lea    eax, finfo.Face;
	__asm        push   eax;
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+0x10];
	__asm        push   eax;
	__asm        call   0x004D6905;
	__asm        add    esp, 8;
// LINE 338:
	__asm        mov    eax, smoke_size;
	__asm        mov    finfo.Bitmap, eax;
// LINE 339:
	__asm        lea    eax, finfo.Face;
	__asm        push   eax;
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+0x10];
	__asm        push   eax;
	__asm        call   0x004D6941;
	__asm        add    esp, 8;
// LINE 342:
	__asm        mov    eax, sd;
	__asm        or     dword ptr [eax], 1;
// LINE 343:
	__asm        mov    eax, cptr;
	__asm        mov    ecx, sd;
	__asm        mov    [ecx+0xC], eax;
// LINE 344:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+8], 0x20000;
// LINE 347:
	__asm        mov    eax, loc;
	__asm        mov    ecx, sd;
	__asm        mov    ecx, [ecx+4];
	__asm        add    ecx, 0x18;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 349:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        add    eax, 0x24;
	__asm        push   eax;
	__asm        call   0x004D1FF1;
	__asm        add    esp, 4;
// LINE 352:
	__asm        mov    eax, cptr;
	__asm        mov    eax, [eax+0x10];
	__asm        mov    ecx, sd;
	__asm        mov    ecx, [ecx+4];
	__asm        mov    [ecx], eax;
// LINE 353:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, cptr;
	__asm        mov    [ecx+0x10], eax;
// LINE 356:
	__asm        mov    eax, smoke_size;
	__asm        mov    [ebp-0x2C], eax;
	__asm        jmp    _T176;
// LINE 359:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0xD0000;
// LINE 360:
	__asm        jmp    _T1b6;
// LINE 362:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0xA0000;
// LINE 363:
	__asm        jmp    _T1b6;
// LINE 365:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0x190000;
// LINE 366:
	__asm        jmp    _T1b6;
// LINE 368:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0x1E0000;
// LINE 369:
	__asm        jmp    _T1b6;
// LINE 371:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0x110000;
// LINE 372:
	__asm        jmp    _T1b6;
// LINE 374:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0x190000;
// LINE 375:
	__asm        jmp    _T1b6;
// LINE 377:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0x140000;
// LINE 378:
	__asm        jmp    _T1b6;
// LINE 384:
_T162:
	__asm        mov    eax, sd;
	__asm        mov    dword ptr [eax+0x14], 0xF0000;
// LINE 385:
	__asm        jmp    _T1b6;
// LINE 386:
	__asm        jmp    _T1b6;

_T176:
	__asm        cmp    dword ptr [ebp-0x2C], 0xA;
	__asm        ja     _T162;

	__asm        mov    eax, [ebp-0x2C];
	__asm        jmp    dword ptr [eax*4+0x524266];
// Switch pointers
// LINE 388:
_T1b6:
	__asm        inc    dword ptr ds:[0x5B7384];
// LINE 389:
}

// FUNCTION: COPTER_D 0x0052429d
void S3ExplosionDriver() {
	struct _EXPLODE_DATA* ed;
	struct VRview pos;
	struct _DYOBJ_INST** dyptrptr;
	long j;
	long i;
	struct Point2d celloc;
	struct VRFaceInfo finfo;
	struct _SMOKE_DATA* sd;

// LINE 410:
	__asm        mov    i, 0;
	__asm        mov    ed, 0x62A578;
	__asm        jmp    _T2c;

_T22:
	__asm        inc    i;
	__asm        add    ed, 0x34;
_T2c:
	__asm        cmp    dword ptr ds:[0x5B7380], 0;
	__asm        jle    _T218;

	__asm        cmp    i, 0x14;
	__asm        jge    _T218;
// LINE 412:
	__asm        mov    eax, ed;
	__asm        test   byte ptr [eax], 1;
	__asm        jne    _T57;
// LINE 413:
	__asm        jmp    _T22;
// LINE 416:
_T57:
	__asm        mov    eax, ed;
	__asm        inc    dword ptr [eax+0x18];
// LINE 420:
	__asm        mov    eax, ed;
	__asm        cmp    dword ptr [eax+0x18], 1;
	__asm        jne    _Tff;
// LINE 422:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0xC];
	__asm        add    eax, 0x20000000;
	__asm        sar    eax, 0x16;
	__asm        mov    celloc.x, eax;
// LINE 423:
	__asm        mov    eax, 0x20000000;
	__asm        mov    ecx, ed;
	__asm        sub    eax, [ecx+0x14];
	__asm        sar    eax, 0x16;
	__asm        mov    celloc.y, eax;
// LINE 424:
	__asm        mov    j, 0;
	__asm        jmp    _Ta7;

_Ta4:
	__asm        inc    j;
_Ta7:
	__asm        cmp    j, 0xE;
	__asm        jge    _Tff;
// LINE 435:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x30];
	__asm        push   eax;
	__asm        push   0x140000;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x28];
	__asm        push   eax;
	__asm        mov    eax, j;
	__asm        lea    eax, [eax+eax*2];
	__asm        lea    eax, [eax*4+0x62A988];
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        add    eax, 0xC;
	__asm        push   eax;
	__asm        lea    eax, celloc.x;
	__asm        push   eax;
	__asm        push   9;
	__asm        call   S3MissileStart;
	__asm        add    esp, 0x20;
// LINE 436:
	__asm        jmp    _Ta4;
// LINE 440:
_Tff:
	__asm        mov    eax, ed;
	__asm        cmp    dword ptr [eax+0x18], 9;
	__asm        jl     _T17e;
// LINE 443:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x2C];
	__asm        add    eax, 0x10;
	__asm        mov    dyptrptr, eax;
// LINE 444:
_T11e:
	__asm        mov    eax, dyptrptr;
	__asm        cmp    dword ptr [eax], 0;
	__asm        je     _T160;
// LINE 446:
	__asm        mov    eax, ed;
	__asm        mov    ecx, dyptrptr;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax+0x20], ecx;
	__asm        jne    _T153;
// LINE 448:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    eax, [eax];
	__asm        mov    ecx, dyptrptr;
	__asm        mov    [ecx], eax;
// LINE 449:
	__asm        jmp    _T160;
// LINE 451:
_T153:
	__asm        mov    eax, dyptrptr;
	__asm        mov    eax, [eax];
	__asm        mov    dyptrptr, eax;
// LINE 452:
	__asm        jmp    _T11e;
// LINE 454:
_T160:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax];
	__asm        and    eax, 0xFFFFFFFE;
	__asm        mov    ecx, ed;
	__asm        mov    [ecx], eax;
// LINE 455:
	__asm        dec    dword ptr ds:[0x5B7380];
// LINE 456:
	__asm        jmp    _T22;
// LINE 460:
_T17e:
	__asm        lea    eax, finfo.Face;
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        call   0x004D6905;
	__asm        add    esp, 8;
// LINE 461:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x18];
	__asm        mov    eax, [eax*4+0x62AA30];
	__asm        mov    finfo.Bitmap, eax;
// LINE 462:
	__asm        lea    eax, finfo.Face;
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x1C];
	__asm        push   eax;
	__asm        call   0x004D6941;
	__asm        add    esp, 8;
// LINE 465:
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        add    eax, 0x18;
	__asm        lea    ecx, pos.loc.x;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 466:
	__asm        mov    eax, ed;
	__asm        mov    esi, [eax+0x20];
	__asm        lea    edi, pos.matrix[0][0];
	__asm        add    esi, 0x24;
	__asm        mov    ecx, 0x10;
	__asm        rep movsd;
// LINE 467:
	__asm        push   3;
	__asm        lea    eax, pos.loc.x;
	__asm        push   eax;
	__asm        mov    eax, ed;
	__asm        mov    eax, [eax+0x20];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D8781;
	__asm        add    esp, 0xC;
// LINE 469:
	__asm        jmp    _T22;
// LINE 472:
_T218:
	__asm        mov    i, 0;
	__asm        mov    sd, 0x62AA58;
	__asm        jmp    _T232;

_T22b:
	__asm        inc    i;
	__asm        add    sd, 0x1C;
_T232:
	__asm        cmp    dword ptr ds:[0x5B7384], 0;
	__asm        jle    _T347;

	__asm        cmp    i, 0x64;
	__asm        jge    _T347;
// LINE 474:
	__asm        mov    eax, sd;
	__asm        test   byte ptr [eax], 1;
	__asm        jne    _T25a;
// LINE 475:
	__asm        jmp    _T22b;
// LINE 478:
_T25a:
	__asm        xor    eax, eax;
	__asm        sub    eax, ds:[0x5B4768];
	__asm        neg    eax;
	__asm        mov    ecx, sd;
	__asm        sub    [ecx+8], eax;
// LINE 481:
	__asm        mov    eax, sd;
	__asm        cmp    dword ptr [eax+8], 0;
	__asm        jg     _T2d7;
// LINE 484:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+0xC];
	__asm        add    eax, 0x10;
	__asm        mov    dyptrptr, eax;
// LINE 485:
_T283:
	__asm        mov    eax, dyptrptr;
	__asm        cmp    dword ptr [eax], 0;
	__asm        je     _T2bf;
// LINE 487:
	__asm        mov    eax, sd;
	__asm        mov    ecx, dyptrptr;
	__asm        mov    ecx, [ecx];
	__asm        cmp    [eax+4], ecx;
	__asm        jne    _T2b2;
// LINE 489:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    eax, [eax];
	__asm        mov    ecx, dyptrptr;
	__asm        mov    [ecx], eax;
// LINE 490:
	__asm        jmp    _T2bf;
// LINE 492:
_T2b2:
	__asm        mov    eax, dyptrptr;
	__asm        mov    eax, [eax];
	__asm        mov    dyptrptr, eax;
// LINE 493:
	__asm        jmp    _T283;
// LINE 495:
_T2bf:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax];
	__asm        and    eax, 0xFFFFFFFE;
	__asm        mov    ecx, sd;
	__asm        mov    [ecx], eax;
// LINE 496:
	__asm        dec    dword ptr ds:[0x5B7384];
// LINE 497:
	__asm        jmp    _T22b;
// LINE 501:
_T2d7:
	__asm        mov    eax, ds:[0x5B4768];
	__asm        push   eax;
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+0x14];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, sd;
	__asm        mov    ecx, [ecx+4];
	__asm        add    [ecx+0x1C], eax;
// LINE 504:
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        add    eax, 0x18;
	__asm        lea    ecx, pos.loc.x;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 505:
	__asm        mov    eax, sd;
	__asm        mov    esi, [eax+4];
	__asm        lea    edi, pos.matrix[0][0];
	__asm        add    esi, 0x24;
	__asm        mov    ecx, 0x10;
	__asm        rep movsd;
// LINE 506:
	__asm        push   3;
	__asm        lea    eax, pos.loc.x;
	__asm        push   eax;
	__asm        mov    eax, sd;
	__asm        mov    eax, [eax+4];
	__asm        mov    eax, [eax+8];
	__asm        push   eax;
	__asm        call   0x004D8781;
	__asm        add    esp, 0xC;
// LINE 508:
	__asm        jmp    _T22b;
// LINE 510:
_T347:
	__asm        jmp    near ptr 0x005245E9;
// LINE 511:
}



// Contribution: 3:00020380-00020387 Module: 166, 4 byte alignment, initialized_data, read, write, 
// LOCAL: COPTER_D 0x005b7380
// S_num_expls
// LOCAL: COPTER_D 0x005b7384
// S_num_smoke


// Contribution: 3:00093578-00094547 Module: 166, 8 byte alignment, uninitialized_data, read, write, 
// LOCAL: COPTER_D 0x0062a578
// S_explosions
// LOCAL: COPTER_D 0x0062a988
// S_spark_vectors
// LOCAL: COPTER_D 0x0062aa30
// S_explseq
// LOCAL: COPTER_D 0x0062aa58
// S_smoke
