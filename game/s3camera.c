// Module: S3camera.obj
// Source: C:\Copter\source\game\S3camera.c
// autogenerated by simcopter_tool from PDB file



// Contribution: 1:000f7af0-000f8bb0 Module: 175, 16 byte alignment, code, execute, read, 
// FUNCTION: COPTER_D 0x004f8af0
void S3CameraMove(struct Point3d* P) {
	struct Point3d CameraDelta;
	struct _DYOBJ_INST* u_dyobj;
	int32_t alt;
	int32_t altdiff;
	int32_t Velocity;
	struct Point3d CameraVector;
	struct Point3d viewerPos;
	int32_t[4][4] mat;

// LINE 100:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x74;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 101:
	__asm        mov    Velocity, 0;
// LINE 124:
	__asm        cmp    dword ptr ds:[0x5B4DB8], 0;
	__asm        je     near ptr 0x004F8D2D;
// LINE 126:
	__asm        cmp    dword ptr ds:[0x5B4DB8], 3;
	__asm        jne    near ptr 0x004F8BEE;
// LINE 129:
	__asm        call   0x00546500;
	__asm        mov    u_dyobj, eax;
// LINE 130:
	__asm        mov    eax, u_dyobj;
	__asm        add    eax, 0x24;
	__asm        push   eax;
	__asm        lea    eax, viewerPos.x;
	__asm        push   eax;
	__asm        push   0x5B4DE0;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 131:
	__asm        mov    eax, u_dyobj;
	__asm        mov    eax, [eax+0x18];
	__asm        add    eax, viewerPos.x;
	__asm        mov    ds:[0x6C1318], eax;
// LINE 132:
	__asm        mov    eax, u_dyobj;
	__asm        mov    eax, [eax+0x1C];
	__asm        add    eax, viewerPos.y;
	__asm        mov    ds:[0x6C131C], eax;
// LINE 133:
	__asm        mov    eax, u_dyobj;
	__asm        mov    eax, [eax+0x20];
	__asm        add    eax, viewerPos.z;
	__asm        mov    ds:[0x6C1320], eax;
// LINE 136:
	__asm        mov    eax, 0x6C12A0;
	__asm        add    eax, 0x78;
	__asm        push   eax;
	__asm        call   0x004F9AA5;
	__asm        add    esp, 4;
	__asm        mov    alt, eax;
// LINE 137:
	__asm        cmp    alt, 0x500000;
	__asm        jle    near ptr 0x004F8B8C;
// LINE 138:
	__asm        mov    alt, 0x500000;
// LINE 140:
	__asm        push   0;
	__asm        mov    eax, ds:[0x6C1320];
	__asm        push   eax;
	__asm        mov    eax, ds:[0x6C1318];
	__asm        push   eax;
	__asm        call   0x00518A8C;
	__asm        add    esp, 0xC;
	__asm        add    eax, 0xA0000;
	__asm        add    alt, eax;
// LINE 141:
	__asm        mov    eax, alt;
	__asm        sub    eax, ds:[0x6C131C];
	__asm        mov    altdiff, eax;
// LINE 142:
	__asm        cmp    altdiff, 0;
	__asm        jge    near ptr 0x004F8BC7;
	__asm        mov    altdiff, 0;
// LINE 144:
	__asm        mov    eax, ds:[0x5B4E00];
	__asm        mov    ecx, eax;
	__asm        shl    eax, 3;
	__asm        sub    eax, ecx;
	__asm        add    eax, altdiff;
	__asm        sar    eax, 3;
	__asm        mov    ds:[0x5B4E00], eax;
// LINE 145:
	__asm        mov    eax, ds:[0x5B4E00];
	__asm        add    ds:[0x6C131C], eax;
// LINE 148:
	__asm        jmp    near ptr 0x004F8D28;
	__asm        cmp    dword ptr ds:[0x5B4DB8], 1;
	__asm        jne    near ptr 0x004F8C62;
// LINE 151:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        add    eax, 0x24;
	__asm        push   eax;
	__asm        lea    eax, viewerPos.x;
	__asm        push   eax;
	__asm        push   0x5B4DD0;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 152:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x18];
	__asm        add    eax, viewerPos.x;
	__asm        mov    ds:[0x6C1318], eax;
// LINE 153:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x1C];
	__asm        add    eax, viewerPos.y;
	__asm        mov    ds:[0x6C131C], eax;
// LINE 154:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x20];
	__asm        add    eax, viewerPos.z;
	__asm        mov    ds:[0x6C1320], eax;
// LINE 156:
	__asm        jmp    near ptr 0x004F8D28;
	__asm        cmp    dword ptr ds:[0x5B4DB8], 2;
	__asm        jne    near ptr 0x004F8CE2;
// LINE 158:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        add    eax, 0x100;
	__asm        push   eax;
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        call   0x004CAEFB;
	__asm        add    esp, 8;
// LINE 161:
	__asm        lea    eax, mat[0][0];
	__asm        push   eax;
	__asm        lea    eax, viewerPos.x;
	__asm        push   eax;
	__asm        push   0x5B4DC0;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 162:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x18];
	__asm        add    eax, viewerPos.x;
	__asm        mov    ds:[0x6C1318], eax;
// LINE 163:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x1C];
	__asm        add    eax, viewerPos.y;
	__asm        mov    ds:[0x6C131C], eax;
// LINE 164:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x20];
	__asm        add    eax, viewerPos.z;
	__asm        mov    ds:[0x6C1320], eax;
// LINE 166:
	__asm        jmp    near ptr 0x004F8D28;
// LINE 169:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x18];
	__asm        mov    ds:[0x6C1318], eax;
// LINE 170:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x20];
	__asm        mov    ds:[0x6C1320], eax;
// LINE 172:
	__asm        push   0;
	__asm        mov    eax, ds:[0x6C1320];
	__asm        push   eax;
	__asm        mov    eax, ds:[0x6C1318];
	__asm        push   eax;
	__asm        call   0x00518A8C;
	__asm        add    esp, 0xC;
	__asm        add    eax, 0x3200000;
	__asm        mov    ds:[0x6C131C], eax;
// LINE 174:
	__asm        jmp    near ptr 0x004F8F64;
// LINE 177:
	__asm        mov    eax, ds:[0x6C126C];
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        mov    ecx, [ecx+0xA4];
	__asm        sub    eax, [ecx+0x18];
	__asm        mov    viewerPos.x, eax;
// LINE 178:
	__asm        mov    eax, ds:[0x6C1270];
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        mov    ecx, [ecx+0xA4];
	__asm        sub    eax, [ecx+0x1C];
	__asm        mov    viewerPos.y, eax;
// LINE 179:
	__asm        mov    eax, ds:[0x6C1274];
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        mov    ecx, [ecx+0xA4];
	__asm        sub    eax, [ecx+0x20];
	__asm        mov    viewerPos.z, eax;
// LINE 181:
	__asm        cmp    viewerPos.x, 0x20000000;
	__asm        jle    near ptr 0x004F8D86;
// LINE 182:
	__asm        sub    viewerPos.x, 0x40000000;
// LINE 183:
	__asm        cmp    viewerPos.x, 0xE0000000;
	__asm        jge    near ptr 0x004F8D9A;
// LINE 184:
	__asm        add    viewerPos.x, 0x40000000;
// LINE 186:
	__asm        cmp    viewerPos.z, 0x20000000;
	__asm        jle    near ptr 0x004F8DAE;
// LINE 187:
	__asm        sub    viewerPos.z, 0x40000000;
// LINE 188:
	__asm        cmp    viewerPos.z, 0xE0000000;
	__asm        jge    near ptr 0x004F8DC2;
// LINE 189:
	__asm        add    viewerPos.z, 0x40000000;
// LINE 191:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x18];
	__asm        add    viewerPos.x, eax;
// LINE 192:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x1C];
	__asm        add    viewerPos.y, eax;
// LINE 193:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x20];
	__asm        add    viewerPos.z, eax;
// LINE 195:
	__asm        mov    eax, P;
	__asm        mov    eax, [eax];
	__asm        sub    eax, viewerPos.x;
	__asm        mov    CameraVector.x, eax;
// LINE 196:
	__asm        mov    eax, P;
	__asm        mov    eax, [eax+4];
	__asm        sub    eax, viewerPos.y;
	__asm        mov    CameraVector.y, eax;
// LINE 197:
	__asm        mov    eax, P;
	__asm        mov    eax, [eax+8];
	__asm        sub    eax, viewerPos.z;
	__asm        mov    CameraVector.z, eax;
// LINE 218:
	__asm        mov    eax, P;
	__asm        mov    ecx, 0x6C12A0;
	__asm        add    ecx, 0x78;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 219:
	__asm        lea    eax, CameraVector.x;
	__asm        lea    ecx, CameraDelta.x;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 237:
	__asm        mov    eax, CameraVector.y;
	__asm        add    eax, viewerPos.y;
	__asm        mov    ds:[0x6C131C], eax;
// LINE 240:
	__asm        mov    CameraVector.y, 0;
// LINE 243:
	__asm        lea    eax, CameraVector.x;
	__asm        push   eax;
	__asm        call   0x004CA1E3;
	__asm        add    esp, 4;
	__asm        mov    Velocity, eax;
// LINE 244:
	__asm        lea    eax, CameraVector.x;
	__asm        push   eax;
	__asm        call   0x004F4AD4;
	__asm        add    esp, 4;
// LINE 246:
	__asm        cmp    Velocity, 0x50000;
	__asm        jle    near ptr 0x004F8EA4;
// LINE 248:
	__asm        xor    eax, eax;
	__asm        mov    ax, ds:[0x5B4DEC];
	__asm        test   eax, eax;
	__asm        je     near ptr 0x004F8E98;
// LINE 250:
	__asm        jmp    near ptr 0x004F8EA4;
// LINE 251:
	__asm        mov    eax, Velocity;
	__asm        cdq;
	__asm        sub    eax, edx;
	__asm        sar    eax, 1;
	__asm        mov    Velocity, eax;
// LINE 254:
	__asm        mov    eax, Velocity;
	__asm        and    eax, 0xFFFFFA00;
	__asm        mov    Velocity, eax;
// LINE 255:
	__asm        mov    eax, Velocity;
	__asm        mov    ds:[0x6C12B4], eax;
// LINE 257:
	__asm        mov    eax, Velocity;
	__asm        push   eax;
	__asm        mov    eax, CameraVector.x;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    CameraDelta.x, eax;
// LINE 258:
	__asm        mov    eax, Velocity;
	__asm        push   eax;
	__asm        mov    eax, CameraVector.z;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    CameraDelta.z, eax;
// LINE 260:
	__asm        mov    eax, viewerPos.x;
	__asm        add    eax, CameraDelta.x;
	__asm        mov    ds:[0x6C1318], eax;
// LINE 261:
	__asm        mov    eax, CameraDelta.z;
	__asm        add    eax, viewerPos.z;
	__asm        mov    ds:[0x6C1320], eax;
// LINE 264:
	__asm        mov    eax, 0x6C12A0;
	__asm        add    eax, 0x78;
	__asm        push   eax;
	__asm        call   0x004F9AA5;
	__asm        add    esp, 4;
	__asm        mov    alt, eax;
// LINE 270:
	__asm        push   0;
	__asm        mov    eax, ds:[0x6C1320];
	__asm        push   eax;
	__asm        mov    eax, ds:[0x6C1318];
	__asm        push   eax;
	__asm        call   0x00518A8C;
	__asm        add    esp, 0xC;
	__asm        add    eax, 0xA0000;
	__asm        add    alt, eax;
// LINE 271:
	__asm        mov    eax, alt;
	__asm        sub    eax, ds:[0x6C131C];
	__asm        mov    altdiff, eax;
// LINE 272:
	__asm        cmp    altdiff, 0;
	__asm        jge    near ptr 0x004F8F42;
	__asm        mov    altdiff, 0;
// LINE 274:
	__asm        mov    eax, ds:[0x5B4E00];
	__asm        mov    ecx, eax;
	__asm        shl    eax, 3;
	__asm        sub    eax, ecx;
	__asm        add    eax, altdiff;
	__asm        sar    eax, 3;
	__asm        mov    ds:[0x5B4E00], eax;
// LINE 275:
	__asm        mov    eax, ds:[0x5B4E00];
	__asm        add    ds:[0x6C131C], eax;
// LINE 276:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f8f69
void NormalizeGridPoint(struct Point3d* P) {
// LINE 283:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 284:
	__asm        mov    eax, P;
	__asm        cmp    dword ptr [eax], 0xD0000000;
	__asm        jg     near ptr 0x004F8F8C;
// LINE 285:
	__asm        mov    eax, P;
	__asm        add    dword ptr [eax], 0x40000000;
// LINE 286:
	__asm        jmp    near ptr 0x004F8FA4;
	__asm        mov    eax, P;
	__asm        cmp    dword ptr [eax], 0x10000000;
	__asm        jl     near ptr 0x004F8FA4;
// LINE 287:
	__asm        mov    eax, P;
	__asm        sub    dword ptr [eax], 0x40000000;
// LINE 289:
	__asm        mov    eax, P;
	__asm        cmp    dword ptr [eax+8], 0xF0000000;
	__asm        jg     near ptr 0x004F8FC3;
// LINE 290:
	__asm        mov    eax, P;
	__asm        add    dword ptr [eax+8], 0x40000000;
// LINE 291:
	__asm        jmp    near ptr 0x004F8FDD;
	__asm        mov    eax, P;
	__asm        cmp    dword ptr [eax+8], 0x30000000;
	__asm        jl     near ptr 0x004F8FDD;
// LINE 292:
	__asm        mov    eax, P;
	__asm        sub    dword ptr [eax+8], 0x40000000;
// LINE 293:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f8fe2
void SetIdealCameraPos() {
	int32_t AccelAdjust;
	long temp;
	int32_t Acceleration;
	int32_t cameraDistance;

// LINE 306:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x10;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 308:
	__asm        mov    AccelAdjust, 0;
// LINE 309:
	__asm        mov    temp, 0;
// LINE 311:
	__asm        mov    word ptr ds:[0x5B4DEC], 0;
// LINE 318:
	__asm        cmp    dword ptr ds:[0x5B4DB8], 3;
	__asm        jne    near ptr 0x004F9025;
// LINE 320:
	__asm        call   0x00546500;
	__asm        add    eax, 0x18;
	__asm        push   eax;
	__asm        call   0x004F8F69;
	__asm        add    esp, 4;
// LINE 321:
	__asm        jmp    near ptr 0x004F923B;
// LINE 325:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        add    eax, 0x18;
	__asm        push   eax;
	__asm        call   0x004F8F69;
	__asm        add    esp, 4;
// LINE 328:
	__asm        cmp    dword ptr ds:[0x5B4DB8], 0;
	__asm        je     near ptr 0x004F904E;
// LINE 329:
	__asm        jmp    near ptr 0x004F923B;
// LINE 332:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    eax, [eax*4+0x6BF160];
	__asm        neg    eax;
	__asm        mov    cameraDistance, eax;
// LINE 334:
	__asm        mov    Acceleration, 0;
// LINE 336:
	__asm        cmp    Acceleration, 0;
	__asm        je     near ptr 0x004F90A0;
// LINE 338:
	__asm        mov    eax, Acceleration;
	__asm        cdq;
	__asm        and    edx, 0x1FF;
	__asm        add    eax, edx;
	__asm        sar    eax, 9;
	__asm        mov    AccelAdjust, eax;
// LINE 339:
	__asm        cmp    Acceleration, 0;
	__asm        jge    near ptr 0x004F90A0;
// LINE 341:
	__asm        mov    eax, AccelAdjust;
	__asm        neg    eax;
	__asm        mov    AccelAdjust, eax;
// LINE 342:
	__asm        mov    word ptr ds:[0x5B4DEC], 1;
// LINE 347:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        cmp    dword ptr [eax+0x1B0], 0;
	__asm        jne    near ptr 0x004F90B9;
// LINE 348:
	__asm        mov    AccelAdjust, 0;
// LINE 350:
	__asm        xor    eax, eax;
	__asm        sub    eax, AccelAdjust;
	__asm        neg    eax;
	__asm        sub    cameraDistance, eax;
// LINE 351:
	__asm        xor    ecx, ecx;
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xDC];
	__asm        cdq;
	__asm        and    edx, 0x1F;
	__asm        add    eax, edx;
	__asm        sar    eax, 5;
	__asm        sub    ecx, eax;
	__asm        neg    ecx;
	__asm        sub    cameraDistance, ecx;
// LINE 354:
	__asm        mov    eax, ds:[0x5B4DF0];
	__asm        neg    eax;
	__asm        cmp    eax, cameraDistance;
	__asm        jge    near ptr 0x004F90FA;
// LINE 355:
	__asm        mov    eax, ds:[0x5B4DF0];
	__asm        neg    eax;
	__asm        mov    cameraDistance, eax;
// LINE 358:
	__asm        mov    eax, cameraDistance;
	__asm        push   eax;
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0x100];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        mov    ecx, [ecx+0xA4];
	__asm        mov    ecx, [ecx+0x18];
	__asm        add    ecx, eax;
	__asm        mov    ds:[0x6BF1A0], ecx;
// LINE 359:
	__asm        mov    eax, cameraDistance;
	__asm        push   eax;
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0x108];
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        mov    ecx, [ecx+0xA4];
	__asm        mov    ecx, [ecx+0x20];
	__asm        add    ecx, eax;
	__asm        mov    ds:[0x6BF1A8], ecx;
// LINE 369:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        cmp    dword ptr [eax+0x1B0], 0;
	__asm        jne    near ptr 0x004F9181;
// LINE 370:
	__asm        mov    eax, 0x11;
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        sub    eax, [ecx+0x1AC];
	__asm        shl    eax, 2;
	__asm        mov    temp, eax;
// LINE 372:
	__asm        cmp    temp, 0;
	__asm        jge    near ptr 0x004F9192;
	__asm        mov    temp, 0;
// LINE 373:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x1C];
	__asm        mov    ecx, temp;
	__asm        shl    ecx, 0x10;
	__asm        add    eax, ecx;
	__asm        mov    ds:[0x6BF1A4], eax;
// LINE 375:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        cmp    dword ptr [eax+0x1B0], 1;
	__asm        jne    near ptr 0x004F91E0;
// LINE 376:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xDC];
	__asm        cdq;
	__asm        and    edx, 3;
	__asm        add    eax, edx;
	__asm        sar    eax, 2;
	__asm        cdq;
	__asm        xor    eax, edx;
	__asm        sub    eax, edx;
	__asm        mov    AccelAdjust, eax;
// LINE 377:
	__asm        jmp    near ptr 0x004F91FC;
// LINE 378:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xDC];
	__asm        cdq;
	__asm        and    edx, 7;
	__asm        add    eax, edx;
	__asm        sar    eax, 3;
	__asm        cdq;
	__asm        xor    eax, edx;
	__asm        sub    eax, edx;
	__asm        mov    AccelAdjust, eax;
// LINE 380:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    ecx, AccelAdjust;
	__asm        cmp    [eax*4+0x6BF164], ecx;
	__asm        jle    near ptr 0x004F922C;
// LINE 381:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    eax, [eax*4+0x6BF164];
	__asm        sub    eax, AccelAdjust;
	__asm        add    ds:[0x6BF1A4], eax;
// LINE 395:
	__asm        mov    eax, ds:[0x6BF1A4];
	__asm        and    eax, 0xFFFFFF00;
	__asm        mov    ds:[0x6BF1A4], eax;
// LINE 398:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9240
void GetIdealCameraPos(struct Point3d* P) {
// LINE 403:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 404:
	__asm        mov    eax, 0x6BF1A0;
	__asm        mov    ecx, P;
	__asm        mov    edx, [eax];
	__asm        mov    [ecx], edx;
	__asm        mov    edx, [eax+4];
	__asm        mov    [ecx+4], edx;
	__asm        mov    eax, [eax+8];
	__asm        mov    [ecx+8], eax;
// LINE 405:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9263
void CalcCameraAngles(struct Point3d* Vector) {
	int32_t sinePitch;
	int32_t cosinePitch;
	int32_t sineYaw;
	int32_t sineRoll;
	int32_t cosineRoll;
	int32_t LengthXYZ;
	struct Point3d WorkVector;
	int32_t cosineYaw;
	int32_t LengthXZ;

// LINE 423:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x2C;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 434:
	__asm        mov    eax, Vector;
	__asm        mov    eax, [eax];
	__asm        mov    WorkVector.x, eax;
// LINE 435:
	__asm        mov    WorkVector.y, 0;
// LINE 436:
	__asm        mov    eax, Vector;
	__asm        mov    eax, [eax+8];
	__asm        mov    WorkVector.z, eax;
// LINE 438:
	__asm        lea    eax, WorkVector.x;
	__asm        push   eax;
	__asm        call   0x004CA0C0;
	__asm        add    esp, 4;
	__asm        mov    LengthXZ, eax;
// LINE 439:
	__asm        cmp    LengthXZ, 0;
	__asm        jne    near ptr 0x004F92C9;
// LINE 441:
	__asm        mov    eax, Vector;
	__asm        cmp    dword ptr [eax+4], 0;
	__asm        jl     near ptr 0x004F92B6;
// LINE 442:
	__asm        mov    sineYaw, 0x10000;
// LINE 443:
	__asm        jmp    near ptr 0x004F92BD;
// LINE 444:
	__asm        mov    sineYaw, 0xFFFF0000;
// LINE 445:
	__asm        mov    cosineYaw, 0;
// LINE 447:
	__asm        jmp    near ptr 0x004F92EF;
// LINE 449:
	__asm        mov    eax, LengthXZ;
	__asm        push   eax;
	__asm        mov    eax, WorkVector.z;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    cosineYaw, eax;
// LINE 450:
	__asm        mov    eax, LengthXZ;
	__asm        push   eax;
	__asm        mov    eax, WorkVector.x;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    sineYaw, eax;
// LINE 461:
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D20B1;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x6BF1AC], eax;
// LINE 465:
	__asm        mov    eax, Vector;
	__asm        mov    eax, [eax+4];
	__asm        mov    WorkVector.y, eax;
// LINE 466:
	__asm        lea    eax, WorkVector.x;
	__asm        push   eax;
	__asm        call   0x004CA0C0;
	__asm        add    esp, 4;
	__asm        mov    LengthXYZ, eax;
// LINE 468:
	__asm        cmp    LengthXYZ, 0;
	__asm        jne    near ptr 0x004F9351;
// LINE 470:
	__asm        mov    eax, Vector;
	__asm        cmp    dword ptr [eax], 0;
	__asm        jle    near ptr 0x004F933E;
// LINE 471:
	__asm        mov    sinePitch, 0xFFFF0000;
// LINE 472:
	__asm        jmp    near ptr 0x004F9345;
// LINE 473:
	__asm        mov    sinePitch, 0x10000;
// LINE 474:
	__asm        mov    cosinePitch, 0;
// LINE 476:
	__asm        jmp    near ptr 0x004F9379;
// LINE 478:
	__asm        mov    eax, LengthXYZ;
	__asm        push   eax;
	__asm        mov    eax, WorkVector.y;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        neg    eax;
	__asm        mov    sinePitch, eax;
// LINE 479:
	__asm        mov    eax, LengthXYZ;
	__asm        push   eax;
	__asm        mov    eax, LengthXZ;
	__asm        push   eax;
	__asm        call   0x004D19DF;
	__asm        add    esp, 8;
	__asm        mov    cosinePitch, eax;
// LINE 481:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D20B1;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x6BF1B0], eax;
// LINE 485:
	__asm        mov    cosineRoll, 0x10000;
// LINE 486:
	__asm        mov    sineRoll, 0;
// LINE 490:
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    ds:[0x6C12D8], ebx;
// LINE 491:
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x6C12DC], eax;
// LINE 493:
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        neg    eax;
	__asm        add    ebx, eax;
	__asm        mov    ds:[0x6C12E0], ebx;
// LINE 494:
	__asm        mov    dword ptr ds:[0x6C12E4], 0;
// LINE 497:
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        neg    eax;
	__asm        add    ebx, eax;
	__asm        mov    ds:[0x6C12E8], ebx;
// LINE 498:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x6C12EC], eax;
// LINE 500:
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    ds:[0x6C12F0], ebx;
// LINE 501:
	__asm        mov    dword ptr ds:[0x6C12F4], 0;
// LINE 503:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x6C12F8], eax;
// LINE 504:
	__asm        mov    eax, sinePitch;
	__asm        neg    eax;
	__asm        mov    ds:[0x6C12FC], eax;
// LINE 505:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ds:[0x6C1300], eax;
// LINE 506:
	__asm        mov    dword ptr ds:[0x6C1304], 0;
// LINE 510:
	__asm        mov    dword ptr ds:[0x6C1310], 0;
	__asm        mov    eax, ds:[0x6C1310];
	__asm        mov    ds:[0x6C130C], eax;
	__asm        mov    eax, ds:[0x6C130C];
	__asm        mov    ds:[0x6C1308], eax;
// LINE 511:
	__asm        mov    dword ptr ds:[0x6C1314], 0x10000;
// LINE 515:
	__asm        cmp    dword ptr ds:[0x5B4DB8], 0;
	__asm        je     near ptr 0x004F953A;
	__asm        cmp    dword ptr ds:[0x5B4DB8], 1;
	__asm        jne    near ptr 0x004F955A;
// LINE 517:
	__asm        mov    eax, 0x6C12A0;
	__asm        add    eax, 0x38;
	__asm        push   eax;
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0x114];
	__asm        sar    eax, 1;
	__asm        push   eax;
	__asm        call   0x004D2034;
	__asm        add    esp, 8;
// LINE 520:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f955f
void S3AngleRotMat(int32_t[4]* matrix, int32_t Yaw, int32_t Pitch, int32_t Roll) {
	int32_t sinePitch;
	int32_t cosinePitch;
	int32_t sineYaw;
	int32_t sineRoll;
	int32_t cosineRoll;
	int32_t cosineYaw;

// LINE 528:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x18;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 533:
	__asm        lea    eax, cosineYaw;
	__asm        push   eax;
	__asm        lea    eax, sineYaw;
	__asm        push   eax;
	__asm        mov    eax, Yaw;
	__asm        push   eax;
	__asm        call   0x004D19FC;
	__asm        add    esp, 0xC;
// LINE 534:
	__asm        lea    eax, cosinePitch;
	__asm        push   eax;
	__asm        lea    eax, sinePitch;
	__asm        push   eax;
	__asm        mov    eax, Pitch;
	__asm        push   eax;
	__asm        call   0x004D19FC;
	__asm        add    esp, 0xC;
// LINE 535:
	__asm        lea    eax, cosineRoll;
	__asm        push   eax;
	__asm        lea    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, Roll;
	__asm        push   eax;
	__asm        call   0x004D19FC;
	__asm        add    esp, 0xC;
// LINE 538:
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, matrix;
	__asm        mov    [eax], ebx;
// LINE 539:
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+4], eax;
// LINE 541:
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        neg    eax;
	__asm        add    ebx, eax;
	__asm        mov    eax, matrix;
	__asm        mov    [eax+8], ebx;
// LINE 542:
	__asm        mov    eax, matrix;
	__asm        mov    dword ptr [eax+0xC], 0;
// LINE 545:
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        neg    eax;
	__asm        add    ebx, eax;
	__asm        mov    eax, matrix;
	__asm        mov    [eax+0x10], ebx;
// LINE 546:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+0x14], eax;
// LINE 548:
	__asm        mov    eax, cosineRoll;
	__asm        push   eax;
	__asm        mov    eax, sinePitch;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ebx, eax;
	__asm        mov    eax, sineRoll;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        add    ebx, eax;
	__asm        mov    eax, matrix;
	__asm        mov    [eax+0x18], ebx;
// LINE 549:
	__asm        mov    eax, matrix;
	__asm        mov    dword ptr [eax+0x1C], 0;
// LINE 551:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, sineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+0x20], eax;
// LINE 552:
	__asm        mov    eax, sinePitch;
	__asm        neg    eax;
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+0x24], eax;
// LINE 553:
	__asm        mov    eax, cosinePitch;
	__asm        push   eax;
	__asm        mov    eax, cosineYaw;
	__asm        push   eax;
	__asm        call   0x004D19BD;
	__asm        add    esp, 8;
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+0x28], eax;
// LINE 554:
	__asm        mov    eax, matrix;
	__asm        mov    dword ptr [eax+0x2C], 0;
// LINE 558:
	__asm        mov    eax, matrix;
	__asm        mov    dword ptr [eax+0x38], 0;
	__asm        mov    eax, matrix;
	__asm        mov    eax, [eax+0x38];
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+0x34], eax;
	__asm        mov    eax, matrix;
	__asm        mov    eax, [eax+0x34];
	__asm        mov    ecx, matrix;
	__asm        mov    [ecx+0x30], eax;
// LINE 559:
	__asm        mov    eax, matrix;
	__asm        mov    dword ptr [eax+0x3C], 0x10000;
// LINE 561:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9735
void S3CameraRotate() {
	int32_t alt;
	int32_t temp;
	struct Point3d cameraDelta;

// LINE 564:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x18;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 606:
	__asm        cmp    dword ptr ds:[0x5B4DB8], 3;
	__asm        jne    near ptr 0x004F9791;
// LINE 608:
// Block start:
	struct _DYOBJ_INST* dyobj;
	__asm        call   0x00546500;
	__asm        mov    dyobj, eax;
// LINE 613:
	__asm        mov    eax, dyobj;
	__asm        mov    eax, [eax+0x18];
	__asm        sub    eax, ds:[0x6C1318];
	__asm        mov    cameraDelta.x, eax;
// LINE 614:
	__asm        mov    eax, dyobj;
	__asm        mov    eax, [eax+0x20];
	__asm        sub    eax, ds:[0x6C1320];
	__asm        mov    cameraDelta.z, eax;
// LINE 615:
	__asm        mov    eax, dyobj;
	__asm        mov    eax, [eax+0x1C];
	__asm        sub    eax, ds:[0x6C131C];
	__asm        mov    cameraDelta.y, eax;
// LINE 634:
	__asm        lea    eax, cameraDelta.x;
	__asm        push   eax;
	__asm        call   0x004F9263;
	__asm        add    esp, 4;
// LINE 636:
// Block end:
	__asm        jmp    near ptr 0x004F98D7;
	__asm        cmp    dword ptr ds:[0x5B4DB8], 2;
	__asm        jne    near ptr 0x004F980B;
// LINE 639:
	__asm        cmp    dword ptr ds:[0x6BF190], 0;
	__asm        je     near ptr 0x004F97B8;
	__asm        mov    eax, ds:[0x6BF194];
	__asm        mov    alt, eax;
	__asm        jmp    near ptr 0x004F97C0;
	__asm        mov    eax, ds:[0x6BF194];
	__asm        mov    alt, eax;
// LINE 640:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x18];
	__asm        sub    eax, ds:[0x6C1318];
	__asm        mov    cameraDelta.x, eax;
// LINE 641:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x20];
	__asm        sub    eax, ds:[0x6C1320];
	__asm        mov    cameraDelta.z, eax;
// LINE 642:
	__asm        mov    eax, alt;
	__asm        sub    eax, ds:[0x6C131C];
	__asm        mov    cameraDelta.y, eax;
// LINE 654:
	__asm        lea    eax, cameraDelta.x;
	__asm        push   eax;
	__asm        call   0x004F9263;
	__asm        add    esp, 4;
// LINE 656:
	__asm        jmp    near ptr 0x004F98D7;
	__asm        cmp    dword ptr ds:[0x5B4DB8], 0;
	__asm        je     near ptr 0x004F9849;
// LINE 658:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        add    eax, 0x24;
	__asm        push   eax;
	__asm        lea    eax, cameraDelta.x;
	__asm        push   eax;
	__asm        push   0x59B518;
	__asm        call   0x004D2094;
	__asm        add    esp, 0xC;
// LINE 671:
	__asm        lea    eax, cameraDelta.x;
	__asm        push   eax;
	__asm        call   0x004F9263;
	__asm        add    esp, 4;
// LINE 673:
	__asm        jmp    near ptr 0x004F98D7;
// LINE 676:
	__asm        mov    eax, 0x11;
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        sub    eax, [ecx+0x1AC];
	__asm        mov    temp, eax;
// LINE 677:
	__asm        cmp    temp, 0;
	__asm        jge    near ptr 0x004F986E;
	__asm        mov    temp, 0;
// LINE 678:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x18];
	__asm        sub    eax, ds:[0x6C1318];
	__asm        mov    cameraDelta.x, eax;
// LINE 679:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    eax, [eax*4+0x6BF168];
	__asm        mov    ecx, ds:[0x5B4968];
	__asm        mov    ecx, [ecx+0xA4];
	__asm        add    eax, [ecx+0x1C];
	__asm        mov    ecx, temp;
	__asm        shl    ecx, 0x10;
	__asm        sub    eax, ecx;
	__asm        sub    eax, ds:[0x6C131C];
	__asm        mov    cameraDelta.y, eax;
// LINE 680:
	__asm        mov    eax, ds:[0x5B4968];
	__asm        mov    eax, [eax+0xA4];
	__asm        mov    eax, [eax+0x20];
	__asm        sub    eax, ds:[0x6C1320];
	__asm        mov    cameraDelta.z, eax;
// LINE 693:
	__asm        lea    eax, cameraDelta.x;
	__asm        push   eax;
	__asm        call   0x004F9263;
	__asm        add    esp, 4;
// LINE 699:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f98dc
void S3CameraTweakInit() {
	int32_t *[10] pvals;

// LINE 711:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x28;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 726:
	__asm        mov    pvals[0], 0x5B4DF4;
// LINE 727:
	__asm        mov    pvals[1], 0x5B4DF0;
// LINE 728:
	__asm        mov    pvals[2], 0x5B4DF8;
// LINE 730:
	__asm        push   0x5B4E04;
	__asm        push   3;
	__asm        lea    eax, pvals[0];
	__asm        push   eax;
	__asm        call   0x004C9AD0;
	__asm        add    esp, 0xC;
// LINE 732:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9912
void S3CameraChaseAdjust(int32_t camevent) {
// LINE 742:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 4;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 743:
	__asm        mov    eax, camevent;
	__asm        mov    [ebp-4], eax;
	__asm        jmp    near ptr 0x004F9A19;
// LINE 746:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        sub    dword ptr [eax*4+0x6BF160], 0x40000;
// LINE 747:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    ecx, ds:[0x5B4DF0];
	__asm        cmp    [eax*4+0x6BF160], ecx;
	__asm        jge    near ptr 0x004F9969;
// LINE 748:
	__asm        mov    eax, ds:[0x5B4DF0];
	__asm        mov    ecx, ds:[0x5B4DFC];
	__asm        lea    ecx, [ecx+ecx*2];
	__asm        mov    [ecx*4+0x6BF160], eax;
// LINE 749:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 751:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        add    dword ptr [eax*4+0x6BF160], 0x40000;
// LINE 752:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 754:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        add    dword ptr [eax*4+0x6BF164], 0x40000;
// LINE 755:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 757:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        sub    dword ptr [eax*4+0x6BF164], 0x40000;
// LINE 759:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        cmp    dword ptr [eax*4+0x6BF164], 0;
	__asm        jge    near ptr 0x004F99DA;
// LINE 760:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        mov    dword ptr [eax*4+0x6BF164], 0;
// LINE 761:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 763:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        sub    dword ptr [eax*4+0x6BF168], 0x40000;
// LINE 764:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 766:
	__asm        mov    eax, ds:[0x5B4DFC];
	__asm        lea    eax, [eax+eax*2];
	__asm        add    dword ptr [eax*4+0x6BF168], 0x40000;
// LINE 767:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 770:
	__asm        jmp    near ptr 0x004F9A49;
// LINE 771:
	__asm        jmp    near ptr 0x004F9A49;
	__asm        sub    dword ptr [ebp-4], 0x1B;
	__asm        cmp    dword ptr [ebp-4], 5;
	__asm        ja     near ptr 0x004F9A49;
	__asm        mov    eax, [ebp-4];
	__asm        jmp    dword ptr [eax*4+0x4F9A31];
	__asm        cdq;
	__asm        dec    edi;
	__asm        add    [esi-0x67], ch;
	__asm        dec    edi;
	__asm        add    [esi-0x61FFB067], al;
	__asm        cdq;
	__asm        dec    edi;
	__asm        add    bh, dh;
	__asm        cdq;
	__asm        dec    edi;
	__asm        add    bh, bl;
	__asm        cdq;
	__asm        dec    edi;
	__asm        (bad);
// LINE 772:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9a4e
void S3CameraCycleChase() {
// LINE 781:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 782:
	__asm        inc    dword ptr ds:[0x5B4DFC];
// LINE 783:
	__asm        cmp    dword ptr ds:[0x5B4DFC], 3;
	__asm        jl     near ptr 0x004F9A71;
// LINE 784:
	__asm        mov    dword ptr ds:[0x5B4DFC], 0;
// LINE 785:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9a76
struct _CHASE_INFO* S3CameraGetChaseInfo() {
// LINE 794:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 795:
	__asm        mov    eax, 0x6BF160;
	__asm        jmp    near ptr 0x004F9A86;
// LINE 796:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9a8b
void S3CameraSetChaseInfo(struct _CHASE_INFO* cinfo) {
// LINE 805:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 806:
	__asm        mov    edi, 0x6BF160;
	__asm        mov    esi, cinfo;
	__asm        mov    ecx, 9;
	__asm        rep movsd;
// LINE 807:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}

// FUNCTION: COPTER_D 0x004f9aa5
int32_t S3CameraGetBldAlt(struct Point3d* loc) {
	int32_t normy;
	int32_t normx;
	struct _CELL_INFO* cptr;
	int32_t objy;
	int32_t y;
	int32_t x;
	struct _STOBJ_INST* stobj;
	int32_t maxobjy;
	int32_t normz;
	int32_t flags;

// LINE 817:
	__asm        push   ebp;
	__asm        mov    ebp, esp;
	__asm        sub    esp, 0x28;
	__asm        push   ebx;
	__asm        push   esi;
	__asm        push   edi;
// LINE 825:
	__asm        mov    eax, loc;
	__asm        mov    eax, [eax];
	__asm        add    eax, 0x20000000;
	__asm        sar    eax, 0x16;
	__asm        mov    x, eax;
// LINE 826:
	__asm        mov    eax, 0x20000000;
	__asm        mov    ecx, loc;
	__asm        sub    eax, [ecx+8];
	__asm        sar    eax, 0x16;
	__asm        mov    y, eax;
// LINE 828:
	__asm        mov    eax, y;
	__asm        and    eax, 0xFF;
	__asm        mov    ecx, x;
	__asm        and    ecx, 0xFF;
	__asm        shl    ecx, 0xA;
	__asm        mov    eax, [ecx+eax*4+0x67ED30];
	__asm        mov    cptr, eax;
// LINE 830:
	__asm        mov    eax, loc;
	__asm        mov    eax, [eax];
	__asm        mov    ecx, cptr;
	__asm        movsx  ecx, word ptr [ecx+2];
	__asm        shl    ecx, 0x10;
	__asm        sub    eax, ecx;
	__asm        mov    normx, eax;
// LINE 831:
	__asm        mov    eax, loc;
	__asm        mov    eax, [eax+8];
	__asm        mov    ecx, cptr;
	__asm        movsx  ecx, word ptr [ecx+6];
	__asm        shl    ecx, 0x10;
	__asm        sub    eax, ecx;
	__asm        mov    normz, eax;
// LINE 832:
	__asm        mov    eax, loc;
	__asm        mov    eax, [eax+4];
	__asm        mov    ecx, cptr;
	__asm        movsx  ecx, word ptr [ecx+4];
	__asm        shl    ecx, 0x10;
	__asm        sub    eax, ecx;
	__asm        mov    normy, eax;
// LINE 834:
	__asm        mov    objy, 0;
// LINE 835:
	__asm        mov    maxobjy, 0;
// LINE 836:
	__asm        mov    eax, cptr;
	__asm        mov    eax, [eax+0xC];
	__asm        mov    stobj, eax;
// LINE 837:
	__asm        cmp    stobj, 0;
	__asm        je     near ptr 0x004F9BA4;
// LINE 839:
	__asm        mov    eax, stobj;
	__asm        mov    eax, [eax+8];
	__asm        mov    flags, eax;
// LINE 845:
	__asm        push   0;
	__asm        push   0;
	__asm        push   0x10000;
	__asm        push   0x10000;
	__asm        lea    eax, flags;
	__asm        push   eax;
	__asm        mov    eax, normz;
	__asm        push   eax;
	__asm        mov    eax, normy;
	__asm        push   eax;
	__asm        mov    eax, normx;
	__asm        push   eax;
	__asm        mov    eax, stobj;
	__asm        mov    eax, [eax+4];
	__asm        push   eax;
	__asm        call   0x004D31E7;
	__asm        add    esp, 0x24;
	__asm        mov    objy, eax;
// LINE 846:
	__asm        mov    eax, objy;
	__asm        cmp    maxobjy, eax;
	__asm        jge    near ptr 0x004F9B97;
// LINE 848:
	__asm        mov    eax, objy;
	__asm        mov    maxobjy, eax;
// LINE 850:
	__asm        mov    eax, stobj;
	__asm        mov    eax, [eax];
	__asm        mov    stobj, eax;
// LINE 851:
	__asm        jmp    near ptr 0x004F9B42;
// LINE 853:
	__asm        mov    eax, maxobjy;
	__asm        jmp    near ptr 0x004F9BAC;
// LINE 854:
	__asm        pop    edi;
	__asm        pop    esi;
	__asm        pop    ebx;
	__asm        leave;
	__asm        ret;
}



// Contribution: 3:0001ddb8-0001de10 Module: 175, 8 byte alignment, initialized_data, read, write, 
// GLOBAL: COPTER_D 0x005b4db8
// G_camera_mode
// GLOBAL: COPTER_D 0x005b4dc0
// S_camera_targpos2
// GLOBAL: COPTER_D 0x005b4dd0
// S_camera_targpos1
// GLOBAL: COPTER_D 0x005b4de0
// S_camera_targpos3
// GLOBAL: COPTER_D 0x005b4dec
// InClose
// GLOBAL: COPTER_D 0x005b4df0
// S_ctwk_min_dist
// GLOBAL: COPTER_D 0x005b4df4
// S_ctwk_max_dist
// GLOBAL: COPTER_D 0x005b4df8
// S_ctwk_height
// GLOBAL: COPTER_D 0x005b4dfc
// S_curr_chase
// GLOBAL: COPTER_D 0x005b4e00
// S_altdiff


// Unknown globals:
// The PDB was slightly corrupted and we aren't sure which file these globals belong to.
// GLOBAL: COPTER_D 0x006bf1a0
// _CameraIdeal
// GLOBAL: COPTER_D 0x006bf194
// _G_camera_targ2objy
// GLOBAL: COPTER_D 0x006bf190
// _G_camera_targ2firey
// GLOBAL: COPTER_D 0x006bf160
// _S_chase

// WARNING: this global might actually belong to: C:\Copter\source\game\S3heli.c
// GLOBAL: COPTER_D 0x006bf194
// G_camera_targ2objy

// WARNING: this global might actually belong to: C:\Copter\source\game\S3heli.c
// GLOBAL: COPTER_D 0x006bf190
// G_camera_targ2firey
// GLOBAL: COPTER_D 0x006bf1a0
// CameraIdeal
// GLOBAL: COPTER_D 0x006bf160
// S_chase
